(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{4444:function(e,i,s){"use strict";s.d(i,{BH:function(){return Deferred},G6:function(){return isSafari},L:function(){return base64urlEncodeWithoutPadding},LL:function(){return ErrorFactory},P0:function(){return getDefaultEmulatorHostnameAndPort},Pz:function(){return getExperimentalSetting},Sg:function(){return createMockUserToken},ZR:function(){return FirebaseError},aH:function(){return getDefaultAppConfig},b$:function(){return isReactNative},eu:function(){return validateIndexedDBOpenable},hl:function(){return isIndexedDBAvailable},m9:function(){return getModularInstance},ne:function(){return createSubscribe},pd:function(){return extractQuerystring},q4:function(){return getDefaultEmulatorHost},ru:function(){return isBrowserExtension},tV:function(){return base64Decode},uI:function(){return isMobileCordova},vZ:function(){return function deepEqual(e,i){if(e===i)return!0;let s=Object.keys(e),o=Object.keys(i);for(let l of s){if(!o.includes(l))return!1;let s=e[l],h=i[l];if(isObject(s)&&isObject(h)){if(!deepEqual(s,h))return!1}else if(s!==h)return!1}for(let e of o)if(!s.includes(e))return!1;return!0}},w1:function(){return isIE},xO:function(){return querystring},xb:function(){return isEmpty},z$:function(){return getUA},zd:function(){return querystringDecode}});var o=s(3454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let stringToByteArray$1=function(e){let i=[],s=0;for(let o=0;o<e.length;o++){let l=e.charCodeAt(o);l<128?i[s++]=l:(l<2048?i[s++]=l>>6|192:((64512&l)==55296&&o+1<e.length&&(64512&e.charCodeAt(o+1))==56320?(l=65536+((1023&l)<<10)+(1023&e.charCodeAt(++o)),i[s++]=l>>18|240,i[s++]=l>>12&63|128):i[s++]=l>>12|224,i[s++]=l>>6&63|128),i[s++]=63&l|128)}return i},byteArrayToString=function(e){let i=[],s=0,o=0;for(;s<e.length;){let l=e[s++];if(l<128)i[o++]=String.fromCharCode(l);else if(l>191&&l<224){let h=e[s++];i[o++]=String.fromCharCode((31&l)<<6|63&h)}else if(l>239&&l<365){let h=e[s++],d=e[s++],f=e[s++],g=((7&l)<<18|(63&h)<<12|(63&d)<<6|63&f)-65536;i[o++]=String.fromCharCode(55296+(g>>10)),i[o++]=String.fromCharCode(56320+(1023&g))}else{let h=e[s++],d=e[s++];i[o++]=String.fromCharCode((15&l)<<12|(63&h)<<6|63&d)}}return i.join("")},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,i){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let s=i?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let i=0;i<e.length;i+=3){let l=e[i],h=i+1<e.length,d=h?e[i+1]:0,f=i+2<e.length,g=f?e[i+2]:0,_=l>>2,b=(3&l)<<4|d>>4,w=(15&d)<<2|g>>6,k=63&g;f||(k=64,h||(w=64)),o.push(s[_],s[b],s[w],s[k])}return o.join("")},encodeString(e,i){return this.HAS_NATIVE_SUPPORT&&!i?btoa(e):this.encodeByteArray(stringToByteArray$1(e),i)},decodeString(e,i){return this.HAS_NATIVE_SUPPORT&&!i?atob(e):byteArrayToString(this.decodeStringToByteArray(e,i))},decodeStringToByteArray(e,i){this.init_();let s=i?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let i=0;i<e.length;){let l=s[e.charAt(i++)],h=i<e.length,d=h?s[e.charAt(i)]:0;++i;let f=i<e.length,g=f?s[e.charAt(i)]:64;++i;let _=i<e.length,b=_?s[e.charAt(i)]:64;if(++i,null==l||null==d||null==g||null==b)throw new DecodeBase64StringError;let w=l<<2|d>>4;if(o.push(w),64!==g){let e=d<<4&240|g>>2;if(o.push(e),64!==b){let e=g<<6&192|b;o.push(e)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let DecodeBase64StringError=class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};let base64Encode=function(e){let i=stringToByteArray$1(e);return l.encodeByteArray(i,!0)},base64urlEncodeWithoutPadding=function(e){return base64Encode(e).replace(/\./g,"")},base64Decode=function(e){try{return l.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},getDefaultsFromGlobal=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(void 0===o||void 0===o.env)return;let e=o.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},getDefaultsFromCookie=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let i=e&&base64Decode(e[1]);return i&&JSON.parse(i)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},getDefaultEmulatorHost=e=>{var i,s;return null===(s=null===(i=getDefaults())||void 0===i?void 0:i.emulatorHosts)||void 0===s?void 0:s[e]},getDefaultEmulatorHostnameAndPort=e=>{let i=getDefaultEmulatorHost(e);if(!i)return;let s=i.lastIndexOf(":");if(s<=0||s+1===i.length)throw Error(`Invalid host ${i} with no separate hostname and port!`);let o=parseInt(i.substring(s+1),10);return"["===i[0]?[i.substring(1,s-1),o]:[i.substring(0,s),o]},getDefaultAppConfig=()=>{var e;return null===(e=getDefaults())||void 0===e?void 0:e.config},getExperimentalSetting=e=>{var i;return null===(i=getDefaults())||void 0===i?void 0:i[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Deferred=class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(i):e(i,s))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(e,i){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let s=i||"demo-project",o=e.iat||0,l=e.sub||e.user_id;if(!l)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[base64urlEncodeWithoutPadding(JSON.stringify({alg:"none",type:"JWT"})),base64urlEncodeWithoutPadding(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function isIE(){let e=getUA();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function isSafari(){return!function(){var e;let i=null===(e=getDefaults())||void 0===e?void 0:e.forceEnvironment;if("node"===i)return!0;if("browser"===i)return!1;try{return"[object process]"===Object.prototype.toString.call(s.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return"object"==typeof indexedDB}catch(e){return!1}}function validateIndexedDBOpenable(){return new Promise((e,i)=>{try{let s=!0,o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),s||self.indexedDB.deleteDatabase(o),e(!0)},l.onupgradeneeded=()=>{s=!1},l.onerror=()=>{var e;i((null===(e=l.error)||void 0===e?void 0:e.message)||"")}}catch(e){i(e)}})}let FirebaseError=class FirebaseError extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}};let ErrorFactory=class ErrorFactory{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){let s=i[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?l.replace(h,(e,i)=>{let o=s[i];return null!=o?String(o):`<${i}?>`}):"Error",f=`${this.serviceName}: ${d} (${o}).`,g=new FirebaseError(o,f,s);return g}};let h=/\{\$([^}]+)}/g;function isEmpty(e){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0}function isObject(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(e){let i=[];for(let[s,o]of Object.entries(e))Array.isArray(o)?o.forEach(e=>{i.push(encodeURIComponent(s)+"="+encodeURIComponent(e))}):i.push(encodeURIComponent(s)+"="+encodeURIComponent(o));return i.length?"&"+i.join("&"):""}function querystringDecode(e){let i={},s=e.replace(/^\?/,"").split("&");return s.forEach(e=>{if(e){let[s,o]=e.split("=");i[decodeURIComponent(s)]=decodeURIComponent(o)}}),i}function extractQuerystring(e){let i=e.indexOf("?");if(!i)return"";let s=e.indexOf("#",i);return e.substring(i,s>0?s:void 0)}function createSubscribe(e,i){let s=new ObserverProxy(e,i);return s.subscribe.bind(s)}let ObserverProxy=class ObserverProxy{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,s){let o;if(void 0===e&&void 0===i&&void 0===s)throw Error("Missing Observer.");void 0===(o=!function(e,i){if("object"!=typeof e||null===e)return!1;for(let s of i)if(s in e&&"function"==typeof e[s])return!0;return!1}(e,["next","error","complete"])?{next:e,error:i,complete:s}:e).next&&(o.next=noop),void 0===o.error&&(o.error=noop),void 0===o.complete&&(o.complete=noop);let l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(e){}}),this.observers.push(o),l}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{i(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(e){return e&&e._delegate?e._delegate:e}},9742:function(e,i){"use strict";i.byteLength=function(e){var i=getLens(e),s=i[0],o=i[1];return(s+o)*3/4-o},i.toByteArray=function(e){var i,s,h=getLens(e),d=h[0],f=h[1],g=new l((d+f)*3/4-f),_=0,b=f>0?d-4:d;for(s=0;s<b;s+=4)i=o[e.charCodeAt(s)]<<18|o[e.charCodeAt(s+1)]<<12|o[e.charCodeAt(s+2)]<<6|o[e.charCodeAt(s+3)],g[_++]=i>>16&255,g[_++]=i>>8&255,g[_++]=255&i;return 2===f&&(i=o[e.charCodeAt(s)]<<2|o[e.charCodeAt(s+1)]>>4,g[_++]=255&i),1===f&&(i=o[e.charCodeAt(s)]<<10|o[e.charCodeAt(s+1)]<<4|o[e.charCodeAt(s+2)]>>2,g[_++]=i>>8&255,g[_++]=255&i),g},i.fromByteArray=function(e){for(var i,o=e.length,l=o%3,h=[],d=0,f=o-l;d<f;d+=16383)h.push(function(e,i,o){for(var l,h=[],d=i;d<o;d+=3)h.push(s[(l=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(255&e[d+2]))>>18&63]+s[l>>12&63]+s[l>>6&63]+s[63&l]);return h.join("")}(e,d,d+16383>f?f:d+16383));return 1===l?h.push(s[(i=e[o-1])>>2]+s[i<<4&63]+"=="):2===l&&h.push(s[(i=(e[o-2]<<8)+e[o-1])>>10]+s[i>>4&63]+s[i<<2&63]+"="),h.join("")};for(var s=[],o=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,f=h.length;d<f;++d)s[d]=h[d],o[h.charCodeAt(d)]=d;function getLens(e){var i=e.length;if(i%4>0)throw Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");-1===s&&(s=i);var o=s===i?0:4-s%4;return[s,o]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},8764:function(e,i,s){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var o=s(9742),l=s(645),h="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function createBuffer(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var i=new Uint8Array(e);return Object.setPrototypeOf(i,Buffer.prototype),i}function Buffer(e,i,s){if("number"==typeof e){if("string"==typeof i)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,i,s)}function from(e,i,s){if("string"==typeof e)return function(e,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!Buffer.isEncoding(i))throw TypeError("Unknown encoding: "+i);var s=0|byteLength(e,i),o=createBuffer(s),l=o.write(e,i);return l!==s&&(o=o.slice(0,l)),o}(e,i);if(ArrayBuffer.isView(e))return function(e){if(isInstance(e,Uint8Array)){var i=new Uint8Array(e);return fromArrayBuffer(i.buffer,i.byteOffset,i.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,i,s);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return Buffer.from(o,i,s);var l=function(e){if(Buffer.isBuffer(e)){var i,s=0|checked(e.length),o=createBuffer(s);return 0===o.length||e.copy(o,0,0,s),o}return void 0!==e.length?"number"!=typeof e.length||(i=e.length)!=i?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}(e);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),i,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){for(var i=e.length<0?0:0|checked(e.length),s=createBuffer(i),o=0;o<i;o+=1)s[o]=255&e[o];return s}function fromArrayBuffer(e,i,s){var o;if(i<0||e.byteLength<i)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<i+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(o=void 0===i&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,i):new Uint8Array(e,i,s),Buffer.prototype),o}function checked(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function byteLength(e,i){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var s=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===s)return 0;for(var l=!1;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return base64ToBytes(e).length;default:if(l)return o?-1:utf8ToBytes(e).length;i=(""+i).toLowerCase(),l=!0}}function slowToString(e,i,s){var l,h,d=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0||(s>>>=0)<=(i>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,i,s){var o=e.length;(!i||i<0)&&(i=0),(!s||s<0||s>o)&&(s=o);for(var l="",h=i;h<s;++h)l+=f[e[h]];return l}(this,i,s);case"utf8":case"utf-8":return utf8Slice(this,i,s);case"ascii":return function(e,i,s){var o="";s=Math.min(e.length,s);for(var l=i;l<s;++l)o+=String.fromCharCode(127&e[l]);return o}(this,i,s);case"latin1":case"binary":return function(e,i,s){var o="";s=Math.min(e.length,s);for(var l=i;l<s;++l)o+=String.fromCharCode(e[l]);return o}(this,i,s);case"base64":return l=i,h=s,0===l&&h===this.length?o.fromByteArray(this):o.fromByteArray(this.slice(l,h));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,i,s){for(var o=e.slice(i,s),l="",h=0;h<o.length-1;h+=2)l+=String.fromCharCode(o[h]+256*o[h+1]);return l}(this,i,s);default:if(d)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),d=!0}}function swap(e,i,s){var o=e[i];e[i]=e[s],e[s]=o}function bidirectionalIndexOf(e,i,s,o,l){var h;if(0===e.length)return -1;if("string"==typeof s?(o=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),(h=s=+s)!=h&&(s=l?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(l)return -1;s=e.length-1}else if(s<0){if(!l)return -1;s=0}if("string"==typeof i&&(i=Buffer.from(i,o)),Buffer.isBuffer(i))return 0===i.length?-1:arrayIndexOf(e,i,s,o,l);if("number"==typeof i)return(i&=255,"function"==typeof Uint8Array.prototype.indexOf)?l?Uint8Array.prototype.indexOf.call(e,i,s):Uint8Array.prototype.lastIndexOf.call(e,i,s):arrayIndexOf(e,[i],s,o,l);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,i,s,o,l){var h,d=1,f=e.length,g=i.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||i.length<2)return -1;d=2,f/=2,g/=2,s/=2}function read(e,i){return 1===d?e[i]:e.readUInt16BE(i*d)}if(l){var _=-1;for(h=s;h<f;h++)if(read(e,h)===read(i,-1===_?0:h-_)){if(-1===_&&(_=h),h-_+1===g)return _*d}else -1!==_&&(h-=h-_),_=-1}else for(s+g>f&&(s=f-g),h=s;h>=0;h--){for(var b=!0,w=0;w<g;w++)if(read(e,h+w)!==read(i,w)){b=!1;break}if(b)return h}return -1}function utf8Slice(e,i,s){s=Math.min(e.length,s);for(var o=[],l=i;l<s;){var h,d,f,g,_=e[l],b=null,w=_>239?4:_>223?3:_>191?2:1;if(l+w<=s)switch(w){case 1:_<128&&(b=_);break;case 2:(192&(h=e[l+1]))==128&&(g=(31&_)<<6|63&h)>127&&(b=g);break;case 3:h=e[l+1],d=e[l+2],(192&h)==128&&(192&d)==128&&(g=(15&_)<<12|(63&h)<<6|63&d)>2047&&(g<55296||g>57343)&&(b=g);break;case 4:h=e[l+1],d=e[l+2],f=e[l+3],(192&h)==128&&(192&d)==128&&(192&f)==128&&(g=(15&_)<<18|(63&h)<<12|(63&d)<<6|63&f)>65535&&g<1114112&&(b=g)}null===b?(b=65533,w=1):b>65535&&(b-=65536,o.push(b>>>10&1023|55296),b=56320|1023&b),o.push(b),l+=w}return function(e){var i=e.length;if(i<=4096)return String.fromCharCode.apply(String,e);for(var s="",o=0;o<i;)s+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return s}(o)}function checkOffset(e,i,s){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+i>s)throw RangeError("Trying to access beyond buffer length")}function checkInt(e,i,s,o,l,h){if(!Buffer.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(i>l||i<h)throw RangeError('"value" argument is out of bounds');if(s+o>e.length)throw RangeError("Index out of range")}function checkIEEE754(e,i,s,o,l,h){if(s+o>e.length||s<0)throw RangeError("Index out of range")}function writeFloat(e,i,s,o,h){return i=+i,s>>>=0,h||checkIEEE754(e,i,s,4,34028234663852886e22,-34028234663852886e22),l.write(e,i,s,o,23,4),s+4}function writeDouble(e,i,s,o,h){return i=+i,s>>>=0,h||checkIEEE754(e,i,s,8,17976931348623157e292,-17976931348623157e292),l.write(e,i,s,o,52,8),s+8}i.lW=Buffer,i.h2=50,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(e,i),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,i,s){return from(e,i,s)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,i,s){return(assertSize(e),e<=0)?createBuffer(e):void 0!==i?"string"==typeof s?createBuffer(e).fill(i,s):createBuffer(e).fill(i):createBuffer(e)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,i){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(i))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===i)return 0;for(var s=e.length,o=i.length,l=0,h=Math.min(s,o);l<h;++l)if(e[l]!==i[l]){s=e[l],o=i[l];break}return s<o?-1:o<s?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,i){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===i)for(s=0,i=0;s<e.length;++s)i+=e[s].length;var s,o=Buffer.allocUnsafe(i),l=0;for(s=0;s<e.length;++s){var h=e[s];if(isInstance(h,Uint8Array))l+h.length>o.length?Buffer.from(h).copy(o,l):Uint8Array.prototype.set.call(o,h,l);else if(Buffer.isBuffer(h))h.copy(o,l);else throw TypeError('"list" argument must be an Array of Buffers');l+=h.length}return o},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<e;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<e;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<e;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",s=i.h2;return e=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(e+=" ... "),"<Buffer "+e+">"},h&&(Buffer.prototype[h]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,i,s,o,l){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===i&&(i=0),void 0===s&&(s=e?e.length:0),void 0===o&&(o=0),void 0===l&&(l=this.length),i<0||s>e.length||o<0||l>this.length)throw RangeError("out of range index");if(o>=l&&i>=s)return 0;if(o>=l)return -1;if(i>=s)return 1;if(i>>>=0,s>>>=0,o>>>=0,l>>>=0,this===e)return 0;for(var h=l-o,d=s-i,f=Math.min(h,d),g=this.slice(o,l),_=e.slice(i,s),b=0;b<f;++b)if(g[b]!==_[b]){h=g[b],d=_[b];break}return h<d?-1:d<h?1:0},Buffer.prototype.includes=function(e,i,s){return -1!==this.indexOf(e,i,s)},Buffer.prototype.indexOf=function(e,i,s){return bidirectionalIndexOf(this,e,i,s,!0)},Buffer.prototype.lastIndexOf=function(e,i,s){return bidirectionalIndexOf(this,e,i,s,!1)},Buffer.prototype.write=function(e,i,s,o){if(void 0===i)o="utf8",s=this.length,i=0;else if(void 0===s&&"string"==typeof i)o=i,s=this.length,i=0;else if(isFinite(i))i>>>=0,isFinite(s)?(s>>>=0,void 0===o&&(o="utf8")):(o=s,s=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var l,h,d,f,g,_,b,w,k=this.length-i;if((void 0===s||s>k)&&(s=k),e.length>0&&(s<0||i<0)||i>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var O=!1;;)switch(o){case"hex":return function(e,i,s,o){s=Number(s)||0;var l=e.length-s;o?(o=Number(o))>l&&(o=l):o=l;var h=i.length;o>h/2&&(o=h/2);for(var d=0;d<o;++d){var f=parseInt(i.substr(2*d,2),16);if(f!=f)break;e[s+d]=f}return d}(this,e,i,s);case"utf8":case"utf-8":return l=i,h=s,blitBuffer(utf8ToBytes(e,this.length-l),this,l,h);case"ascii":case"latin1":case"binary":return d=i,f=s,blitBuffer(function(e){for(var i=[],s=0;s<e.length;++s)i.push(255&e.charCodeAt(s));return i}(e),this,d,f);case"base64":return g=i,_=s,blitBuffer(base64ToBytes(e),this,g,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b=i,w=s,blitBuffer(function(e,i){for(var s,o,l=[],h=0;h<e.length&&!((i-=2)<0);++h)o=(s=e.charCodeAt(h))>>8,l.push(s%256),l.push(o);return l}(e,this.length-b),this,b,w);default:if(O)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),O=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(e,i){var s=this.length;e=~~e,i=void 0===i?s:~~i,e<0?(e+=s)<0&&(e=0):e>s&&(e=s),i<0?(i+=s)<0&&(i=0):i>s&&(i=s),i<e&&(i=e);var o=this.subarray(e,i);return Object.setPrototypeOf(o,Buffer.prototype),o},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(e,i,s){e>>>=0,i>>>=0,s||checkOffset(e,i,this.length);for(var o=this[e],l=1,h=0;++h<i&&(l*=256);)o+=this[e+h]*l;return o},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(e,i,s){e>>>=0,i>>>=0,s||checkOffset(e,i,this.length);for(var o=this[e+--i],l=1;i>0&&(l*=256);)o+=this[e+--i]*l;return o},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(e,i){return e>>>=0,i||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(e,i){return e>>>=0,i||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(e,i){return e>>>=0,i||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,i,s){e>>>=0,i>>>=0,s||checkOffset(e,i,this.length);for(var o=this[e],l=1,h=0;++h<i&&(l*=256);)o+=this[e+h]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*i)),o},Buffer.prototype.readIntBE=function(e,i,s){e>>>=0,i>>>=0,s||checkOffset(e,i,this.length);for(var o=i,l=1,h=this[e+--o];o>0&&(l*=256);)h+=this[e+--o]*l;return h>=(l*=128)&&(h-=Math.pow(2,8*i)),h},Buffer.prototype.readInt8=function(e,i){return(e>>>=0,i||checkOffset(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},Buffer.prototype.readInt16LE=function(e,i){e>>>=0,i||checkOffset(e,2,this.length);var s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt16BE=function(e,i){e>>>=0,i||checkOffset(e,2,this.length);var s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt32LE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),l.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,i){return e>>>=0,i||checkOffset(e,4,this.length),l.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,i){return e>>>=0,i||checkOffset(e,8,this.length),l.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,i){return e>>>=0,i||checkOffset(e,8,this.length),l.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(e,i,s,o){if(e=+e,i>>>=0,s>>>=0,!o){var l=Math.pow(2,8*s)-1;checkInt(this,e,i,s,l,0)}var h=1,d=0;for(this[i]=255&e;++d<s&&(h*=256);)this[i+d]=e/h&255;return i+s},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(e,i,s,o){if(e=+e,i>>>=0,s>>>=0,!o){var l=Math.pow(2,8*s)-1;checkInt(this,e,i,s,l,0)}var h=s-1,d=1;for(this[i+h]=255&e;--h>=0&&(d*=256);)this[i+h]=e/d&255;return i+s},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,1,255,0),this[i]=255&e,i+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,2,65535,0),this[i]=255&e,this[i+1]=e>>>8,i+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,2,65535,0),this[i]=e>>>8,this[i+1]=255&e,i+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,4,4294967295,0),this[i+3]=e>>>24,this[i+2]=e>>>16,this[i+1]=e>>>8,this[i]=255&e,i+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,4,4294967295,0),this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e,i+4},Buffer.prototype.writeIntLE=function(e,i,s,o){if(e=+e,i>>>=0,!o){var l=Math.pow(2,8*s-1);checkInt(this,e,i,s,l-1,-l)}var h=0,d=1,f=0;for(this[i]=255&e;++h<s&&(d*=256);)e<0&&0===f&&0!==this[i+h-1]&&(f=1),this[i+h]=(e/d>>0)-f&255;return i+s},Buffer.prototype.writeIntBE=function(e,i,s,o){if(e=+e,i>>>=0,!o){var l=Math.pow(2,8*s-1);checkInt(this,e,i,s,l-1,-l)}var h=s-1,d=1,f=0;for(this[i+h]=255&e;--h>=0&&(d*=256);)e<0&&0===f&&0!==this[i+h+1]&&(f=1),this[i+h]=(e/d>>0)-f&255;return i+s},Buffer.prototype.writeInt8=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,1,127,-128),e<0&&(e=255+e+1),this[i]=255&e,i+1},Buffer.prototype.writeInt16LE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,2,32767,-32768),this[i]=255&e,this[i+1]=e>>>8,i+2},Buffer.prototype.writeInt16BE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,2,32767,-32768),this[i]=e>>>8,this[i+1]=255&e,i+2},Buffer.prototype.writeInt32LE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,4,2147483647,-2147483648),this[i]=255&e,this[i+1]=e>>>8,this[i+2]=e>>>16,this[i+3]=e>>>24,i+4},Buffer.prototype.writeInt32BE=function(e,i,s){return e=+e,i>>>=0,s||checkInt(this,e,i,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e,i+4},Buffer.prototype.writeFloatLE=function(e,i,s){return writeFloat(this,e,i,!0,s)},Buffer.prototype.writeFloatBE=function(e,i,s){return writeFloat(this,e,i,!1,s)},Buffer.prototype.writeDoubleLE=function(e,i,s){return writeDouble(this,e,i,!0,s)},Buffer.prototype.writeDoubleBE=function(e,i,s){return writeDouble(this,e,i,!1,s)},Buffer.prototype.copy=function(e,i,s,o){if(!Buffer.isBuffer(e))throw TypeError("argument should be a Buffer");if(s||(s=0),o||0===o||(o=this.length),i>=e.length&&(i=e.length),i||(i=0),o>0&&o<s&&(o=s),o===s||0===e.length||0===this.length)return 0;if(i<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(o<0)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-i<o-s&&(o=e.length-i+s);var l=o-s;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(i,s,o):Uint8Array.prototype.set.call(e,this.subarray(s,o),i),l},Buffer.prototype.fill=function(e,i,s,o){if("string"==typeof e){if("string"==typeof i?(o=i,i=0,s=this.length):"string"==typeof s&&(o=s,s=this.length),void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);if(1===e.length){var l,h=e.charCodeAt(0);("utf8"===o&&h<128||"latin1"===o)&&(e=h)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(i<0||this.length<i||this.length<s)throw RangeError("Out of range index");if(s<=i)return this;if(i>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"==typeof e)for(l=i;l<s;++l)this[l]=e;else{var d=Buffer.isBuffer(e)?e:Buffer.from(e,o),f=d.length;if(0===f)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(l=0;l<s-i;++l)this[l+i]=d[l%f]}return this};var d=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,i){i=i||1/0;for(var s,o=e.length,l=null,h=[],d=0;d<o;++d){if((s=e.charCodeAt(d))>55295&&s<57344){if(!l){if(s>56319||d+1===o){(i-=3)>-1&&h.push(239,191,189);continue}l=s;continue}if(s<56320){(i-=3)>-1&&h.push(239,191,189),l=s;continue}s=(l-55296<<10|s-56320)+65536}else l&&(i-=3)>-1&&h.push(239,191,189);if(l=null,s<128){if((i-=1)<0)break;h.push(s)}else if(s<2048){if((i-=2)<0)break;h.push(s>>6|192,63&s|128)}else if(s<65536){if((i-=3)<0)break;h.push(s>>12|224,s>>6&63|128,63&s|128)}else if(s<1114112){if((i-=4)<0)break;h.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}else throw Error("Invalid code point")}return h}function base64ToBytes(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(d,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,i,s,o){for(var l=0;l<o&&!(l+s>=i.length)&&!(l>=e.length);++l)i[l+s]=e[l];return l}function isInstance(e,i){return e instanceof i||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===i.name}var f=function(){for(var e="0123456789abcdef",i=Array(256),s=0;s<16;++s)for(var o=16*s,l=0;l<16;++l)i[o+l]=e[s]+e[l];return i}()},7856:function(e){/*! @license DOMPurify 2.5.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.5/LICENSE */e.exports=function(){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _setPrototypeOf(e,i){return(_setPrototypeOf=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(e,i)}function _construct(e,i,s){return(_construct=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,i,s){var o=[null];o.push.apply(o,i);var l=new(Function.bind.apply(e,o));return s&&_setPrototypeOf(l,s.prototype),l}:Reflect.construct).apply(null,arguments)}function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(e){if("string"==typeof e)return _arrayLikeToArray(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if("Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(e,i)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,i){(null==i||i>e.length)&&(i=e.length);for(var s=0,o=Array(i);s<i;s++)o[s]=e[s];return o}var e,i=Object.hasOwnProperty,s=Object.setPrototypeOf,o=Object.isFrozen,l=Object.getPrototypeOf,h=Object.getOwnPropertyDescriptor,d=Object.freeze,f=Object.seal,g=Object.create,_="undefined"!=typeof Reflect&&Reflect,b=_.apply,w=_.construct;b||(b=function(e,i,s){return e.apply(i,s)}),d||(d=function(e){return e}),f||(f=function(e){return e}),w||(w=function(e,i){return _construct(e,_toConsumableArray(i))});var k=unapply(Array.prototype.forEach),O=unapply(Array.prototype.pop),j=unapply(Array.prototype.push),$=unapply(String.prototype.toLowerCase),q=unapply(String.prototype.toString),ee=unapply(String.prototype.match),et=unapply(String.prototype.replace),er=unapply(String.prototype.indexOf),en=unapply(String.prototype.trim),ei=unapply(RegExp.prototype.test),es=(e=TypeError,function(){for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return w(e,s)});function unapply(e){return function(i){for(var s=arguments.length,o=Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return b(e,i,o)}}function addToSet(e,i,l){l=null!==(h=l)&&void 0!==h?h:$,s&&s(e,null);for(var h,d=i.length;d--;){var f=i[d];if("string"==typeof f){var g=l(f);g!==f&&(o(i)||(i[d]=g),f=g)}e[f]=!0}return e}function clone(e){var s,o=g(null);for(s in e)!0===b(i,e,[s])&&(o[s]=e[s]);return o}function lookupGetter(e,i){for(;null!==e;){var s=h(e,i);if(s){if(s.get)return unapply(s.get);if("function"==typeof s.value)return unapply(s.value)}e=l(e)}return function(e){return console.warn("fallback value for",e),null}}var eo=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ea=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),el=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),eu=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eh=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ef=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ep=d(["#text"]),eg=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),em=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),e_=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ey=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ev=f(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eI=f(/<%[\w\W]*|[\w\W]*%>/gm),eE=f(/\${[\w\W]*}/gm),eT=f(/^data-[\-\w.\u00B7-\uFFFF]/),eA=f(/^aria-[\-\w]+$/),eP=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eR=f(/^(?:\w+script|data):/i),ew=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eS=f(/^html$/i),eC=f(/^[a-z][.\w]*(-[.\w]+)+$/i),_createTrustedTypesPolicy=function(e,i){if("object"!==_typeof(e)||"function"!=typeof e.createPolicy)return null;var s=null,o="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(o)&&(s=i.currentScript.getAttribute(o));var l="dompurify"+(s?"#"+s:"");try{return e.createPolicy(l,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+l+" could not be created."),null}};return function createDOMPurify(){var e,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,DOMPurify=function(e){return createDOMPurify(e)};if(DOMPurify.version="2.5.5",DOMPurify.removed=[],!s||!s.document||9!==s.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;var o=s.document,l=s.document,h=s.DocumentFragment,f=s.HTMLTemplateElement,g=s.Node,_=s.Element,b=s.NodeFilter,w=s.NamedNodeMap,eV=void 0===w?s.NamedNodeMap||s.MozNamedAttrMap:w,ek=s.HTMLFormElement,eO=s.DOMParser,eD=s.trustedTypes,eN=_.prototype,eL=lookupGetter(eN,"cloneNode"),ex=lookupGetter(eN,"nextSibling"),eM=lookupGetter(eN,"childNodes"),eF=lookupGetter(eN,"parentNode");if("function"==typeof f){var eU=l.createElement("template");eU.content&&eU.content.ownerDocument&&(l=eU.content.ownerDocument)}var eB=_createTrustedTypesPolicy(eD,o),ej=eB?eB.createHTML(""):"",e$=l,ez=e$.implementation,eK=e$.createNodeIterator,eH=e$.createDocumentFragment,eq=e$.getElementsByTagName,eG=o.importNode,eW={};try{eW=clone(l).documentMode?l.documentMode:{}}catch(e){}var eJ={};DOMPurify.isSupported="function"==typeof eF&&ez&&void 0!==ez.createHTMLDocument&&9!==eW;var eQ=eP,eY=null,eX=addToSet({},[].concat(_toConsumableArray(eo),_toConsumableArray(ea),_toConsumableArray(el),_toConsumableArray(eh),_toConsumableArray(ep))),eZ=null,e0=addToSet({},[].concat(_toConsumableArray(eg),_toConsumableArray(em),_toConsumableArray(e_),_toConsumableArray(ey))),e1=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),e2=null,e4=null,e6=!0,e9=!0,e5=!1,e3=!0,e8=!1,e7=!0,te=!1,tt=!1,tr=!1,tn=!1,ti=!1,ts=!1,to=!0,ta=!1,tl=!0,tu=!1,th={},td=null,tf=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tp=null,tg=addToSet({},["audio","video","img","source","image","track"]),tm=null,t_=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ty="http://www.w3.org/1998/Math/MathML",tv="http://www.w3.org/2000/svg",tI="http://www.w3.org/1999/xhtml",tE=tI,tT=!1,tA=null,tP=addToSet({},[ty,tv,tI],q),tR=["application/xhtml+xml","text/html"],tw=null,tS=l.createElement("form"),isRegexOrFunction=function(e){return e instanceof RegExp||e instanceof Function},_parseConfig=function(s){tw&&tw===s||(s&&"object"===_typeof(s)||(s={}),s=clone(s),i="application/xhtml+xml"===(e=e=-1===tR.indexOf(s.PARSER_MEDIA_TYPE)?"text/html":s.PARSER_MEDIA_TYPE)?q:$,eY="ALLOWED_TAGS"in s?addToSet({},s.ALLOWED_TAGS,i):eX,eZ="ALLOWED_ATTR"in s?addToSet({},s.ALLOWED_ATTR,i):e0,tA="ALLOWED_NAMESPACES"in s?addToSet({},s.ALLOWED_NAMESPACES,q):tP,tm="ADD_URI_SAFE_ATTR"in s?addToSet(clone(t_),s.ADD_URI_SAFE_ATTR,i):t_,tp="ADD_DATA_URI_TAGS"in s?addToSet(clone(tg),s.ADD_DATA_URI_TAGS,i):tg,td="FORBID_CONTENTS"in s?addToSet({},s.FORBID_CONTENTS,i):tf,e2="FORBID_TAGS"in s?addToSet({},s.FORBID_TAGS,i):{},e4="FORBID_ATTR"in s?addToSet({},s.FORBID_ATTR,i):{},th="USE_PROFILES"in s&&s.USE_PROFILES,e6=!1!==s.ALLOW_ARIA_ATTR,e9=!1!==s.ALLOW_DATA_ATTR,e5=s.ALLOW_UNKNOWN_PROTOCOLS||!1,e3=!1!==s.ALLOW_SELF_CLOSE_IN_ATTR,e8=s.SAFE_FOR_TEMPLATES||!1,e7=!1!==s.SAFE_FOR_XML,te=s.WHOLE_DOCUMENT||!1,tn=s.RETURN_DOM||!1,ti=s.RETURN_DOM_FRAGMENT||!1,ts=s.RETURN_TRUSTED_TYPE||!1,tr=s.FORCE_BODY||!1,to=!1!==s.SANITIZE_DOM,ta=s.SANITIZE_NAMED_PROPS||!1,tl=!1!==s.KEEP_CONTENT,tu=s.IN_PLACE||!1,eQ=s.ALLOWED_URI_REGEXP||eQ,tE=s.NAMESPACE||tI,e1=s.CUSTOM_ELEMENT_HANDLING||{},s.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(s.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(e1.tagNameCheck=s.CUSTOM_ELEMENT_HANDLING.tagNameCheck),s.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(s.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(e1.attributeNameCheck=s.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),s.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof s.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(e1.allowCustomizedBuiltInElements=s.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),e8&&(e9=!1),ti&&(tn=!0),th&&(eY=addToSet({},_toConsumableArray(ep)),eZ=[],!0===th.html&&(addToSet(eY,eo),addToSet(eZ,eg)),!0===th.svg&&(addToSet(eY,ea),addToSet(eZ,em),addToSet(eZ,ey)),!0===th.svgFilters&&(addToSet(eY,el),addToSet(eZ,em),addToSet(eZ,ey)),!0===th.mathMl&&(addToSet(eY,eh),addToSet(eZ,e_),addToSet(eZ,ey))),s.ADD_TAGS&&(eY===eX&&(eY=clone(eY)),addToSet(eY,s.ADD_TAGS,i)),s.ADD_ATTR&&(eZ===e0&&(eZ=clone(eZ)),addToSet(eZ,s.ADD_ATTR,i)),s.ADD_URI_SAFE_ATTR&&addToSet(tm,s.ADD_URI_SAFE_ATTR,i),s.FORBID_CONTENTS&&(td===tf&&(td=clone(td)),addToSet(td,s.FORBID_CONTENTS,i)),tl&&(eY["#text"]=!0),te&&addToSet(eY,["html","head","body"]),eY.table&&(addToSet(eY,["tbody"]),delete e2.tbody),d&&d(s),tw=s)},tC=addToSet({},["mi","mo","mn","ms","mtext"]),tV=addToSet({},["foreignobject","annotation-xml"]),tk=addToSet({},["title","style","font","a","script"]),tO=addToSet({},ea);addToSet(tO,el),addToSet(tO,eu);var tD=addToSet({},eh);addToSet(tD,ef);var _checkValidNamespace=function(i){var s=eF(i);s&&s.tagName||(s={namespaceURI:tE,tagName:"template"});var o=$(i.tagName),l=$(s.tagName);return!!tA[i.namespaceURI]&&(i.namespaceURI===tv?s.namespaceURI===tI?"svg"===o:s.namespaceURI===ty?"svg"===o&&("annotation-xml"===l||tC[l]):!!tO[o]:i.namespaceURI===ty?s.namespaceURI===tI?"math"===o:s.namespaceURI===tv?"math"===o&&tV[l]:!!tD[o]:i.namespaceURI===tI?(s.namespaceURI!==tv||!!tV[l])&&(s.namespaceURI!==ty||!!tC[l])&&!tD[o]&&(tk[o]||!tO[o]):"application/xhtml+xml"===e&&!!tA[i.namespaceURI])},_forceRemove=function(e){j(DOMPurify.removed,{element:e});try{e.parentNode.removeChild(e)}catch(i){try{e.outerHTML=ej}catch(i){e.remove()}}},_removeAttribute=function(e,i){try{j(DOMPurify.removed,{attribute:i.getAttributeNode(e),from:i})}catch(e){j(DOMPurify.removed,{attribute:null,from:i})}if(i.removeAttribute(e),"is"===e&&!eZ[e]){if(tn||ti)try{_forceRemove(i)}catch(e){}else try{i.setAttribute(e,"")}catch(e){}}},_initDocument=function(i){if(tr)i="<remove></remove>"+i;else{var s,o,h=ee(i,/^[\r\n\t ]+/);o=h&&h[0]}"application/xhtml+xml"===e&&tE===tI&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");var d=eB?eB.createHTML(i):i;if(tE===tI)try{s=new eO().parseFromString(d,e)}catch(e){}if(!s||!s.documentElement){s=ez.createDocument(tE,"template",null);try{s.documentElement.innerHTML=tT?ej:d}catch(e){}}var f=s.body||s.documentElement;return(i&&o&&f.insertBefore(l.createTextNode(o),f.childNodes[0]||null),tE===tI)?eq.call(s,te?"html":"body")[0]:te?s.documentElement:f},_createIterator=function(e){return eK.call(e.ownerDocument||e,e,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null,!1)},_isClobbered=function(e){return e instanceof ek&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof eV)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},_isNode=function(e){return"object"===_typeof(g)?e instanceof g:e&&"object"===_typeof(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_executeHook=function(e,i,s){eJ[e]&&k(eJ[e],function(e){e.call(DOMPurify,i,s,tw)})},_sanitizeElements=function(e){if(_executeHook("beforeSanitizeElements",e,null),_isClobbered(e)||ei(/[\u0080-\uFFFF]/,e.nodeName))return _forceRemove(e),!0;var s,o=i(e.nodeName);if(_executeHook("uponSanitizeElement",e,{tagName:o,allowedTags:eY}),e.hasChildNodes()&&!_isNode(e.firstElementChild)&&(!_isNode(e.content)||!_isNode(e.content.firstElementChild))&&ei(/<[/\w]/g,e.innerHTML)&&ei(/<[/\w]/g,e.textContent)||"select"===o&&ei(/<template/i,e.innerHTML)||7===e.nodeType||e7&&8===e.nodeType&&ei(/<[/\w]/g,e.data))return _forceRemove(e),!0;if(!eY[o]||e2[o]){if(!e2[o]&&_basicCustomElementTest(o)&&(e1.tagNameCheck instanceof RegExp&&ei(e1.tagNameCheck,o)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(o)))return!1;if(tl&&!td[o]){var l=eF(e)||e.parentNode,h=eM(e)||e.childNodes;if(h&&l)for(var d=h.length,f=d-1;f>=0;--f){var g=eL(h[f],!0);g.__removalCount=(e.__removalCount||0)+1,l.insertBefore(g,ex(e))}}return _forceRemove(e),!0}return e instanceof _&&!_checkValidNamespace(e)||("noscript"===o||"noembed"===o||"noframes"===o)&&ei(/<\/no(script|embed|frames)/i,e.innerHTML)?(_forceRemove(e),!0):(e8&&3===e.nodeType&&(s=et(s=e.textContent,ev," "),s=et(s,eI," "),s=et(s,eE," "),e.textContent!==s&&(j(DOMPurify.removed,{element:e.cloneNode()}),e.textContent=s)),_executeHook("afterSanitizeElements",e,null),!1)},_isValidAttribute=function(e,i,s){if(to&&("id"===i||"name"===i)&&(s in l||s in tS))return!1;if(e9&&!e4[i]&&ei(eT,i));else if(e6&&ei(eA,i));else if(!eZ[i]||e4[i]){if(!(_basicCustomElementTest(e)&&(e1.tagNameCheck instanceof RegExp&&ei(e1.tagNameCheck,e)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(e))&&(e1.attributeNameCheck instanceof RegExp&&ei(e1.attributeNameCheck,i)||e1.attributeNameCheck instanceof Function&&e1.attributeNameCheck(i))||"is"===i&&e1.allowCustomizedBuiltInElements&&(e1.tagNameCheck instanceof RegExp&&ei(e1.tagNameCheck,s)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(s))))return!1}else if(tm[i]);else if(ei(eQ,et(s,ew,"")));else if(("src"===i||"xlink:href"===i||"href"===i)&&"script"!==e&&0===er(s,"data:")&&tp[e]);else if(e5&&!ei(eR,et(s,ew,"")));else if(s)return!1;return!0},_basicCustomElementTest=function(e){return"annotation-xml"!==e&&ee(e,eC)},_sanitizeAttributes=function(e){_executeHook("beforeSanitizeAttributes",e,null);var s,o,l,h,d=e.attributes;if(d){var f={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:eZ};for(h=d.length;h--;){var g=(s=d[h]).name,_=s.namespaceURI;if(o="value"===g?s.value:en(s.value),l=i(g),f.attrName=l,f.attrValue=o,f.keepAttr=!0,f.forceKeepAttr=void 0,_executeHook("uponSanitizeAttribute",e,f),o=f.attrValue,!f.forceKeepAttr&&(_removeAttribute(g,e),f.keepAttr)){if(!e3&&ei(/\/>/i,o)||e7&&ei(/((--!?|])>)|<\/(style|title)/i,o)){_removeAttribute(g,e);continue}e8&&(o=et(o,ev," "),o=et(o,eI," "),o=et(o,eE," "));var b=i(e.nodeName);if(_isValidAttribute(b,l,o)){if(ta&&("id"===l||"name"===l)&&(_removeAttribute(g,e),o="user-content-"+o),eB&&"object"===_typeof(eD)&&"function"==typeof eD.getAttributeType){if(_);else switch(eD.getAttributeType(b,l)){case"TrustedHTML":o=eB.createHTML(o);break;case"TrustedScriptURL":o=eB.createScriptURL(o)}}try{_?e.setAttributeNS(_,g,o):e.setAttribute(g,o),_isClobbered(e)?_forceRemove(e):O(DOMPurify.removed)}catch(e){}}}}_executeHook("afterSanitizeAttributes",e,null)}},_sanitizeShadowDOM=function _sanitizeShadowDOM(e){var i,s=_createIterator(e);for(_executeHook("beforeSanitizeShadowDOM",e,null);i=s.nextNode();)_executeHook("uponSanitizeShadowNode",i,null),_sanitizeElements(i)||(i.content instanceof h&&_sanitizeShadowDOM(i.content),_sanitizeAttributes(i));_executeHook("afterSanitizeShadowDOM",e,null)};return DOMPurify.sanitize=function(e){var l,d,f,_,b,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((tT=!e)&&(e="<!-->"),"string"!=typeof e&&!_isNode(e)){if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw es("dirty is not a string, aborting")}else throw es("toString is not a function")}if(!DOMPurify.isSupported){if("object"===_typeof(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof e)return s.toStaticHTML(e);if(_isNode(e))return s.toStaticHTML(e.outerHTML)}return e}if(tt||_parseConfig(w),DOMPurify.removed=[],"string"==typeof e&&(tu=!1),tu){if(e.nodeName){var k=i(e.nodeName);if(!eY[k]||e2[k])throw es("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof g)1===(d=(l=_initDocument("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===d.nodeName?l=d:"HTML"===d.nodeName?l=d:l.appendChild(d);else{if(!tn&&!e8&&!te&&-1===e.indexOf("<"))return eB&&ts?eB.createHTML(e):e;if(!(l=_initDocument(e)))return tn?null:ts?ej:""}l&&tr&&_forceRemove(l.firstChild);for(var O=_createIterator(tu?e:l);f=O.nextNode();)3===f.nodeType&&f===_||_sanitizeElements(f)||(f.content instanceof h&&_sanitizeShadowDOM(f.content),_sanitizeAttributes(f),_=f);if(_=null,tu)return e;if(tn){if(ti)for(b=eH.call(l.ownerDocument);l.firstChild;)b.appendChild(l.firstChild);else b=l;return(eZ.shadowroot||eZ.shadowrootmod)&&(b=eG.call(o,b,!0)),b}var j=te?l.outerHTML:l.innerHTML;return te&&eY["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&ei(eS,l.ownerDocument.doctype.name)&&(j="<!DOCTYPE "+l.ownerDocument.doctype.name+">\n"+j),e8&&(j=et(j,ev," "),j=et(j,eI," "),j=et(j,eE," ")),eB&&ts?eB.createHTML(j):j},DOMPurify.setConfig=function(e){_parseConfig(e),tt=!0},DOMPurify.clearConfig=function(){tw=null,tt=!1},DOMPurify.isValidAttribute=function(e,s,o){return tw||_parseConfig({}),_isValidAttribute(i(e),i(s),o)},DOMPurify.addHook=function(e,i){"function"==typeof i&&(eJ[e]=eJ[e]||[],j(eJ[e],i))},DOMPurify.removeHook=function(e){if(eJ[e])return O(eJ[e])},DOMPurify.removeHooks=function(e){eJ[e]&&(eJ[e]=[])},DOMPurify.removeAllHooks=function(){eJ={}},DOMPurify}()}()},645:function(e,i){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */i.read=function(e,i,s,o,l){var h,d,f=8*l-o-1,g=(1<<f)-1,_=g>>1,b=-7,w=s?l-1:0,k=s?-1:1,O=e[i+w];for(w+=k,h=O&(1<<-b)-1,O>>=-b,b+=f;b>0;h=256*h+e[i+w],w+=k,b-=8);for(d=h&(1<<-b)-1,h>>=-b,b+=o;b>0;d=256*d+e[i+w],w+=k,b-=8);if(0===h)h=1-_;else{if(h===g)return d?NaN:(O?-1:1)*(1/0);d+=Math.pow(2,o),h-=_}return(O?-1:1)*d*Math.pow(2,h-o)},i.write=function(e,i,s,o,l,h){var d,f,g,_=8*h-l-1,b=(1<<_)-1,w=b>>1,k=23===l?5960464477539062e-23:0,O=o?0:h-1,j=o?1:-1,$=i<0||0===i&&1/i<0?1:0;for(isNaN(i=Math.abs(i))||i===1/0?(f=isNaN(i)?1:0,d=b):(d=Math.floor(Math.log(i)/Math.LN2),i*(g=Math.pow(2,-d))<1&&(d--,g*=2),d+w>=1?i+=k/g:i+=k*Math.pow(2,1-w),i*g>=2&&(d++,g/=2),d+w>=b?(f=0,d=b):d+w>=1?(f=(i*g-1)*Math.pow(2,l),d+=w):(f=i*Math.pow(2,w-1)*Math.pow(2,l),d=0));l>=8;e[s+O]=255&f,O+=j,f/=256,l-=8);for(d=d<<l|f,_+=l;_>0;e[s+O]=255&d,O+=j,d/=256,_-=8);e[s+O-j]|=128*$}},3454:function(e,i,s){"use strict";var o,l;e.exports=(null==(o=s.g.process)?void 0:o.env)&&"object"==typeof(null==(l=s.g.process)?void 0:l.env)?s.g.process:s(7663)},6840:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return s(3551)}])},6813:function(e,i,s){"use strict";let o,l,h;s.d(i,{I:function(){return l},db:function(){return h}});var d=s(5816);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,d.KN)("firebase","10.12.2","app");var f=s(5635),g=s(2793);o=(0,d.C6)().length?(0,d.C6)()[0]:(0,d.ZF)({apiKey:"AIzaSyADGYWMS5UqTuC7mZeJsI02MJNYg-6Clio",authDomain:"aipartner-426616.firebaseapp.com",projectId:"aipartner-426616",storageBucket:"aipartner-426616.appspot.com",messagingSenderId:"639959525777",appId:"1:639959525777:web:8f4f8498f333e8953d1230"}),l=(0,f.v0)(o),h=(0,g.ad)(o)},2640:function(e,i,s){"use strict";var o=s(6609),l=s(7421);o.ZP.use(l.Db).init({resources:{en:{translation:s(7551)},ja:{translation:s(2820)},zh:{translation:s(2834)}},lng:"ja",fallbackLng:"ja",interpolation:{escapeValue:!1}}),i.Z=o.ZP},3551:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return App}});var o,l,h,d=s(5893);s(2352);var f=s(2473),g=s.n(f),_={"16/Add":()=>s.e(5351).then(s.bind(s,5351)).then(e=>e.default),"16/ArrowDown":()=>s.e(6686).then(s.bind(s,6686)).then(e=>e.default),"16/Artwork":()=>s.e(8865).then(s.bind(s,8865)).then(e=>e.default),"16/Back":()=>s.e(6491).then(s.bind(s,6491)).then(e=>e.default),"16/Book":()=>s.e(115).then(s.bind(s,115)).then(e=>e.default),"16/BookmarkOff":()=>s.e(1192).then(s.bind(s,1192)).then(e=>e.default),"16/BookmarkOn":()=>s.e(1709).then(s.bind(s,1709)).then(e=>e.default),"16/Check":()=>s.e(3553).then(s.bind(s,3553)).then(e=>e.default),"16/Comment":()=>s.e(6431).then(s.bind(s,6431)).then(e=>e.default),"16/Dot":()=>s.e(3664).then(s.bind(s,3664)).then(e=>e.default),"16/Error":()=>s.e(1383).then(s.bind(s,1383)).then(e=>e.default),"16/Filter":()=>s.e(4241).then(s.bind(s,4241)).then(e=>e.default),"16/ImageResponse":()=>s.e(7268).then(s.bind(s,7268)).then(e=>e.default),"16/Info":()=>s.e(5470).then(s.bind(s,5470)).then(e=>e.default),"16/Like":()=>s.e(6301).then(s.bind(s,6301)).then(e=>e.default),"16/Menu":()=>s.e(5953).then(s.bind(s,5953)).then(e=>e.default),"16/More":()=>s.e(255).then(s.bind(s,255)).then(e=>e.default),"16/Pencil":()=>s.e(9803).then(s.bind(s,9803)).then(e=>e.default),"16/Question":()=>s.e(3990).then(s.bind(s,3990)).then(e=>e.default),"16/Ranking":()=>s.e(5241).then(s.bind(s,5241)).then(e=>e.default),"16/Remove":()=>s.e(7161).then(s.bind(s,7161)).then(e=>e.default),"16/Search":()=>s.e(8812).then(s.bind(s,8812)).then(e=>e.default),"16/Smile":()=>s.e(6382).then(s.bind(s,6382)).then(e=>e.default),"16/Speaker":()=>s.e(845).then(s.bind(s,845)).then(e=>e.default),"16/View":()=>s.e(1449).then(s.bind(s,1449)).then(e=>e.default),"24/Add":()=>s.e(1889).then(s.bind(s,1889)).then(e=>e.default),"24/AddImage":()=>s.e(7930).then(s.bind(s,7930)).then(e=>e.default),"24/AddModel":()=>s.e(7805).then(s.bind(s,7805)).then(e=>e.default),"24/AddPeople":()=>s.e(7231).then(s.bind(s,7231)).then(e=>e.default),"24/AddRubi":()=>s.e(4397).then(s.bind(s,4397)).then(e=>e.default),"24/AddText":()=>s.e(6980).then(s.bind(s,6980)).then(e=>e.default),"24/Alart":()=>s.e(5037).then(s.bind(s,5037)).then(e=>e.default),"24/Announcement":()=>s.e(1902).then(s.bind(s,1902)).then(e=>e.default),"24/Ar":()=>s.e(1430).then(s.bind(s,1430)).then(e=>e.default),"24/Archive":()=>s.e(5979).then(s.bind(s,5979)).then(e=>e.default),"24/ArrowDown":()=>s.e(3661).then(s.bind(s,3661)).then(e=>e.default),"24/ArrowUp":()=>s.e(5861).then(s.bind(s,5861)).then(e=>e.default),"24/Binet":()=>s.e(9198).then(s.bind(s,9198)).then(e=>e.default),"24/Body":()=>s.e(5235).then(s.bind(s,5235)).then(e=>e.default),"24/BodyEdit":()=>s.e(2777).then(s.bind(s,2777)).then(e=>e.default),"24/Book":()=>s.e(536).then(s.bind(s,536)).then(e=>e.default),"24/BringBackward":()=>s.e(9332).then(s.bind(s,9125)).then(e=>e.default),"24/BringForward":()=>s.e(3734).then(s.bind(s,3734)).then(e=>e.default),"24/Calendar":()=>s.e(5588).then(s.bind(s,5588)).then(e=>e.default),"24/Camera":()=>s.e(5445).then(s.bind(s,5445)).then(e=>e.default),"24/CameraVideo":()=>s.e(6496).then(s.bind(s,6496)).then(e=>e.default),"24/ChangeCharactor":()=>s.e(2068).then(s.bind(s,2068)).then(e=>e.default),"24/ChatBot":()=>s.e(5465).then(s.bind(s,5465)).then(e=>e.default),"24/Check":()=>s.e(2059).then(s.bind(s,2059)).then(e=>e.default),"24/ChromaticAberration":()=>s.e(214).then(s.bind(s,214)).then(e=>e.default),"24/Close":()=>s.e(6684).then(s.bind(s,6684)).then(e=>e.default),"24/Codes":()=>s.e(2086).then(s.bind(s,2086)).then(e=>e.default),"24/Collapse":()=>s.e(4685).then(s.bind(s,4685)).then(e=>e.default),"24/CommentFill":()=>s.e(3591).then(s.bind(s,5370)).then(e=>e.default),"24/CommentOutline":()=>s.e(8827).then(s.bind(s,8827)).then(e=>e.default),"24/Contest":()=>s.e(3904).then(s.bind(s,3904)).then(e=>e.default),"24/Contrast":()=>s.e(5958).then(s.bind(s,5958)).then(e=>e.default),"24/Description":()=>s.e(4837).then(s.bind(s,4837)).then(e=>e.default),"24/DeviceRotation":()=>s.e(6893).then(s.bind(s,6893)).then(e=>e.default),"24/Discovery":()=>s.e(9816).then(s.bind(s,9816)).then(e=>e.default),"24/Dot":()=>s.e(8301).then(s.bind(s,8301)).then(e=>e.default),"24/DotAlt":()=>s.e(7712).then(s.bind(s,7712)).then(e=>e.default),"24/Down":()=>s.e(527).then(s.bind(s,527)).then(e=>e.default),"24/DownloadAlt":()=>s.e(3319).then(s.bind(s,3319)).then(e=>e.default),"24/Duplicate":()=>s.e(7368).then(s.bind(s,7368)).then(e=>e.default),"24/Dust":()=>s.e(5012).then(s.bind(s,5012)).then(e=>e.default),"24/Emoji":()=>s.e(9251).then(s.bind(s,9251)).then(e=>e.default),"24/Error":()=>s.e(6959).then(s.bind(s,6959)).then(e=>e.default),"24/ErrorOctagon":()=>s.e(8884).then(s.bind(s,8884)).then(e=>e.default),"24/Events":()=>s.e(7284).then(s.bind(s,7284)).then(e=>e.default),"24/Expand":()=>s.e(2889).then(s.bind(s,2889)).then(e=>e.default),"24/FaceEdit":()=>s.e(2153).then(s.bind(s,2153)).then(e=>e.default),"24/Fashion":()=>s.e(1956).then(s.bind(s,1956)).then(e=>e.default),"24/Feed":()=>s.e(7999).then(s.bind(s,7999)).then(e=>e.default),"24/File":()=>s.e(303).then(s.bind(s,303)).then(e=>e.default),"24/Filter":()=>s.e(614).then(s.bind(s,614)).then(e=>e.default),"24/Flare":()=>s.e(9227).then(s.bind(s,9227)).then(e=>e.default),"24/FormatAlignCenter":()=>s.e(6255).then(s.bind(s,6255)).then(e=>e.default),"24/FormatAlignLeft":()=>s.e(2033).then(s.bind(s,2033)).then(e=>e.default),"24/FormatAlignRight":()=>s.e(5611).then(s.bind(s,5611)).then(e=>e.default),"24/FormatColorFill":()=>s.e(739).then(s.bind(s,739)).then(e=>e.default),"24/FormatColorFillNoColor":()=>s.e(8128).then(s.bind(s,6231)).then(e=>e.default),"24/FormatFontFamily":()=>s.e(2702).then(s.bind(s,2702)).then(e=>e.default),"24/FormatFontSize":()=>s.e(3363).then(s.bind(s,3363)).then(e=>e.default),"24/FormatLetterSpacing":()=>s.e(6e3).then(s.bind(s,6e3)).then(e=>e.default),"24/FormatLineSpacing":()=>s.e(8051).then(s.bind(s,8051)).then(e=>e.default),"24/Fov":()=>s.e(309).then(s.bind(s,309)).then(e=>e.default),"24/FrameEffect":()=>s.e(5444).then(s.bind(s,5444)).then(e=>e.default),"24/FrameSize":()=>s.e(7066).then(s.bind(s,7306)).then(e=>e.default),"24/Gift":()=>s.e(8226).then(s.bind(s,8226)).then(e=>e.default),"24/Glow":()=>s.e(3700).then(s.bind(s,3700)).then(e=>e.default),"24/Groups":()=>s.e(8007).then(s.bind(s,8007)).then(e=>e.default),"24/HairEdit":()=>s.e(3830).then(s.bind(s,3830)).then(e=>e.default),"24/Hashtag":()=>s.e(6691).then(s.bind(s,6691)).then(e=>e.default),"24/Hide":()=>s.e(6494).then(s.bind(s,6494)).then(e=>e.default),"24/Home":()=>s.e(2186).then(s.bind(s,2186)).then(e=>e.default),"24/Hue":()=>s.e(5687).then(s.bind(s,5687)).then(e=>e.default),"24/Idea":()=>s.e(7549).then(s.bind(s,7549)).then(e=>e.default),"24/Image":()=>s.e(2425).then(s.bind(s,2425)).then(e=>e.default),"24/ImageAlt":()=>s.e(76).then(s.bind(s,76)).then(e=>e.default),"24/ImageHidden":()=>s.e(164).then(s.bind(s,164)).then(e=>e.default),"24/ImageReplace":()=>s.e(5475).then(s.bind(s,5475)).then(e=>e.default),"24/Images":()=>s.e(2658).then(s.bind(s,2658)).then(e=>e.default),"24/ImgContain":()=>s.e(4063).then(s.bind(s,4063)).then(e=>e.default),"24/ImgCover":()=>s.e(1295).then(s.bind(s,1295)).then(e=>e.default),"24/Index":()=>s.e(2709).then(s.bind(s,2709)).then(e=>e.default),"24/Info":()=>s.e(6714).then(s.bind(s,6714)).then(e=>e.default),"24/Invalid":()=>s.e(275).then(s.bind(s,275)).then(e=>e.default),"24/Invoice":()=>s.e(8910).then(s.bind(s,8910)).then(e=>e.default),"24/ItemRemove":()=>s.e(7479).then(s.bind(s,7479)).then(e=>e.default),"24/LatestWorks":()=>s.e(29).then(s.bind(s,29)).then(e=>e.default),"24/LikeOff":()=>s.e(5928).then(s.bind(s,5928)).then(e=>e.default),"24/LikeOn":()=>s.e(7595).then(s.bind(s,7595)).then(e=>e.default),"24/Link":()=>s.e(5550).then(s.bind(s,5550)).then(e=>e.default),"24/LockLock":()=>s.e(9061).then(s.bind(s,9061)).then(e=>e.default),"24/LockUnlock":()=>s.e(7807).then(s.bind(s,7807)).then(e=>e.default),"24/Logout":()=>s.e(2520).then(s.bind(s,2520)).then(e=>e.default),"24/Manga":()=>s.e(2561).then(s.bind(s,2561)).then(e=>e.default),"24/Menu":()=>s.e(8882).then(s.bind(s,8882)).then(e=>e.default),"24/Message":()=>s.e(9945).then(s.bind(s,9945)).then(e=>e.default),"24/Microphone":()=>s.e(8632).then(s.bind(s,8632)).then(e=>e.default),"24/MobilePhone":()=>s.e(3018).then(s.bind(s,3018)).then(e=>e.default),"24/Move1":()=>s.e(9111).then(s.bind(s,9111)).then(e=>e.default),"24/Next":()=>s.e(5627).then(s.bind(s,5627)).then(e=>e.default),"24/NoImage":()=>s.e(8074).then(s.bind(s,8074)).then(e=>e.default),"24/Notification":()=>s.e(5062).then(s.bind(s,5062)).then(e=>e.default),"24/NotificationOff":()=>s.e(227).then(s.bind(s,227)).then(e=>e.default),"24/Novels":()=>s.e(9162).then(s.bind(s,9162)).then(e=>e.default),"24/OpenInNew":()=>s.e(1546).then(s.bind(s,1546)).then(e=>e.default),"24/Options":()=>s.e(6649).then(s.bind(s,6649)).then(e=>e.default),"24/OptionsAlt":()=>s.e(2046).then(s.bind(s,2046)).then(e=>e.default),"24/Overlay":()=>s.e(3752).then(s.bind(s,3752)).then(e=>e.default),"24/Palette":()=>s.e(2056).then(s.bind(s,2056)).then(e=>e.default),"24/Pause":()=>s.e(4417).then(s.bind(s,4417)).then(e=>e.default),"24/PauseAlt":()=>s.e(3302).then(s.bind(s,3302)).then(e=>e.default),"24/Pencil":()=>s.e(7337).then(s.bind(s,7337)).then(e=>e.default),"24/PencilDraw":()=>s.e(1002).then(s.bind(s,1002)).then(e=>e.default),"24/PencilLive":()=>s.e(4960).then(s.bind(s,4960)).then(e=>e.default),"24/PencilText":()=>s.e(2307).then(s.bind(s,2307)).then(e=>e.default),"24/Person":()=>s.e(529).then(s.bind(s,529)).then(e=>e.default),"24/Play":()=>s.e(8215).then(s.bind(s,8215)).then(e=>e.default),"24/Pose":()=>s.e(7788).then(s.bind(s,7788)).then(e=>e.default),"24/Prev":()=>s.e(1747).then(s.bind(s,1747)).then(e=>e.default),"24/Projects":()=>s.e(1881).then(s.bind(s,1881)).then(e=>e.default),"24/PullDown":()=>s.e(969).then(s.bind(s,969)).then(e=>e.default),"24/PullUp":()=>s.e(3692).then(s.bind(s,3692)).then(e=>e.default),"24/Question":()=>s.e(5317).then(s.bind(s,5317)).then(e=>e.default),"24/QuestionOutline":()=>s.e(2028).then(s.bind(s,2028)).then(e=>e.default),"24/Ranking":()=>s.e(4273).then(s.bind(s,4273)).then(e=>e.default),"24/ReadHorizontalLeft":()=>s.e(3445).then(s.bind(s,3445)).then(e=>e.default),"24/ReadHorizontalRight":()=>s.e(4804).then(s.bind(s,4804)).then(e=>e.default),"24/ReadVertical":()=>s.e(8746).then(s.bind(s,8746)).then(e=>e.default),"24/Reload":()=>s.e(772).then(s.bind(s,772)).then(e=>e.default),"24/ReloadLoop":()=>s.e(367).then(s.bind(s,367)).then(e=>e.default),"24/Reorder":()=>s.e(1663).then(s.bind(s,1663)).then(e=>e.default),"24/Roll":()=>s.e(1304).then(s.bind(s,1304)).then(e=>e.default),"24/Rotate90DegreesC":()=>s.e(3506).then(s.bind(s,3506)).then(e=>e.default),"24/Rotate90DegreesCc":()=>s.e(3788).then(s.bind(s,3788)).then(e=>e.default),"24/RotateRight":()=>s.e(509).then(s.bind(s,509)).then(e=>e.default),"24/Saturation":()=>s.e(7546).then(s.bind(s,7546)).then(e=>e.default),"24/Save":()=>s.e(6249).then(s.bind(s,6249)).then(e=>e.default),"24/Search":()=>s.e(2967).then(s.bind(s,2967)).then(e=>e.default),"24/Send":()=>s.e(3455).then(s.bind(s,3455)).then(e=>e.default),"24/Services":()=>s.e(2596).then(s.bind(s,2596)).then(e=>e.default),"24/Set":()=>s.e(1199).then(s.bind(s,1199)).then(e=>e.default),"24/Settings":()=>s.e(4061).then(s.bind(s,4061)).then(e=>e.default),"24/ShareAndroid":()=>s.e(9234).then(s.bind(s,9234)).then(e=>e.default),"24/ShareIos":()=>s.e(6989).then(s.bind(s,6989)).then(e=>e.default),"24/Shopping":()=>s.e(8741).then(s.bind(s,8741)).then(e=>e.default),"24/Show":()=>s.e(6184).then(s.bind(s,6184)).then(e=>e.default),"24/ShowOutline":()=>s.e(709).then(s.bind(s,709)).then(e=>e.default),"24/Shutter":()=>s.e(3454).then(s.bind(s,6154)).then(e=>e.default),"24/Star":()=>s.e(7125).then(s.bind(s,7125)).then(e=>e.default),"24/Subtract":()=>s.e(5337).then(s.bind(s,5337)).then(e=>e.default),"24/Sun":()=>s.e(1898).then(s.bind(s,1898)).then(e=>e.default),"24/Temperature":()=>s.e(2755).then(s.bind(s,2755)).then(e=>e.default),"24/Text":()=>s.e(8072).then(s.bind(s,8072)).then(e=>e.default),"24/Trash":()=>s.e(7523).then(s.bind(s,7523)).then(e=>e.default),"24/TrashAlt":()=>s.e(5869).then(s.bind(s,5869)).then(e=>e.default),"24/Up":()=>s.e(897).then(s.bind(s,897)).then(e=>e.default),"24/Upload":()=>s.e(3322).then(s.bind(s,3322)).then(e=>e.default),"24/UploadAlt":()=>s.e(603).then(s.bind(s,603)).then(e=>e.default),"24/Usagi":()=>s.e(4783).then(s.bind(s,4783)).then(e=>e.default),"24/UsagiAlt":()=>s.e(4024).then(s.bind(s,4024)).then(e=>e.default),"24/Users":()=>s.e(9125).then(s.bind(s,1884)).then(e=>e.default),"24/Video":()=>s.e(8184).then(s.bind(s,8184)).then(e=>e.default),"24/ViewGrid2Columns":()=>s.e(8708).then(s.bind(s,8708)).then(e=>e.default),"24/ViewGrid3Columns":()=>s.e(7104).then(s.bind(s,7104)).then(e=>e.default),"24/ViewList":()=>s.e(4684).then(s.bind(s,4684)).then(e=>e.default),"24/Warning":()=>s.e(6815).then(s.bind(s,6815)).then(e=>e.default),"32/BookmarkOff":()=>s.e(7495).then(s.bind(s,7495)).then(e=>e.default),"32/BookmarkOn":()=>s.e(9212).then(s.bind(s,9212)).then(e=>e.default),"32/Camera":()=>s.e(5180).then(s.bind(s,5180)).then(e=>e.default),"32/Close":()=>s.e(6469).then(s.bind(s,6469)).then(e=>e.default),"32/Collapse":()=>s.e(673).then(s.bind(s,673)).then(e=>e.default),"32/CommentOff":()=>s.e(4686).then(s.bind(s,4686)).then(e=>e.default),"32/CommentOn":()=>s.e(1574).then(s.bind(s,1574)).then(e=>e.default),"32/Delete":()=>s.e(1541).then(s.bind(s,1541)).then(e=>e.default),"32/Dot":()=>s.e(4279).then(s.bind(s,4279)).then(e=>e.default),"32/Edit":()=>s.e(6906).then(s.bind(s,6906)).then(e=>e.default),"32/Expand":()=>s.e(6565).then(s.bind(s,6565)).then(e=>e.default),"32/Gift":()=>s.e(655).then(s.bind(s,655)).then(e=>e.default),"32/Home":()=>s.e(6996).then(s.bind(s,6996)).then(e=>e.default),"32/HorizontalWriting":()=>s.e(36).then(s.bind(s,36)).then(e=>e.default),"32/Index":()=>s.e(3352).then(s.bind(s,3352)).then(e=>e.default),"32/LikeOff":()=>s.e(6292).then(s.bind(s,6292)).then(e=>e.default),"32/LikeOn":()=>s.e(4831).then(s.bind(s,4831)).then(e=>e.default),"32/LikeOnPrivate":()=>s.e(6406).then(s.bind(s,6406)).then(e=>e.default),"32/Message":()=>s.e(6901).then(s.bind(s,6901)).then(e=>e.default),"32/Next":()=>s.e(6643).then(s.bind(s,6643)).then(e=>e.default),"32/Notification":()=>s.e(919).then(s.bind(s,919)).then(e=>e.default),"32/NotificationOff":()=>s.e(5969).then(s.bind(s,5969)).then(e=>e.default),"32/NovelViewerSettings":()=>s.e(2659).then(s.bind(s,2659)).then(e=>e.default),"32/Pan":()=>s.e(172).then(s.bind(s,172)).then(e=>e.default),"32/Prev":()=>s.e(4393).then(s.bind(s,4393)).then(e=>e.default),"32/PullDown":()=>s.e(5738).then(s.bind(s,5738)).then(e=>e.default),"32/PullUp":()=>s.e(2648).then(s.bind(s,2648)).then(e=>e.default),"32/ReadHorizontalLeft":()=>s.e(1646).then(s.bind(s,1646)).then(e=>e.default),"32/ReadHorizontalRight":()=>s.e(5141).then(s.bind(s,5141)).then(e=>e.default),"32/ReadVertical":()=>s.e(9687).then(s.bind(s,9687)).then(e=>e.default),"32/RollHorizontal":()=>s.e(8172).then(s.bind(s,8172)).then(e=>e.default),"32/RollVertical":()=>s.e(6795).then(s.bind(s,6795)).then(e=>e.default),"32/SansSerif":()=>s.e(967).then(s.bind(s,967)).then(e=>e.default),"32/Serif":()=>s.e(48).then(s.bind(s,48)).then(e=>e.default),"32/ShareAndroid":()=>s.e(9899).then(s.bind(s,9899)).then(e=>e.default),"32/ShareIos":()=>s.e(6769).then(s.bind(s,6769)).then(e=>e.default),"32/Shopping":()=>s.e(6865).then(s.bind(s,6865)).then(e=>e.default),"32/Upload":()=>s.e(300).then(s.bind(s,300)).then(e=>e.default),"32/User":()=>s.e(3754).then(s.bind(s,3754)).then(e=>e.default),"32/VerticalWriting":()=>s.e(8144).then(s.bind(s,8144)).then(e=>e.default),"32/ZoomIn":()=>s.e(1957).then(s.bind(s,1957)).then(e=>e.default),"Inline/Add":()=>s.e(3979).then(s.bind(s,3979)).then(e=>e.default),"Inline/BookmarkOff":()=>s.e(5579).then(s.bind(s,5579)).then(e=>e.default),"Inline/BookmarkOn":()=>s.e(1060).then(s.bind(s,1060)).then(e=>e.default),"Inline/Breadcrumbs":()=>s.e(6044).then(s.bind(s,6044)).then(e=>e.default),"Inline/Check":()=>s.e(5094).then(s.bind(s,5094)).then(e=>e.default),"Inline/Comment":()=>s.e(2698).then(s.bind(s,2698)).then(e=>e.default),"Inline/ContextMenu":()=>s.e(9231).then(s.bind(s,9231)).then(e=>e.default),"Inline/External":()=>s.e(9795).then(s.bind(s,9795)).then(e=>e.default),"Inline/Filter":()=>s.e(6677).then(s.bind(s,6677)).then(e=>e.default),"Inline/Folder":()=>s.e(1576).then(s.bind(s,1576)).then(e=>e.default),"Inline/ImageResponse":()=>s.e(553).then(s.bind(s,553)).then(e=>e.default),"Inline/Images":()=>s.e(2626).then(s.bind(s,2626)).then(e=>e.default),"Inline/Like":()=>s.e(9210).then(s.bind(s,9210)).then(e=>e.default),"Inline/LikeOff":()=>s.e(7758).then(s.bind(s,7758)).then(e=>e.default),"Inline/List":()=>s.e(5934).then(s.bind(s,5934)).then(e=>e.default),"Inline/Location":()=>s.e(6679).then(s.bind(s,6679)).then(e=>e.default),"Inline/Lock":()=>s.e(6300).then(s.bind(s,6300)).then(e=>e.default),"Inline/More":()=>s.e(9846).then(s.bind(s,9846)).then(e=>e.default),"Inline/Nextworks":()=>s.e(6812).then(s.bind(s,6812)).then(e=>e.default),"Inline/OpenInNew":()=>s.e(8191).then(s.bind(s,8191)).then(e=>e.default),"Inline/Pencil":()=>s.e(803).then(s.bind(s,803)).then(e=>e.default),"Inline/Remove":()=>s.e(7006).then(s.bind(s,7006)).then(e=>e.default),"Inline/Smile":()=>s.e(2767).then(s.bind(s,2767)).then(e=>e.default),"Inline/SmileOn":()=>s.e(8580).then(s.bind(s,8580)).then(e=>e.default),"Inline/Users":()=>s.e(79).then(s.bind(s,79)).then(e=>e.default),"Inline/View":()=>s.e(2156).then(s.bind(s,2156)).then(e=>e.default),"Inline/ViewOutline":()=>s.e(8714).then(s.bind(s,8714)).then(e=>e.default)},b=s(7856),w=s.n(b),k=Object.defineProperty;Object.keys(_);var O=class extends Error{constructor(e,i){let s=function(e,i){let s=`Failed to fetch <pixiv-icon name="${e}">`;return null==i?s:i instanceof Error?`${s}: ${i.toString()})`:`${s}: ${JSON.stringify(i)})`}(e,i);super(s,{cause:i}),this.name="PixivIconLoadError",Object.setPrototypeOf(this,new.target.prototype)}},j=class{_name;_resultSvg=void 0;_promise=void 0;constructor(e){this._name=e}get importIconFile(){return _[this._name]}async fetch(){return void 0!==this._resultSvg?this._resultSvg:(this._promise||(this._promise=this.importIconFile().then(e=>(this._resultSvg=e,this._resultSvg)).catch(e=>{throw new O(this._name,e)}).finally(()=>{this._promise=void 0})),this._promise)}},$=class{_name;_filePathOrUrl;_resultSvg=void 0;_promise=void 0;constructor(e,i){this._name=e,this._filePathOrUrl=i}async fetch(){return void 0!==this._resultSvg?this._resultSvg:(this._promise||(this._promise=fetch(this._filePathOrUrl).then(e=>{if(!e.ok)throw new O(this._name,"Response is not ok");return e.text()}).then(e=>(this._resultSvg=e,this._resultSvg)).catch(e=>{if(e instanceof O)throw e;throw new O(this._name,e)}).finally(()=>{this._promise=void 0})),this._promise)}},q=new Map;async function getIcon(e){let i=function(e){let i=q.get(e);if(i)return i;if(e in _){let i=new j(e);return q.set(e,i),i}return null}(e);if(null==i)throw new O(e,"Loader was not found");return i.fetch().catch(i=>{if(i instanceof O)throw i;throw new O(e,i)})}var ee="undefined"==typeof window,et="undefined"!=typeof HTMLElement;(ee||!et)&&(globalThis.HTMLElement=class{});var er=["name","scale","unsafe-non-guideline-scale"],en=class extends HTMLElement{static extend(e){g()(!ee,"Using `PixivIcon.extend()` on server has no effect"),ee||Object.entries(e).forEach(([e,i])=>{if(!e.includes("/"))throw TypeError(`${e} is not a valid icon name. "name" must be named like [size]/[Name].`);q.set(e,new $(e,i))})}static get observedAttributes(){return er}svgContent;observer;isVisible=!1;get props(){let e=Object.fromEntries(er.map(e=>[e,this.getAttribute(e)])),i=e.name;if(null===i)throw TypeError('property "name" is required.');if(!i.includes("/"))throw TypeError(`${i} is not a valid icon name. "name" must be named like [size]/[Name].`);return{...e,name:i}}get forceResizedSize(){if(null===this.props["unsafe-non-guideline-scale"])return null;let[e]=this.props.name.split("/"),i=Number(this.props["unsafe-non-guideline-scale"]);return"Inline"===e?16*i:Number(e)*i}get scaledSize(){let[e]=this.props.name.split("/"),i=Number(this.props.scale??"1");switch(e){case"Inline":if(2===i)return 32;return 16;case"24":return Number(e)*i;default:return Number(e)}}constructor(){super(),this.attachShadow({mode:"open"})}async connectedCallback(){this.render(),await this.waitUntilVisible(),this.isVisible=!0,await this.loadSvg(this.props.name)}disconnectedCallback(){this.observer?.disconnect(),this.observer=void 0,this.isVisible=!1}attributeChangedCallback(e,i,s){if(this.isVisible){if("name"===e){this.loadSvg(s);return}if(void 0!==this.svgContent){this.render();return}this.loadSvg(this.props.name)}}render(){let e=this.forceResizedSize??this.scaledSize,i=w().sanitize(`<style>
  :host {
    display: inline-flex;
    --size: ${e}px;
  }

  svg {
    width: var(--size);
    height: var(--size);
  }
</style>`,{ALLOWED_TAGS:["style"],FORCE_BODY:!0}),s=w().sanitize(void 0!==this.svgContent?this.svgContent:`<svg viewBox="0 0 ${e} ${e}"></svg>`,{USE_PROFILES:{svg:!0,svgFilters:!0}});this.shadowRoot.innerHTML=i+s}async loadSvg(e){this.svgContent=await getIcon(e),this.render()}waitUntilVisible(){return new Promise(e=>{this.observer=new IntersectionObserver(([i])=>{i.isIntersecting&&(this.observer?.disconnect(),this.observer=void 0,e())},{rootMargin:"50px"}),this.observer.observe(this)})}};l="pixiv-icon",(o="symbol"!=typeof(h="tagName")?h+"":h)in en?k(en,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):en[o]=l,ee||window.customElements.get(en.tagName)||(window.PixivIcon=en,window.customElements.define(en.tagName,en));var ei=s(7294),es=s(2640),eo=s(1163),ea=s(5635),el=s(6813);function App(e){let{Component:i,pageProps:s}=e,o=(0,eo.useRouter)();return(0,ei.useEffect)(()=>{let e=(0,ea.Aj)(el.I,e=>{e||"/login"===o.pathname||o.push("/login")});return()=>e()},[o]),(0,ei.useEffect)(()=>{let e=window.localStorage.getItem("chatVRMParams");if(e){let i=JSON.parse(e);i.selectLanguage&&es.Z.changeLanguage(i.selectLanguage.toLowerCase())}else{let e=navigator.language,i=e.match(/^zh/i)?"zh":e.split("-")[0].toLowerCase();es.Z.changeLanguage(i)}},[]),(0,d.jsx)(i,{...s})}},2352:function(){},7663:function(e){!function(){var i={229:function(e){var i,s,o,l=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(i===setTimeout)return setTimeout(e,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(s){try{return i.call(null,e,0)}catch(s){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){i=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){s=defaultClearTimeout}}();var h=[],d=!1,f=-1;function cleanUpNextTick(){d&&o&&(d=!1,o.length?h=o.concat(h):f=-1,h.length&&drainQueue())}function drainQueue(){if(!d){var e=runTimeout(cleanUpNextTick);d=!0;for(var i=h.length;i;){for(o=h,h=[];++f<i;)o&&o[f].run();f=-1,i=h.length}o=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(i){try{return s.call(null,e)}catch(i){return s.call(this,e)}}}(e)}}function Item(e,i){this.fun=e,this.array=i}function noop(){}l.nextTick=function(e){var i=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)i[s-1]=arguments[s];h.push(new Item(e,i)),1!==h.length||d||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=noop,l.addListener=noop,l.once=noop,l.off=noop,l.removeListener=noop,l.removeAllListeners=noop,l.emit=noop,l.prependListener=noop,l.prependOnceListener=noop,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}}},s={};function __nccwpck_require__(e){var o=s[e];if(void 0!==o)return o.exports;var l=s[e]={exports:{}},h=!0;try{i[e](l,l.exports,__nccwpck_require__),h=!1}finally{h&&delete s[e]}return l.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(229);e.exports=o}()},1163:function(e,i,s){e.exports=s(9974)},1739:function(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},2473:function(e){"use strict";e.exports=function(){}},7462:function(e,i,s){"use strict";function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)({}).hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e}).apply(null,arguments)}s.d(i,{Z:function(){return _extends}})},5816:function(e,i,s){"use strict";let o,l;s.d(i,{Jn:function(){return eh},qX:function(){return _getProvider},rh:function(){return _isFirebaseServerApp},Xd:function(){return _registerComponent},Mq:function(){return getApp},C6:function(){return getApps},ZF:function(){return initializeApp},KN:function(){return registerVersion}});var h,d=s(8463),f=s(3333),g=s(4444);let instanceOfAny=(e,i)=>i.some(i=>e instanceof i),_=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,O=new WeakMap,j={get(e,i,s){if(e instanceof IDBTransaction){if("done"===i)return b.get(e);if("objectStoreNames"===i)return e.objectStoreNames||w.get(e);if("store"===i)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap_idb_value_wrap(e[i])},set:(e,i,s)=>(e[i]=s,!0),has:(e,i)=>e instanceof IDBTransaction&&("done"===i||"store"===i)||i in e};function wrap_idb_value_wrap(e){var i;if(e instanceof IDBRequest)return function(e){let i=new Promise((i,s)=>{let unlisten=()=>{e.removeEventListener("success",success),e.removeEventListener("error",error)},success=()=>{i(wrap_idb_value_wrap(e.result)),unlisten()},error=()=>{s(e.error),unlisten()};e.addEventListener("success",success),e.addEventListener("error",error)});return i.then(i=>{i instanceof IDBCursor&&_.set(i,e)}).catch(()=>{}),O.set(i,e),i}(e);if(k.has(e))return k.get(e);let s="function"==typeof(i=e)?i!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(i)?function(...e){return i.apply(unwrap(this),e),wrap_idb_value_wrap(_.get(this))}:function(...e){return wrap_idb_value_wrap(i.apply(unwrap(this),e))}:function(e,...s){let o=i.call(unwrap(this),e,...s);return w.set(o,e.sort?e.sort():[e]),wrap_idb_value_wrap(o)}:(i instanceof IDBTransaction&&function(e){if(b.has(e))return;let i=new Promise((i,s)=>{let unlisten=()=>{e.removeEventListener("complete",complete),e.removeEventListener("error",error),e.removeEventListener("abort",error)},complete=()=>{i(),unlisten()},error=()=>{s(e.error||new DOMException("AbortError","AbortError")),unlisten()};e.addEventListener("complete",complete),e.addEventListener("error",error),e.addEventListener("abort",error)});b.set(e,i)}(i),instanceOfAny(i,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(i,j):i;return s!==e&&(k.set(e,s),O.set(s,e)),s}let unwrap=e=>O.get(e),$=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],ee=new Map;function getMethod(e,i){if(!(e instanceof IDBDatabase&&!(i in e)&&"string"==typeof i))return;if(ee.get(i))return ee.get(i);let s=i.replace(/FromIndex$/,""),o=i!==s,l=q.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(l||$.includes(s)))return;let method=async function(e,...i){let h=this.transaction(e,l?"readwrite":"readonly"),d=h.store;return o&&(d=d.index(i.shift())),(await Promise.all([d[s](...i),l&&h.done]))[0]};return ee.set(i,method),method}j={...h=j,get:(e,i,s)=>getMethod(e,i)||h.get(e,i,s),has:(e,i)=>!!getMethod(e,i)||h.has(e,i)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PlatformLoggerServiceImpl=class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let i=e.getComponent();return(null==i?void 0:i.type)==="VERSION"}(e))return null;{let i=e.getImmediate();return`${i.library}/${i.version}`}}).filter(e=>e).join(" ")}};let et="@firebase/app",er="0.10.5",en=new f.Yd("@firebase/app"),ei="[DEFAULT]",es={[et]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eo=new Map,ea=new Map,el=new Map;function _addComponent(e,i){try{e.container.addComponent(i)}catch(s){en.debug(`Component ${i.name} failed to register with FirebaseApp ${e.name}`,s)}}function _registerComponent(e){let i=e.name;if(el.has(i))return en.debug(`There were multiple attempts to register component ${i}.`),!1;for(let s of(el.set(i,e),eo.values()))_addComponent(s,e);for(let i of ea.values())_addComponent(i,e);return!0}function _getProvider(e,i){let s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(i)}function _isFirebaseServerApp(e){return void 0!==e.settings}let eu=new g.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FirebaseAppImpl=class FirebaseAppImpl{constructor(e,i,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new d.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eu.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.12.2";function initializeApp(e,i={}){let s=e;if("object"!=typeof i){let e=i;i={name:e}}let o=Object.assign({name:ei,automaticDataCollectionEnabled:!1},i),l=o.name;if("string"!=typeof l||!l)throw eu.create("bad-app-name",{appName:String(l)});if(s||(s=(0,g.aH)()),!s)throw eu.create("no-options");let h=eo.get(l);if(h){if((0,g.vZ)(s,h.options)&&(0,g.vZ)(o,h.config))return h;throw eu.create("duplicate-app",{appName:l})}let f=new d.H0(l);for(let e of el.values())f.addComponent(e);let _=new FirebaseAppImpl(s,o,f);return eo.set(l,_),_}function getApp(e=ei){let i=eo.get(e);if(!i&&e===ei&&(0,g.aH)())return initializeApp();if(!i)throw eu.create("no-app",{appName:e});return i}function getApps(){return Array.from(eo.values())}function registerVersion(e,i,s){var o;let l=null!==(o=es[e])&&void 0!==o?o:e;s&&(l+=`-${s}`);let h=l.match(/\s|\//),f=i.match(/\s|\//);if(h||f){let e=[`Unable to register library "${l}" with version "${i}":`];h&&e.push(`library name "${l}" contains illegal characters (whitespace or "/")`),h&&f&&e.push("and"),f&&e.push(`version name "${i}" contains illegal characters (whitespace or "/")`),en.warn(e.join(" "));return}_registerComponent(new d.wA(`${l}-version`,()=>({library:l,version:i}),"VERSION"))}let ef="firebase-heartbeat-store",ep=null;function getDbPromise(){return ep||(ep=(function(e,i,{blocked:s,upgrade:o,blocking:l,terminated:h}={}){let d=indexedDB.open(e,1),f=wrap_idb_value_wrap(d);return o&&d.addEventListener("upgradeneeded",e=>{o(wrap_idb_value_wrap(d.result),e.oldVersion,e.newVersion,wrap_idb_value_wrap(d.transaction),e)}),s&&d.addEventListener("blocked",e=>s(e.oldVersion,e.newVersion,e)),f.then(e=>{h&&e.addEventListener("close",()=>h()),l&&e.addEventListener("versionchange",e=>l(e.oldVersion,e.newVersion,e))}).catch(()=>{}),f})("firebase-heartbeat-database",0,{upgrade:(e,i)=>{if(0===i)try{e.createObjectStore(ef)}catch(e){console.warn(e)}}}).catch(e=>{throw eu.create("idb-open",{originalErrorMessage:e.message})})),ep}async function readHeartbeatsFromIndexedDB(e){try{let i=await getDbPromise(),s=i.transaction(ef),o=await s.objectStore(ef).get(computeKey(e));return await s.done,o}catch(e){if(e instanceof g.ZR)en.warn(e.message);else{let i=eu.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});en.warn(i.message)}}}async function writeHeartbeatsToIndexedDB(e,i){try{let s=await getDbPromise(),o=s.transaction(ef,"readwrite"),l=o.objectStore(ef);await l.put(i,computeKey(e)),await o.done}catch(e){if(e instanceof g.ZR)en.warn(e.message);else{let i=eu.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});en.warn(i.message)}}}function computeKey(e){return`${e.name}!${e.options.appId}`}let HeartbeatServiceImpl=class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;let i=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(i),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,i;let s=this.container.getProvider("platform-logger").getImmediate(),o=s.getPlatformInfoString(),l=getUTCDateString();return(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(i=this._heartbeatsCache)||void 0===i?void 0:i.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(e=>e.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let i=new Date(e.date).valueOf(),s=Date.now();return s-i<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let i=getUTCDateString(),{heartbeatsToSend:s,unsentEntries:o}=function(e,i=1024){let s=[],o=e.slice();for(let l of e){let e=s.find(e=>e.agent===l.agent);if(e){if(e.dates.push(l.date),countBytes(s)>i){e.dates.pop();break}}else if(s.push({agent:l.agent,dates:[l.date]}),countBytes(s)>i){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}(this._heartbeatsCache.heartbeats),l=(0,g.L)(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}};function getUTCDateString(){let e=new Date;return e.toISOString().substring(0,10)}let HeartbeatStorageImpl=class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,g.hl)()&&(0,g.eu)().then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await readHeartbeatsFromIndexedDB(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var i;let s=await this._canUseIndexedDBPromise;if(s){let s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var i;let s=await this._canUseIndexedDBPromise;if(s){let s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}}};function countBytes(e){return(0,g.L)(JSON.stringify({version:2,heartbeats:e})).length}_registerComponent(new d.wA("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new d.wA("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(et,er,""),registerVersion(et,er,"esm2017"),registerVersion("fire-js","")},8463:function(e,i,s){"use strict";s.d(i,{H0:function(){return ComponentContainer},wA:function(){return Component}});var o=s(4444);let Component=class Component{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider=class Provider{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){let e=new o.BH;if(this.instancesDeferred.set(i,e),this.isInitialized(i)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:i});s&&e.resolve(s)}catch(e){}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;let s=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),o=null!==(i=null==e?void 0:e.optional)&&void 0!==i&&i;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(e){if(o)return null;throw e}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:l})}catch(e){}for(let[e,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:s});i.resolve(e)}catch(e){}}}}clearInstance(e=l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=l){return this.instances.has(e)}getOptions(e=l){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(let[e,i]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(e);s===l&&i.resolve(o)}return o}onInit(e,i){var s;let o=this.normalizeInstanceIdentifier(i),l=null!==(s=this.onInitCallbacks.get(o))&&void 0!==s?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);let h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){let s=this.onInitCallbacks.get(i);if(s)for(let o of s)try{o(e,i)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:e===l?void 0:e,options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch(e){}return s||null}normalizeInstanceIdentifier(e=l){return this.component?this.component.multipleInstances?e:l:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ComponentContainer=class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let i=this.getProvider(e.name);if(i.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){let i=this.getProvider(e.name);i.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let i=new Provider(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,i,s){"use strict";var o,l;s.d(i,{Yd:function(){return Logger},in:function(){return o}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h=[];(l=o||(o={}))[l.DEBUG=0]="DEBUG",l[l.VERBOSE=1]="VERBOSE",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.SILENT=5]="SILENT";let d={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},f=o.INFO,g={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},defaultLogHandler=(e,i,...s)=>{if(i<e.logLevel)return;let o=new Date().toISOString(),l=g[i];if(l)console[l](`[${o}]  ${e.name}:`,...s);else throw Error(`Attempted to log a message with an invalid logType (value: ${i})`)};let Logger=class Logger{constructor(e){this.name=e,this._logLevel=f,this._logHandler=defaultLogHandler,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?d[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...e),this._logHandler(this,o.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...e),this._logHandler(this,o.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,o.INFO,...e),this._logHandler(this,o.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,o.WARN,...e),this._logHandler(this,o.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,o.ERROR,...e),this._logHandler(this,o.ERROR,...e)}}},5635:function(e,i,s){"use strict";s.d(i,{hJ:function(){return GoogleAuthProvider},v0:function(){return getAuth},Aj:function(){return onAuthStateChanged},rh:function(){return signInWithPopup},w7:function(){return signOut}});var o,l=s(5816),h=s(4444),d=s(3333);function __rest(e,i){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>i.indexOf(o)&&(s[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)0>i.indexOf(o[l])&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(s[o[l]]=e[o[l]]);return s}"function"==typeof SuppressedError&&SuppressedError;var f=s(8463);function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let g=new h.LL("auth","Firebase",_prodErrorMap()),_=new d.Yd("@firebase/auth");function _logError(e,...i){_.logLevel<=d.in.ERROR&&_.error(`Auth (${l.Jn}): ${e}`,...i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(e,...i){throw createErrorInternal(e,...i)}function _createError(e,...i){return createErrorInternal(e,...i)}function _errorWithCustomMessage(e,i,s){let o=Object.assign(Object.assign({},_prodErrorMap()),{[i]:s}),l=new h.LL("auth","Firebase",o);return l.create(i,{appName:e.name})}function _serverAppCurrentUserOperationNotSupportedError(e){return _errorWithCustomMessage(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(e,...i){if("string"!=typeof e){let s=i[0],o=[...i.slice(1)];return o[0]&&(o[0].appName=e.name),e._errorFactory.create(s,...o)}return g.create(e,...i)}function _assert(e,i,...s){if(!e)throw createErrorInternal(i,...s)}function debugFail(e){let i="INTERNAL ASSERTION FAILED: "+e;throw _logError(i),Error(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _getCurrentScheme(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Delay=class Delay{constructor(e,i){this.shortDelay=e,this.longDelay=i,i>e||debugFail("Short delay should be less than long delay!"),this.isMobile=(0,h.uI)()||(0,h.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_getCurrentScheme()||"https:"===_getCurrentScheme()||(0,h.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(e,i){e.emulator||debugFail("Emulator should always be set here");let{url:s}=e.emulator;return i?`${s}${i.startsWith("/")?i.slice(1):i}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FetchProvider=class FetchProvider{static initialize(e,i,s){this.fetchImpl=e,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},w=new Delay(3e4,6e4);function _addTidIfNecessary(e,i){return e.tenantId&&!i.tenantId?Object.assign(Object.assign({},i),{tenantId:e.tenantId}):i}async function _performApiRequest(e,i,s,o,l={}){return _performFetchWithErrorHandling(e,l,async()=>{let l={},d={};o&&("GET"===i?d=o:l={body:JSON.stringify(o)});let f=(0,h.xO)(Object.assign({key:e.config.apiKey},d)).slice(1),g=await e._getAdditionalHeaders();return g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode),FetchProvider.fetch()(_getFinalTarget(e,e.config.apiHost,s,f),Object.assign({method:i,headers:g,referrerPolicy:"no-referrer"},l))})}async function _performFetchWithErrorHandling(e,i,s){e._canInitEmulator=!1;let o=Object.assign(Object.assign({},b),i);try{let i=new NetworkTimeout(e),l=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();let h=await l.json();if("needConfirmation"in h)throw _makeTaggedError(e,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{let i=l.ok?h.errorMessage:h.error.message,[s,d]=i.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===s)throw _makeTaggedError(e,"credential-already-in-use",h);if("EMAIL_EXISTS"===s)throw _makeTaggedError(e,"email-already-in-use",h);if("USER_DISABLED"===s)throw _makeTaggedError(e,"user-disabled",h);let f=o[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _errorWithCustomMessage(e,f,d);_fail(e,f)}}catch(i){if(i instanceof h.ZR)throw i;_fail(e,"network-request-failed",{message:String(i)})}}async function _performSignInRequest(e,i,s,o,l={}){let h=await _performApiRequest(e,i,s,o,l);return"mfaPendingCredential"in h&&_fail(e,"multi-factor-auth-required",{_serverResponse:h}),h}function _getFinalTarget(e,i,s,o){let l=`${i}${s}?${o}`;return e.config.emulator?_emulatorUrl(e.config,l):`${e.config.apiScheme}://${l}`}let NetworkTimeout=class NetworkTimeout{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(_createError(this.auth,"network-request-failed")),w.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function _makeTaggedError(e,i,s){let o={appName:e.name};s.email&&(o.email=s.email),s.phoneNumber&&(o.phoneNumber=s.phoneNumber);let l=_createError(e,i,o);return l.customData._tokenResponse=s,l}function isEnterprise(e){return void 0!==e&&void 0!==e.enterprise}let RecaptchaConfig=class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return function(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(i.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}};async function getRecaptchaConfig(e,i){return _performApiRequest(e,"GET","/v2/recaptchaConfig",_addTidIfNecessary(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(e,i){return _performApiRequest(e,"POST","/v1/accounts:delete",i)}async function getAccountInfo(e,i){return _performApiRequest(e,"POST","/v1/accounts:lookup",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(e){if(e)try{let i=new Date(Number(e));if(!isNaN(i.getTime()))return i.toUTCString()}catch(e){}}async function getIdTokenResult(e,i=!1){let s=(0,h.m9)(e),o=await s.getIdToken(i),l=_parseToken(o);_assert(l&&l.exp&&l.auth_time&&l.iat,s.auth,"internal-error");let d="object"==typeof l.firebase?l.firebase:void 0,f=null==d?void 0:d.sign_in_provider;return{claims:l,token:o,authTime:utcTimestampToDateString(secondsStringToMilliseconds(l.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(l.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(l.exp)),signInProvider:f||null,signInSecondFactor:(null==d?void 0:d.sign_in_second_factor)||null}}function secondsStringToMilliseconds(e){return 1e3*Number(e)}function _parseToken(e){let[i,s,o]=e.split(".");if(void 0===i||void 0===s||void 0===o)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,h.tV)(s);if(!e)return _logError("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return _logError("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function _tokenExpiresIn(e){let i=_parseToken(e);return _assert(i,"internal-error"),_assert(void 0!==i.exp,"internal-error"),_assert(void 0!==i.iat,"internal-error"),Number(i.exp)-Number(i.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(e,i,s=!1){if(s)return i;try{return await i}catch(i){throw i instanceof h.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ProactiveRefresh=class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var i;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(i=this.user.stsTokenManager.expirationTime)&&void 0!==i?i:0,s=e-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UserMetadata=class UserMetadata{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(e){var i;let s=e.auth,o=await e.getIdToken(),l=await _logoutIfInvalidated(e,getAccountInfo(s,{idToken:o}));_assert(null==l?void 0:l.users.length,s,"internal-error");let h=l.users[0];e._notifyReloadListener(h);let d=(null===(i=h.providerUserInfo)||void 0===i?void 0:i.length)?extractProviderData(h.providerUserInfo):[],f=function(e,i){let s=e.filter(e=>!i.some(i=>i.providerId===e.providerId));return[...s,...i]}(e.providerData,d),g=e.isAnonymous,_=!(e.email&&h.passwordHash)&&!(null==f?void 0:f.length),b={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:f,metadata:new UserMetadata(h.createdAt,h.lastLoginAt),isAnonymous:!!g&&_};Object.assign(e,b)}async function reload(e){let i=(0,h.m9)(e);await _reloadWithoutSaving(i),await i.auth._persistUserIfCurrent(i),i.auth._notifyListenersIfCurrent(i)}function extractProviderData(e){return e.map(e=>{var{providerId:i}=e,s=__rest(e,["providerId"]);return{providerId:i,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(e,i){let s=await _performFetchWithErrorHandling(e,{},async()=>{let s=(0,h.xO)({grant_type:"refresh_token",refresh_token:i}).slice(1),{tokenApiHost:o,apiKey:l}=e.config,d=_getFinalTarget(e,o,"/v1/token",`key=${l}`),f=await e._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(d,{method:"POST",headers:f,body:s})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function revokeToken(e,i){return _performApiRequest(e,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let StsTokenManager=class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(void 0!==e.idToken,"internal-error"),_assert(void 0!==e.refreshToken,"internal-error");let i="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){_assert(0!==e.length,"internal-error");let i=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return i||!this.accessToken||this.isExpired?(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){let{accessToken:s,refreshToken:o,expiresIn:l}=await requestStsToken(e,i);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,i,s){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*s}static fromJSON(e,i){let{refreshToken:s,accessToken:o,expirationTime:l}=i,h=new StsTokenManager;return s&&(_assert("string"==typeof s,"internal-error",{appName:e}),h.refreshToken=s),o&&(_assert("string"==typeof o,"internal-error",{appName:e}),h.accessToken=o),l&&(_assert("number"==typeof l,"internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(e,i){_assert("string"==typeof e||void 0===e,"internal-error",{appName:i})}let UserImpl=class UserImpl{constructor(e){var{uid:i,auth:s,stsTokenManager:o}=e,l=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new UserMetadata(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){let i=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let i=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),i&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,l.rh)(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));let e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){var s,o,l,h,d,f,g,_;let b=null!==(s=i.displayName)&&void 0!==s?s:void 0,w=null!==(o=i.email)&&void 0!==o?o:void 0,k=null!==(l=i.phoneNumber)&&void 0!==l?l:void 0,O=null!==(h=i.photoURL)&&void 0!==h?h:void 0,j=null!==(d=i.tenantId)&&void 0!==d?d:void 0,$=null!==(f=i._redirectEventId)&&void 0!==f?f:void 0,q=null!==(g=i.createdAt)&&void 0!==g?g:void 0,ee=null!==(_=i.lastLoginAt)&&void 0!==_?_:void 0,{uid:et,emailVerified:er,isAnonymous:en,providerData:ei,stsTokenManager:es}=i;_assert(et&&es,e,"internal-error");let eo=StsTokenManager.fromJSON(this.name,es);_assert("string"==typeof et,e,"internal-error"),assertStringOrUndefined(b,e.name),assertStringOrUndefined(w,e.name),_assert("boolean"==typeof er,e,"internal-error"),_assert("boolean"==typeof en,e,"internal-error"),assertStringOrUndefined(k,e.name),assertStringOrUndefined(O,e.name),assertStringOrUndefined(j,e.name),assertStringOrUndefined($,e.name),assertStringOrUndefined(q,e.name),assertStringOrUndefined(ee,e.name);let ea=new UserImpl({uid:et,auth:e,email:w,emailVerified:er,displayName:b,isAnonymous:en,photoURL:O,phoneNumber:k,tenantId:j,stsTokenManager:eo,createdAt:q,lastLoginAt:ee});return ei&&Array.isArray(ei)&&(ea.providerData=ei.map(e=>Object.assign({},e))),$&&(ea._redirectEventId=$),ea}static async _fromIdTokenResponse(e,i,s=!1){let o=new StsTokenManager;o.updateFromServerResponse(i);let l=new UserImpl({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _reloadWithoutSaving(l),l}static async _fromGetAccountInfoResponse(e,i,s){let o=i.users[0];_assert(void 0!==o.localId,"internal-error");let l=void 0!==o.providerUserInfo?extractProviderData(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(null==l?void 0:l.length),d=new StsTokenManager;d.updateFromIdToken(s);let f=new UserImpl({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(null==l?void 0:l.length)};return Object.assign(f,g),f}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k=new Map;function _getInstance(e){e instanceof Function||debugFail("Expected a class definition");let i=k.get(e);return i?i instanceof e||debugFail("Instance stored in cache mismatched with class"):(i=new e,k.set(e,i)),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let InMemoryPersistence=class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){let i=this.storage[e];return void 0===i?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(e,i,s){return`firebase:${e}:${i}:${s}`}InMemoryPersistence.type="NONE";let PersistenceUserManager=class PersistenceUserManager{constructor(e,i,s){this.persistence=e,this.auth=i,this.userKey=s;let{config:o,name:l}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,o.apiKey,l),this.fullPersistenceKey=_persistenceKeyName("persistence",o.apiKey,l),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?UserImpl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,s="authUser"){if(!i.length)return new PersistenceUserManager(_getInstance(InMemoryPersistence),e,s);let o=(await Promise.all(i.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),l=o[0]||_getInstance(InMemoryPersistence),h=_persistenceKeyName(s,e.config.apiKey,e.name),d=null;for(let s of i)try{let i=await s._get(h);if(i){let o=UserImpl._fromJSON(e,i);s!==l&&(d=o),l=s;break}}catch(e){}let f=o.filter(e=>e._shouldAllowMigration);return l._shouldAllowMigration&&f.length&&(l=f[0],d&&await l._set(h,d.toJSON()),await Promise.all(i.map(async e=>{if(e!==l)try{await e._remove(h)}catch(e){}}))),new PersistenceUserManager(l,e,s)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(e){let i=e.toLowerCase();if(i.includes("opera/")||i.includes("opr/")||i.includes("opios/"))return"Opera";if(_isIEMobile(i))return"IEMobile";if(i.includes("msie")||i.includes("trident/"))return"IE";{if(i.includes("edge/"))return"Edge";if(_isFirefox(i))return"Firefox";if(i.includes("silk/"))return"Silk";if(_isBlackBerry(i))return"Blackberry";if(_isWebOS(i))return"Webos";if(_isSafari(i))return"Safari";if((i.includes("chrome/")||_isChromeIOS(i))&&!i.includes("edge/"))return"Chrome";if(_isAndroid(i))return"Android";let s=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==s?void 0:s.length)===2)return s[1]}return"Other"}function _isFirefox(e=(0,h.z$)()){return/firefox\//i.test(e)}function _isSafari(e=(0,h.z$)()){let i=e.toLowerCase();return i.includes("safari/")&&!i.includes("chrome/")&&!i.includes("crios/")&&!i.includes("android")}function _isChromeIOS(e=(0,h.z$)()){return/crios\//i.test(e)}function _isIEMobile(e=(0,h.z$)()){return/iemobile/i.test(e)}function _isAndroid(e=(0,h.z$)()){return/android/i.test(e)}function _isBlackBerry(e=(0,h.z$)()){return/blackberry/i.test(e)}function _isWebOS(e=(0,h.z$)()){return/webos/i.test(e)}function _isIOS(e=(0,h.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _isMobileBrowser(e=(0,h.z$)()){return _isIOS(e)||_isAndroid(e)||_isWebOS(e)||_isBlackBerry(e)||/windows phone/i.test(e)||_isIEMobile(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(e,i=[]){let s;switch(e){case"Browser":s=_getBrowserName((0,h.z$)());break;case"Worker":s=`${_getBrowserName((0,h.z$)())}-${e}`;break;default:s=e}let o=i.length?i.join(","):"FirebaseCore-web";return`${s}/JsCore/${l.Jn}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthMiddlewareQueue=class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){let wrappedCallback=i=>new Promise((s,o)=>{try{let o=e(i);s(o)}catch(e){o(e)}});wrappedCallback.onAbort=i,this.queue.push(wrappedCallback);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let i=[];try{for(let s of this.queue)await s(e),s.onAbort&&i.push(s.onAbort)}catch(e){for(let e of(i.reverse(),i))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(e,i={}){return _performApiRequest(e,"GET","/v2/passwordPolicy",_addTidIfNecessary(e,i))}let PasswordPolicyImpl=class PasswordPolicyImpl{constructor(e){var i,s,o,l;let h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(i=h.minPasswordLength)&&void 0!==i?i:6,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),void 0!==h.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),void 0!==h.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),void 0!==h.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),void 0!==h.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(o=null===(s=e.allowedNonAlphanumericCharacters)||void 0===s?void 0:s.join(""))&&void 0!==o?o:"",this.forceUpgradeOnSignin=null!==(l=e.forceUpgradeOnSignin)&&void 0!==l&&l,this.schemaVersion=e.schemaVersion}validatePassword(e){var i,s,o,l,h,d;let f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=null===(i=f.meetsMinPasswordLength)||void 0===i||i),f.isValid&&(f.isValid=null===(s=f.meetsMaxPasswordLength)||void 0===s||s),f.isValid&&(f.isValid=null===(o=f.containsLowercaseLetter)||void 0===o||o),f.isValid&&(f.isValid=null===(l=f.containsUppercaseLetter)||void 0===l||l),f.isValid&&(f.isValid=null===(h=f.containsNumericCharacter)||void 0===h||h),f.isValid&&(f.isValid=null===(d=f.containsNonAlphanumericCharacter)||void 0===d||d),f}validatePasswordLengthOptions(e,i){let s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=e.length>=s),o&&(i.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,i){let s;this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,i,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthImpl=class AuthImpl{constructor(e,i,s,o){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=_getInstance(i)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),!this._deleted)){if(null===(s=this._popupRedirectResolver)||void 0===s?void 0:s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(i),this.lastNotifiedUid=(null===(o=this.currentUser)||void 0===o?void 0:o.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let i=await getAccountInfo(this,{idToken:e}),s=await UserImpl._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if((0,l.rh)(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(i,i))}):this.directlySetCurrentUser(null)}let s=await this.assertedPersistence.getCurrentUser(),o=s,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,l=null==o?void 0:o._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===l)&&(null==d?void 0:d.user)&&(o=d.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(e){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return(_assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId)?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,l.rh)(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));let i=e?(0,h.m9)(e):null;return i&&_assert(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,l.rh)(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,l.rh)(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await _getPasswordPolicy(this),i=new PasswordPolicyImpl(e);null===this.tenantId?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new h.LL("auth","Firebase",e())}onAuthStateChanged(e,i,s){return this.registerStateListener(this.authStateSubscription,e,i,s)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,s){return this.registerStateListener(this.idTokenSubscription,e,i,s)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{let s=this.onAuthStateChanged(()=>{s(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){let i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};null!=this.tenantId&&(s.tenantId=this.tenantId),await revokeToken(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,i){let s=await this.getOrInitRedirectPersistenceManager(i);return null===e?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let i=e&&_getInstance(e)||this._popupRedirectResolver;_assert(i,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,s;return(this._isInitialized&&await this.queue(async()=>{}),(null===(i=this._currentUser)||void 0===i?void 0:i._redirectEventId)===e)?this._currentUser:(null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let s=null!==(i=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==i?i:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,s,o){if(this._deleted)return()=>{};let l="function"==typeof i?i:i.next.bind(i),h=!1,d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),"function"==typeof i){let l=e.addObserver(i,s,o);return()=>{h=!0,l()}}{let s=e.addObserver(i);return()=>{h=!0,s()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);let s=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());s&&(i["X-Firebase-Client"]=s);let o=await this._getAppCheckToken();return o&&(i["X-Firebase-AppCheck"]=o),i}async _getAppCheckToken(){var e;let i=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==i?void 0:i.error)&&function(e,...i){_.logLevel<=d.in.WARN&&_.warn(`Auth (${l.Jn}): ${e}`,...i)}(`Error while retrieving App Check token: ${i.error}`),null==i?void 0:i.token}};function _castAuth(e){return(0,h.m9)(e)}let Subscription=class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,h.ne)(e=>this.observer=e)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _generateCallbackName(e){return`__${e}${Math.floor(1e6*Math.random())}`}let RecaptchaEnterpriseVerifier=class RecaptchaEnterpriseVerifier{constructor(e){this.type="recaptcha-enterprise",this.auth=_castAuth(e)}async verify(e="verify",i=!1){async function retrieveSiteKey(e){if(!i){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(i,s)=>{getRecaptchaConfig(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(void 0===o.recaptchaKey)s(Error("recaptcha Enterprise site key undefined"));else{let s=new RecaptchaConfig(o);return null==e.tenantId?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,i(s.siteKey)}}).catch(e=>{s(e)})})}function retrieveRecaptchaToken(i,s,o){let l=window.grecaptcha;isEnterprise(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(e=>{s(e)}).catch(()=>{s("NO_RECAPTCHA")})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,s)=>{retrieveSiteKey(this.auth).then(o=>{if(!i&&isEnterprise(window.grecaptcha))retrieveRecaptchaToken(o,e,s);else{var l;if("undefined"==typeof window){s(Error("RecaptchaVerifier is only supported in browser"));return}let i=O.recaptchaEnterpriseScript;0!==i.length&&(i+=o),(l=i,O.loadJS(l)).then(()=>{retrieveRecaptchaToken(o,e,s)}).catch(e=>{s(e)})}}).catch(e=>{s(e)})})}};async function injectRecaptchaFields(e,i,s,o=!1){let l;let h=new RecaptchaEnterpriseVerifier(e);try{l=await h.verify(s)}catch(e){l=await h.verify(s,!0)}let d=Object.assign({},i);return o?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function handleRecaptchaFlow(e,i,s,o){var l;if(null===(l=e._getRecaptchaConfig())||void 0===l||!l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return o(e,i).catch(async l=>{if("auth/missing-recaptcha-token"!==l.code)return Promise.reject(l);{console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=await injectRecaptchaFields(e,i,s,"getOobCode"===s);return o(e,l)}});{let l=await injectRecaptchaFields(e,i,s,"getOobCode"===s);return o(e,l)}}function extractProtocol(e){let i=e.indexOf(":");return i<0?"":e.substr(0,i+1)}function parsePort(e){if(!e)return null;let i=Number(e);return isNaN(i)?null:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthCredential=class AuthCredential{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,i){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}};async function linkEmailPassword(e,i){return _performApiRequest(e,"POST","/v1/accounts:signUp",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(e,i){return _performSignInRequest(e,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(e,i){return _performSignInRequest(e,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(e,i))}async function signInWithEmailLinkForLinking(e,i){return _performSignInRequest(e,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(e,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EmailAuthCredential=class EmailAuthCredential extends AuthCredential{constructor(e,i,s,o=null){super("password",s),this._email=e,this._password=i,this._tenantId=o}static _fromEmailAndPassword(e,i){return new EmailAuthCredential(e,i,"password")}static _fromEmailAndCode(e,i,s=null){return new EmailAuthCredential(e,i,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let i="string"==typeof e?JSON.parse(e):e;if((null==i?void 0:i.email)&&(null==i?void 0:i.password)){if("password"===i.signInMethod)return this._fromEmailAndPassword(i.email,i.password);if("emailLink"===i.signInMethod)return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,i,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":let s={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:i,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(e,i){return _performSignInRequest(e,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(e,i))}let OAuthCredential=class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let i=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):_fail("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let i="string"==typeof e?JSON.parse(e):e,{providerId:s,signInMethod:o}=i,l=__rest(i,["providerId","signInMethod"]);if(!s||!o)return null;let h=new OAuthCredential(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){let i=this.buildRequest();return signInWithIdp(e,i)}_linkToIdToken(e,i){let s=this.buildRequest();return s.idToken=i,signInWithIdp(e,s)}_getReauthenticationResolver(e){let i=this.buildRequest();return i.autoCreate=!1,signInWithIdp(e,i)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=(0,h.xO)(i)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode(e,i){return _performApiRequest(e,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(e,i))}async function signInWithPhoneNumber$1(e,i){return _performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,i))}async function linkWithPhoneNumber$1(e,i){let s=await _performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,i));if(s.temporaryProof)throw _makeTaggedError(e,"account-exists-with-different-credential",s);return s}let j={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting(e,i){let s=Object.assign(Object.assign({},i),{operation:"REAUTH"});return _performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,s),j)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PhoneAuthCredential=class PhoneAuthCredential extends AuthCredential{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,i){return new PhoneAuthCredential({verificationId:e,verificationCode:i})}static _fromTokenResponse(e,i){return new PhoneAuthCredential({phoneNumber:e,temporaryProof:i})}_getIdTokenResponse(e){return signInWithPhoneNumber$1(e,this._makeVerificationRequest())}_linkToIdToken(e,i){return linkWithPhoneNumber$1(e,Object.assign({idToken:i},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return verifyPhoneNumberForExisting(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:i,verificationId:s,verificationCode:o}=this.params;return e&&i?{temporaryProof:e,phoneNumber:i}:{sessionInfo:s,code:o}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:i,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return s||i||o||l?new PhoneAuthCredential({verificationId:i,verificationCode:s,phoneNumber:o,temporaryProof:l}):null}};let ActionCodeURL=class ActionCodeURL{constructor(e){var i,s,o,l,d,f;let g=(0,h.zd)((0,h.pd)(e)),_=null!==(i=g.apiKey)&&void 0!==i?i:null,b=null!==(s=g.oobCode)&&void 0!==s?s:null,w=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(o=g.mode)&&void 0!==o?o:null);_assert(_&&b&&w,"argument-error"),this.apiKey=_,this.operation=w,this.code=b,this.continueUrl=null!==(l=g.continueUrl)&&void 0!==l?l:null,this.languageCode=null!==(d=g.languageCode)&&void 0!==d?d:null,this.tenantId=null!==(f=g.tenantId)&&void 0!==f?f:null}static parseLink(e){let i=function(e){let i=(0,h.zd)((0,h.pd)(e)).link,s=i?(0,h.zd)((0,h.pd)(i)).deep_link_id:null,o=(0,h.zd)((0,h.pd)(e)).deep_link_id,l=o?(0,h.zd)((0,h.pd)(o)).link:null;return l||o||s||i||e}(e);try{return new ActionCodeURL(i)}catch(e){return null}}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EmailAuthProvider=class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,i){return EmailAuthCredential._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){let s=ActionCodeURL.parseLink(i);return _assert(s,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,s.code,s.tenantId)}};EmailAuthProvider.PROVIDER_ID="password",EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password",EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FederatedAuthProvider=class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BaseOAuthProvider=class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FacebookAuthProvider=class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch(e){return null}}};FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GoogleAuthProvider=class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:i,oauthAccessToken:s}=e;if(!i&&!s)return null;try{return GoogleAuthProvider.credential(i,s)}catch(e){return null}}};GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GithubAuthProvider=class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch(e){return null}}};GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TwitterAuthProvider=class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,i){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:i,oauthTokenSecret:s}=e;if(!i||!s)return null;try{return TwitterAuthProvider.credential(i,s)}catch(e){return null}}};TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UserCredentialImpl=class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,s,o=!1){let l=await UserImpl._fromIdTokenResponse(e,s,o),h=providerIdForResponse(s),d=new UserCredentialImpl({user:l,providerId:h,_tokenResponse:s,operationType:i});return d}static async _forOperation(e,i,s){await e._updateTokensIfNecessary(s,!0);let o=providerIdForResponse(s);return new UserCredentialImpl({user:e,providerId:o,_tokenResponse:s,operationType:i})}};function providerIdForResponse(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MultiFactorError=class MultiFactorError extends h.ZR{constructor(e,i,s,o){var l;super(i.code,i.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:null!==(l=e.tenantId)&&void 0!==l?l:void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,i,s,o){return new MultiFactorError(e,i,s,o)}};function _processCredentialSavingMfaContextIfNecessary(e,i,s,o){let l="reauthenticate"===i?s._getReauthenticationResolver(e):s._getIdTokenResponse(e);return l.catch(s=>{if("auth/multi-factor-auth-required"===s.code)throw MultiFactorError._fromErrorAndOperation(e,s,i,o);throw s})}async function _link$1(e,i,s=!1){let o=await _logoutIfInvalidated(e,i._linkToIdToken(e.auth,await e.getIdToken()),s);return UserCredentialImpl._forOperation(e,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(e,i,s=!1){let{auth:o}=e;if((0,l.rh)(o.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(o));let h="reauthenticate";try{let l=await _logoutIfInvalidated(e,_processCredentialSavingMfaContextIfNecessary(o,h,i,e),s);_assert(l.idToken,o,"internal-error");let d=_parseToken(l.idToken);_assert(d,o,"internal-error");let{sub:f}=d;return _assert(e.uid===f,o,"user-mismatch"),UserCredentialImpl._forOperation(e,h,l)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&_fail(o,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(e,i,s=!1){if((0,l.rh)(e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(e));let o="signIn",h=await _processCredentialSavingMfaContextIfNecessary(e,o,i),d=await UserCredentialImpl._fromIdTokenResponse(e,o,h);return s||await e._updateCurrentUser(d.user),d}function onAuthStateChanged(e,i,s,o){return(0,h.m9)(e).onAuthStateChanged(i,s,o)}function signOut(e){return(0,h.m9)(e).signOut()}new WeakMap;let $="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BrowserPersistenceClass=class BrowserPersistenceClass{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem($,"1"),this.storage.removeItem($),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){let i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};let BrowserLocalPersistence=class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=(0,h.z$)();return _isSafari(e)||_isIOS(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let s=this.storage.getItem(i),o=this.localCache[i];s!==o&&e(i,o,s)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((e,i,s)=>{this.notifyListeners(e,s)});return}let s=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(s);if(e.newValue!==o)null!==e.newValue?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!i)return}let triggerListeners=()=>{let e=this.storage.getItem(s);(i||this.localCache[s]!==e)&&this.notifyListeners(s,e)},o=this.storage.getItem(s);(0,h.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(triggerListeners,10):triggerListeners()}notifyListeners(e,i){this.localCache[e]=i;let s=this.listeners[e];if(s)for(let e of Array.from(s))e(i?JSON.parse(i):i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:s}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){let i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}};BrowserLocalPersistence.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BrowserSessionPersistence=class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}};BrowserSessionPersistence.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Receiver=class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(i=>i.isListeningto(e));if(i)return i;let s=new Receiver(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:i,eventType:s,data:o}=e.data,l=this.handlersMap[s];if(!(null==l?void 0:l.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let h=Array.from(l).map(async i=>i(e.origin,o)),d=await Promise.all(h.map(async e=>{try{let i=await e;return{fulfilled:!0,value:i}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),i&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(e="",i=10){let s="";for(let e=0;e<i;e++)s+=Math.floor(10*Math.random());return e+s}Receiver.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sender=class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,s=50){let o,l;let h="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!h)throw Error("connection_unavailable");return new Promise((d,f)=>{let g=_generateEventId("",20);h.port1.start();let _=setTimeout(()=>{f(Error("unsupported_event"))},s);l={messageChannel:h,onMessage(e){if(e.data.eventId===g)switch(e.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{f(Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(e.data.response);break;default:clearTimeout(_),clearTimeout(o),f(Error("invalid_response"))}}},this.handlers.add(l),h.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[h.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return void 0!==_window().WorkerGlobalScope&&"function"==typeof _window().importScripts}async function _getActiveServiceWorker(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q="firebaseLocalStorageDb",ee="firebaseLocalStorage",et="fbase_key";let DBPromise=class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}};function getObjectStore(e,i){return e.transaction([ee],i?"readwrite":"readonly").objectStore(ee)}function _openDatabase(){let e=indexedDB.open(q,1);return new Promise((i,s)=>{e.addEventListener("error",()=>{s(e.error)}),e.addEventListener("upgradeneeded",()=>{let i=e.result;try{i.createObjectStore(ee,{keyPath:et})}catch(e){s(e)}}),e.addEventListener("success",async()=>{let s=e.result;s.objectStoreNames.contains(ee)?i(s):(s.close(),await function(){let e=indexedDB.deleteDatabase(q);return new DBPromise(e).toPromise()}(),i(await _openDatabase()))})})}async function _putObject(e,i,s){let o=getObjectStore(e,!0).put({[et]:i,value:s});return new DBPromise(o).toPromise()}async function getObject(e,i){let s=getObjectStore(e,!1).get(i),o=await new DBPromise(s).toPromise();return void 0===o?null:o.value}function _deleteObject(e,i){let s=getObjectStore(e,!0).delete(i);return new DBPromise(s).toPromise()}let IndexedDBLocalPersistence=class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await _openDatabase()),this.db}async _withRetries(e){let i=0;for(;;)try{let i=await this._openDb();return await e(i)}catch(e){if(i++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_isWorker()?self:null),this.receiver._subscribe("keyChanged",async(e,i)=>{let s=await this._poll();return{keyProcessed:s.includes(i.key)}}),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);let s=await this.sender._send("ping",{},800);s&&(null===(e=s[0])||void 0===e?void 0:e.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var i;if(this.sender&&this.activeServiceWorker&&((null===(i=null==navigator?void 0:navigator.serviceWorker)||void 0===i?void 0:i.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await _openDatabase();return await _putObject(e,$,"1"),await _deleteObject(e,$),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>_putObject(s,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){let i=await this._withRetries(i=>getObject(i,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>_deleteObject(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let i=getObjectStore(e,!1).getAll();return new DBPromise(i).toPromise()});if(!e||0!==this.pendingWrites)return[];let i=[],s=new Set;if(0!==e.length)for(let{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),i.push(o));for(let e of Object.keys(this.localCache))this.localCache[e]&&!s.has(e)&&(this.notifyListeners(e,null),i.push(e));return i}notifyListeners(e,i){this.localCache[e]=i;let s=this.listeners[e];if(s)for(let e of Array.from(s))e(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}};async function _verifyPhoneNumber(e,i,s){var o,l,h;let d=await s.verify();try{let f;if(_assert("string"==typeof d,e,"argument-error"),_assert("recaptcha"===s.type,e,"argument-error"),f="string"==typeof i?{phoneNumber:i}:i,"session"in f){let i=f.session;if("phoneNumber"in f){_assert("enroll"===i.type,e,"internal-error");let s=await (l={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:f.phoneNumber,recaptchaToken:d}},_performApiRequest(e,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(e,l)));return s.phoneSessionInfo.sessionInfo}{_assert("signin"===i.type,e,"internal-error");let s=(null===(o=f.multiFactorHint)||void 0===o?void 0:o.uid)||f.multiFactorUid;_assert(s,e,"missing-multi-factor-info");let l=await (h={mfaPendingCredential:i.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:d}},_performApiRequest(e,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(e,h)));return l.phoneResponseInfo.sessionInfo}}{let{sessionInfo:i}=await sendPhoneVerificationCode(e,{phoneNumber:f.phoneNumber,recaptchaToken:d});return i}}finally{s._reset()}}IndexedDBLocalPersistence.type="LOCAL",_generateCallbackName("rcb"),new Delay(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PhoneAuthProvider=class PhoneAuthProvider{constructor(e){this.providerId=PhoneAuthProvider.PROVIDER_ID,this.auth=_castAuth(e)}verifyPhoneNumber(e,i){return _verifyPhoneNumber(this.auth,e,(0,h.m9)(i))}static credential(e,i){return PhoneAuthCredential._fromVerification(e,i)}static credentialFromResult(e){return PhoneAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return PhoneAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:i,temporaryProof:s}=e;return i&&s?PhoneAuthCredential._fromTokenResponse(i,s):null}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(e,i){return i?_getInstance(i):(_assert(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}PhoneAuthProvider.PROVIDER_ID="phone",PhoneAuthProvider.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IdpCredential=class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,i){return signInWithIdp(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){let i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}};function _signIn(e){return _signInWithCredential(e.auth,new IdpCredential(e),e.bypassAuthState)}function _reauth(e){let{auth:i,user:s}=e;return _assert(s,i,"internal-error"),_reauthenticate(s,new IdpCredential(e),e.bypassAuthState)}async function _link(e){let{auth:i,user:s}=e;return _assert(s,i,"internal-error"),_link$1(s,new IdpCredential(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AbstractPopupRedirectOperation=class AbstractPopupRedirectOperation{constructor(e,i,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:i,sessionId:s,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}let f={auth:this.auth,requestUri:i,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er=new Delay(2e3,1e4);async function signInWithPopup(e,i,s){if((0,l.rh)(e.app))return Promise.reject(_createError(e,"operation-not-supported-in-this-environment"));let o=_castAuth(e);!function(e,i,s){if(!(i instanceof s))throw s.name!==i.constructor.name&&_fail(e,"argument-error"),_errorWithCustomMessage(e,"argument-error",`Type of ${i.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,i,FederatedAuthProvider);let h=_withDefaultResolver(o,s),d=new PopupOperation(o,"signInViaPopup",i,h);return d.executeNotNull()}let PopupOperation=class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,i,s,o,l){super(e,i,o,l),this.provider=s,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||debugFail("Popup operations only handle one event");let e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){let poll=()=>{var e,i;if(null===(i=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===i?void 0:i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(poll,er.get())};poll()}};PopupOperation.currentPopupAction=null;let en=new Map;let RedirectAction=class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,i,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let e=en.get(this.auth._key());if(!e){try{let i=await _getAndClearPendingRedirectStatus(this.resolver,this.auth),s=i?await super.execute():null;e=()=>Promise.resolve(s)}catch(i){e=()=>Promise.reject(i)}en.set(this.auth._key(),e)}return this.bypassAuthState||en.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function _getAndClearPendingRedirectStatus(e,i){let s=_persistenceKeyName("pendingRedirect",i.config.apiKey,i.name),o=_getInstance(e._redirectPersistence);if(!await o._isAvailable())return!1;let l=await o._get(s)==="true";return await o._remove(s),l}function _overrideRedirectResult(e,i){en.set(e._key(),i)}async function _getRedirectResult(e,i,s=!1){if((0,l.rh)(e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(e));let o=_castAuth(e),h=_withDefaultResolver(o,i),d=new RedirectAction(o,h,s),f=await d.execute();return f&&!s&&(delete f.user._redirectEventId,await o._persistUserIfCurrent(f.user),await o._setRedirectUser(null,i)),f}let AuthEventManager=class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(i=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var s;if(e.error&&!isNullRedirectEvent(e)){let o=(null===(s=e.error.code)||void 0===s?void 0:s.split("auth/")[1])||"internal-error";i.onError(_createError(this.auth,o))}else i.onAuthEvent(e)}isEventForConsumer(e,i){let s=null===i.eventId||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}};function eventUid(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:e,error:i}){return"unknown"===e&&(null==i?void 0:i.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(e,i={}){return _performApiRequest(e,"GET","/v1/projects",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,es=/^https?/;async function _validateOrigin(e){if(e.config.emulator)return;let{authorizedDomains:i}=await _getProjectConfig(e);for(let e of i)try{if(function(e){let i=_getCurrentUrl(),{protocol:s,hostname:o}=new URL(i);if(e.startsWith("chrome-extension://")){let l=new URL(e);return""===l.hostname&&""===o?"chrome-extension:"===s&&e.replace("chrome-extension://","")===i.replace("chrome-extension://",""):"chrome-extension:"===s&&l.hostname===o}if(!es.test(s))return!1;if(ei.test(e))return o===e;let l=e.replace(/\./g,"\\."),h=RegExp("^(.+\\."+l+"|"+l+")$","i");return h.test(o)}(e))return}catch(e){}_fail(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo=new Delay(3e4,6e4);function resetUnloadedGapiModules(){let e=_window().___jsl;if(null==e?void 0:e.H){for(let i of Object.keys(e.H))if(e.H[i].r=e.H[i].r||[],e.H[i].L=e.H[i].L||[],e.H[i].r=[...e.H[i].L],e.CP)for(let i=0;i<e.CP.length;i++)e.CP[i]=null}}let ea=null,el=new Delay(5e3,15e3),eu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function _openIframe(e){let i=await (ea=ea||new Promise((i,s)=>{var o,l,h,d;function loadGapiIframe(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{i(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),s(_createError(e,"network-request-failed"))},timeout:eo.get()})}if(null===(l=null===(o=_window().gapi)||void 0===o?void 0:o.iframes)||void 0===l?void 0:l.Iframe)i(gapi.iframes.getContext());else if(null===(h=_window().gapi)||void 0===h?void 0:h.load)loadGapiIframe();else{let i=_generateCallbackName("iframefcb");return _window()[i]=()=>{gapi.load?loadGapiIframe():s(_createError(e,"network-request-failed"))},(d=`${O.gapiScript}?onload=${i}`,O.loadJS(d)).catch(e=>s(e))}}).catch(e=>{throw ea=null,e})),s=_window().gapi;return _assert(s,e,"internal-error"),i.open({where:document.body,url:function(e){let i=e.config;_assert(i.authDomain,e,"auth-domain-config-required");let s=i.emulator?_emulatorUrl(i,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,o={apiKey:i.apiKey,appName:e.name,v:l.Jn},d=eh.get(e.config.apiHost);d&&(o.eid=d);let f=e._getFrameworks();return f.length&&(o.fw=f.join(",")),`${s}?${(0,h.xO)(o).slice(1)}`}(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eu,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});let l=_createError(e,"network-request-failed"),h=_window().setTimeout(()=>{o(l)},el.get());function clearTimerAndResolve(){_window().clearTimeout(h),s(i)}i.ping(clearTimerAndResolve).then(clearTimerAndResolve,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};let AuthPopup=class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};let ep=encodeURIComponent("fac");async function _getRedirectUrl(e,i,s,o,d,f){_assert(e.config.authDomain,e,"auth-domain-config-required"),_assert(e.config.apiKey,e,"invalid-api-key");let g={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:o,v:l.Jn,eventId:d};if(i instanceof FederatedAuthProvider)for(let[s,o]of(i.setDefaultLanguage(e.languageCode),g.providerId=i.providerId||"",(0,h.xb)(i.getCustomParameters())||(g.customParameters=JSON.stringify(i.getCustomParameters())),Object.entries(f||{})))g[s]=o;if(i instanceof BaseOAuthProvider){let e=i.getScopes().filter(e=>""!==e);e.length>0&&(g.scopes=e.join(","))}for(let i of(e.tenantId&&(g.tid=e.tenantId),Object.keys(g)))void 0===g[i]&&delete g[i];let _=await e._getAppCheckToken(),b=_?`#${ep}=${encodeURIComponent(_)}`:"";return`${function({config:e}){return e.emulator?_emulatorUrl(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,h.xO)(g).slice(1)}${b}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg="webStorageSupport",em=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BrowserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,i,s,o){var l;(null===(l=this.eventManagers[e._key()])||void 0===l?void 0:l.manager)||debugFail("_initialize() not called before _openPopup()");let d=await _getRedirectUrl(e,i,s,_getCurrentUrl(),o);return function(e,i,s,o=500,l=600){let d=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-o)/2,0).toString(),g="",_=Object.assign(Object.assign({},ef),{width:o.toString(),height:l.toString(),top:d,left:f}),b=(0,h.z$)().toLowerCase();s&&(g=_isChromeIOS(b)?"_blank":s),_isFirefox(b)&&(i=i||"http://localhost",_.scrollbars="yes");let w=Object.entries(_).reduce((e,[i,s])=>`${e}${i}=${s},`,"");if(function(e=(0,h.z$)()){var i;return _isIOS(e)&&!!(null===(i=window.navigator)||void 0===i?void 0:i.standalone)}(b)&&"_self"!==g)return function(e,i){let s=document.createElement("a");s.href=e,s.target=i;let o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(o)}(i||"",g),new AuthPopup(null);let k=window.open(i||"",g,w);_assert(k,e,"popup-blocked");try{k.focus()}catch(e){}return new AuthPopup(k)}(e,d,_generateEventId())}async _openRedirect(e,i,s,o){await this._originValidation(e);let l=await _getRedirectUrl(e,i,s,_getCurrentUrl(),o);return _window().location.href=l,new Promise(()=>{})}_initialize(e){let i=e._key();if(this.eventManagers[i]){let{manager:e,promise:s}=this.eventManagers[i];return e?Promise.resolve(e):(s||debugFail("If manager is not set, promise should be"),s)}let s=this.initAndGetManager(e);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(e){let i=await _openIframe(e),s=new AuthEventManager(e);return i.register("authEvent",i=>{_assert(null==i?void 0:i.authEvent,e,"invalid-auth-event");let o=s.onEvent(i.authEvent);return{status:o?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=i,s}_isIframeWebStorageSupported(e,i){let s=this.iframes[e._key()];s.send(eg,{type:eg},s=>{var o;let l=null===(o=null==s?void 0:s[0])||void 0===o?void 0:o[eg];void 0!==l&&i(!!l),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=_validateOrigin(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}};let MultiFactorAssertionImpl=class MultiFactorAssertionImpl{constructor(e){this.factorId=e}_process(e,i,s){switch(i.type){case"enroll":return this._finalizeEnroll(e,i.credential,s);case"signin":return this._finalizeSignIn(e,i.credential);default:return debugFail("unexpected MultiFactorSessionType")}}};let PhoneMultiFactorAssertionImpl=class PhoneMultiFactorAssertionImpl extends MultiFactorAssertionImpl{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new PhoneMultiFactorAssertionImpl(e)}_finalizeEnroll(e,i,s){return _performApiRequest(e,"POST","/v2/accounts/mfaEnrollment:finalize",_addTidIfNecessary(e,{idToken:i,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,i){return _performApiRequest(e,"POST","/v2/accounts/mfaSignIn:finalize",_addTidIfNecessary(e,{mfaPendingCredential:i,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}};let TotpMultiFactorAssertionImpl=class TotpMultiFactorAssertionImpl extends MultiFactorAssertionImpl{constructor(e,i,s){super("totp"),this.otp=e,this.enrollmentId=i,this.secret=s}static _fromSecret(e,i){return new TotpMultiFactorAssertionImpl(i,void 0,e)}static _fromEnrollmentId(e,i){return new TotpMultiFactorAssertionImpl(i,e)}async _finalizeEnroll(e,i,s){return _assert(void 0!==this.secret,e,"argument-error"),_performApiRequest(e,"POST","/v2/accounts/mfaEnrollment:finalize",_addTidIfNecessary(e,{idToken:i,displayName:s,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,i){_assert(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let s={verificationCode:this.otp};return _performApiRequest(e,"POST","/v2/accounts/mfaSignIn:finalize",_addTidIfNecessary(e,{mfaPendingCredential:i,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:s}))}};let TotpSecret=class TotpSecret{constructor(e,i,s,o,l,h,d){this.sessionInfo=h,this.auth=d,this.secretKey=e,this.hashingAlgorithm=i,this.codeLength=s,this.codeIntervalSeconds=o,this.enrollmentCompletionDeadline=l}static _fromStartTotpMfaEnrollmentResponse(e,i){return new TotpSecret(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,i)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,i){var s;let o=!1;return(_isEmptyString(e)||_isEmptyString(i))&&(o=!0),o&&(_isEmptyString(e)&&(e=(null===(s=this.auth.currentUser)||void 0===s?void 0:s.email)||"unknownuser"),_isEmptyString(i)&&(i=this.auth.name)),`otpauth://totp/${i}:${e}?secret=${this.secretKey}&issuer=${i}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function _isEmptyString(e){return void 0===e||(null==e?void 0:e.length)===0}var e_="@firebase/auth",ey="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthInterop=class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let i=await this.auth.currentUser.getIdToken(e);return{accessToken:i}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let i=this.auth.onIdTokenChanged(i=>{e((null==i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};let ev=(0,h.Pz)("authIdTokenMaxAge")||300,eI=null,mintCookieFactory=e=>async i=>{let s=i&&await i.getIdTokenResult(),o=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(o&&o>ev)return;let l=null==s?void 0:s.token;eI!==l&&(eI=l,await fetch(e,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function getAuth(e=(0,l.Mq)()){let i=(0,l.qX)(e,"auth");if(i.isInitialized())return i.getImmediate();let s=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,i){let s=(0,l.qX)(e,"auth");if(s.isInitialized()){let e=s.getImmediate(),o=s.getOptions();if((0,h.vZ)(o,null!=i?i:{}))return e;_fail(e,"already-initialized")}let o=s.initialize({options:i});return o}(e,{popupRedirectResolver:em,persistence:[IndexedDBLocalPersistence,BrowserLocalPersistence,BrowserSessionPersistence]}),o=(0,h.Pz)("authTokenSyncURL");if(o&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(o,location.origin);if(location.origin===e.origin){let i=mintCookieFactory(e.toString());(0,h.m9)(s).beforeAuthStateChanged(i,()=>i(s.currentUser)),(0,h.m9)(s).onIdTokenChanged(e=>i(e),void 0,void 0)}}let d=(0,h.q4)("auth");return d&&function(e,i,s){let o=_castAuth(e);_assert(o._canInitEmulator,o,"emulator-config-failed"),_assert(/^https?:\/\//.test(i),o,"invalid-emulator-scheme");let l=!!(null==s?void 0:s.disableWarnings),h=extractProtocol(i),{host:d,port:f}=function(e){let i=extractProtocol(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(i.length));if(!s)return{host:"",port:null};let o=s[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(o);if(l){let e=l[1];return{host:e,port:parsePort(o.substr(e.length+1))}}{let[e,i]=o.split(":");return{host:e,port:parsePort(i)}}}(i),g=null===f?"":`:${f}`;o.config.emulator={url:`${h}//${d}${g}/`},o.settings.appVerificationDisabledForTesting=!0,o.emulatorConfig=Object.freeze({host:d,port:f,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})}),l||function(){function attachBanner(){let e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",attachBanner):attachBanner())}()}(s,`http://${d}`),s}O={loadJS:e=>new Promise((i,s)=>{var o,l;let h=document.createElement("script");h.setAttribute("src",e),h.onload=i,h.onerror=e=>{let i=_createError("internal-error");i.customData=e,s(i)},h.type="text/javascript",h.charset="UTF-8",(null!==(l=null===(o=document.getElementsByTagName("head"))||void 0===o?void 0:o[0])&&void 0!==l?l:document).appendChild(h)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},o="Browser",(0,l.Xd)(new f.wA("auth",(e,{options:i})=>{let s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;_assert(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});let g={apiKey:d,authDomain:f,clientPlatform:o,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(o)},_=new AuthImpl(s,l,h,g);return function(e,i){let s=(null==i?void 0:i.persistence)||[],o=(Array.isArray(s)?s:[s]).map(_getInstance);(null==i?void 0:i.errorMap)&&e._updateErrorMap(i.errorMap),e._initializeWithPersistence(o,null==i?void 0:i.popupRedirectResolver)}(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,s)=>{let o=e.getProvider("auth-internal");o.initialize()})),(0,l.Xd)(new f.wA("auth-internal",e=>{let i=_castAuth(e.getProvider("auth").getImmediate());return new AuthInterop(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,l.KN)(e_,ey,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(o)),(0,l.KN)(e_,ey,"esm2017")},2793:function(e,i,s){"use strict";s.d(i,{ET:function(){return addDoc},hJ:function(){return collection},ad:function(){return getFirestore}});var o,l,h,d,f,g,_,b,w,k,O,j,$,q,ee=s(5816),et=s(8463),er=s(3333),en=s(4444),ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},es={};(function(){function m(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,i,s){s||(s=0);var o=Array(16);if("string"==typeof i)for(var l=0;16>l;++l)o[l]=i.charCodeAt(s++)|i.charCodeAt(s++)<<8|i.charCodeAt(s++)<<16|i.charCodeAt(s++)<<24;else for(l=0;16>l;++l)o[l]=i[s++]|i[s++]<<8|i[s++]<<16|i[s++]<<24;i=e.g[0],s=e.g[1],l=e.g[2];var h=e.g[3],d=i+(h^s&(l^h))+o[0]+3614090360&4294967295;d=h+(l^(i=s+(d<<7&4294967295|d>>>25))&(s^l))+o[1]+3905402710&4294967295,d=l+(s^(h=i+(d<<12&4294967295|d>>>20))&(i^s))+o[2]+606105819&4294967295,d=s+(i^(l=h+(d<<17&4294967295|d>>>15))&(h^i))+o[3]+3250441966&4294967295,d=i+(h^(s=l+(d<<22&4294967295|d>>>10))&(l^h))+o[4]+4118548399&4294967295,d=h+(l^(i=s+(d<<7&4294967295|d>>>25))&(s^l))+o[5]+1200080426&4294967295,d=l+(s^(h=i+(d<<12&4294967295|d>>>20))&(i^s))+o[6]+2821735955&4294967295,d=s+(i^(l=h+(d<<17&4294967295|d>>>15))&(h^i))+o[7]+4249261313&4294967295,d=i+(h^(s=l+(d<<22&4294967295|d>>>10))&(l^h))+o[8]+1770035416&4294967295,d=h+(l^(i=s+(d<<7&4294967295|d>>>25))&(s^l))+o[9]+2336552879&4294967295,d=l+(s^(h=i+(d<<12&4294967295|d>>>20))&(i^s))+o[10]+4294925233&4294967295,d=s+(i^(l=h+(d<<17&4294967295|d>>>15))&(h^i))+o[11]+2304563134&4294967295,d=i+(h^(s=l+(d<<22&4294967295|d>>>10))&(l^h))+o[12]+1804603682&4294967295,d=h+(l^(i=s+(d<<7&4294967295|d>>>25))&(s^l))+o[13]+4254626195&4294967295,d=l+(s^(h=i+(d<<12&4294967295|d>>>20))&(i^s))+o[14]+2792965006&4294967295,d=s+(i^(l=h+(d<<17&4294967295|d>>>15))&(h^i))+o[15]+1236535329&4294967295,s=l+(d<<22&4294967295|d>>>10),d=i+(l^h&(s^l))+o[1]+4129170786&4294967295,i=s+(d<<5&4294967295|d>>>27),d=h+(s^l&(i^s))+o[6]+3225465664&4294967295,h=i+(d<<9&4294967295|d>>>23),d=l+(i^s&(h^i))+o[11]+643717713&4294967295,l=h+(d<<14&4294967295|d>>>18),d=s+(h^i&(l^h))+o[0]+3921069994&4294967295,s=l+(d<<20&4294967295|d>>>12),d=i+(l^h&(s^l))+o[5]+3593408605&4294967295,i=s+(d<<5&4294967295|d>>>27),d=h+(s^l&(i^s))+o[10]+38016083&4294967295,h=i+(d<<9&4294967295|d>>>23),d=l+(i^s&(h^i))+o[15]+3634488961&4294967295,l=h+(d<<14&4294967295|d>>>18),d=s+(h^i&(l^h))+o[4]+3889429448&4294967295,s=l+(d<<20&4294967295|d>>>12),d=i+(l^h&(s^l))+o[9]+568446438&4294967295,i=s+(d<<5&4294967295|d>>>27),d=h+(s^l&(i^s))+o[14]+3275163606&4294967295,h=i+(d<<9&4294967295|d>>>23),d=l+(i^s&(h^i))+o[3]+4107603335&4294967295,l=h+(d<<14&4294967295|d>>>18),d=s+(h^i&(l^h))+o[8]+1163531501&4294967295,s=l+(d<<20&4294967295|d>>>12),d=i+(l^h&(s^l))+o[13]+2850285829&4294967295,i=s+(d<<5&4294967295|d>>>27),d=h+(s^l&(i^s))+o[2]+4243563512&4294967295,h=i+(d<<9&4294967295|d>>>23),d=l+(i^s&(h^i))+o[7]+1735328473&4294967295,l=h+(d<<14&4294967295|d>>>18),d=s+(h^i&(l^h))+o[12]+2368359562&4294967295,d=i+((s=l+(d<<20&4294967295|d>>>12))^l^h)+o[5]+4294588738&4294967295,d=h+((i=s+(d<<4&4294967295|d>>>28))^s^l)+o[8]+2272392833&4294967295,d=l+((h=i+(d<<11&4294967295|d>>>21))^i^s)+o[11]+1839030562&4294967295,d=s+((l=h+(d<<16&4294967295|d>>>16))^h^i)+o[14]+4259657740&4294967295,d=i+((s=l+(d<<23&4294967295|d>>>9))^l^h)+o[1]+2763975236&4294967295,d=h+((i=s+(d<<4&4294967295|d>>>28))^s^l)+o[4]+1272893353&4294967295,d=l+((h=i+(d<<11&4294967295|d>>>21))^i^s)+o[7]+4139469664&4294967295,d=s+((l=h+(d<<16&4294967295|d>>>16))^h^i)+o[10]+3200236656&4294967295,d=i+((s=l+(d<<23&4294967295|d>>>9))^l^h)+o[13]+681279174&4294967295,d=h+((i=s+(d<<4&4294967295|d>>>28))^s^l)+o[0]+3936430074&4294967295,d=l+((h=i+(d<<11&4294967295|d>>>21))^i^s)+o[3]+3572445317&4294967295,d=s+((l=h+(d<<16&4294967295|d>>>16))^h^i)+o[6]+76029189&4294967295,d=i+((s=l+(d<<23&4294967295|d>>>9))^l^h)+o[9]+3654602809&4294967295,d=h+((i=s+(d<<4&4294967295|d>>>28))^s^l)+o[12]+3873151461&4294967295,d=l+((h=i+(d<<11&4294967295|d>>>21))^i^s)+o[15]+530742520&4294967295,d=s+((l=h+(d<<16&4294967295|d>>>16))^h^i)+o[2]+3299628645&4294967295,s=l+(d<<23&4294967295|d>>>9),d=i+(l^(s|~h))+o[0]+4096336452&4294967295,i=s+(d<<6&4294967295|d>>>26),d=h+(s^(i|~l))+o[7]+1126891415&4294967295,h=i+(d<<10&4294967295|d>>>22),d=l+(i^(h|~s))+o[14]+2878612391&4294967295,l=h+(d<<15&4294967295|d>>>17),d=s+(h^(l|~i))+o[5]+4237533241&4294967295,s=l+(d<<21&4294967295|d>>>11),d=i+(l^(s|~h))+o[12]+1700485571&4294967295,i=s+(d<<6&4294967295|d>>>26),d=h+(s^(i|~l))+o[3]+2399980690&4294967295,h=i+(d<<10&4294967295|d>>>22),d=l+(i^(h|~s))+o[10]+4293915773&4294967295,l=h+(d<<15&4294967295|d>>>17),d=s+(h^(l|~i))+o[1]+2240044497&4294967295,s=l+(d<<21&4294967295|d>>>11),d=i+(l^(s|~h))+o[8]+1873313359&4294967295,i=s+(d<<6&4294967295|d>>>26),d=h+(s^(i|~l))+o[15]+4264355552&4294967295,h=i+(d<<10&4294967295|d>>>22),d=l+(i^(h|~s))+o[6]+2734768916&4294967295,l=h+(d<<15&4294967295|d>>>17),d=s+(h^(l|~i))+o[13]+1309151649&4294967295,s=l+(d<<21&4294967295|d>>>11),d=i+(l^(s|~h))+o[4]+4149444226&4294967295,i=s+(d<<6&4294967295|d>>>26),d=h+(s^(i|~l))+o[11]+3174756917&4294967295,h=i+(d<<10&4294967295|d>>>22),d=l+(i^(h|~s))+o[2]+718787259&4294967295,l=h+(d<<15&4294967295|d>>>17),d=s+(h^(l|~i))+o[9]+3951481745&4294967295,e.g[0]=e.g[0]+i&4294967295,e.g[1]=e.g[1]+(l+(d<<21&4294967295|d>>>11))&4294967295,e.g[2]=e.g[2]+l&4294967295,e.g[3]=e.g[3]+h&4294967295}function t(e,i){this.h=i;for(var s=[],o=!0,l=e.length-1;0<=l;l--){var h=0|e[l];o&&h==i||(s[l]=h,o=!1)}this.g=s}!function(e,i){function c(){}c.prototype=i.prototype,e.D=i.prototype,e.prototype=new c,e.prototype.constructor=e,e.C=function(e,s,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return i.prototype[s].apply(e,l)}}(m,function(){this.blockSize=-1}),m.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},m.prototype.u=function(e,i){void 0===i&&(i=e.length);for(var s=i-this.blockSize,o=this.B,l=this.h,h=0;h<i;){if(0==l)for(;h<=s;)n(this,e,h),h+=this.blockSize;if("string"==typeof e){for(;h<i;)if(o[l++]=e.charCodeAt(h++),l==this.blockSize){n(this,o),l=0;break}}else for(;h<i;)if(o[l++]=e[h++],l==this.blockSize){n(this,o),l=0;break}}this.h=l,this.o+=i},m.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var i=1;i<e.length-8;++i)e[i]=0;var s=8*this.o;for(i=e.length-8;i<e.length;++i)e[i]=255&s,s/=256;for(this.u(e),e=Array(16),i=s=0;4>i;++i)for(var o=0;32>o;o+=8)e[s++]=this.g[i]>>>o&255;return e};var e,i={};function u(e){return -128<=e&&128>e?Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=new t([0|e],0>e?-1:0):new t([0|e],0>e?-1:0)}function v(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return x(v(-e));for(var i=[],o=1,l=0;e>=o;l++)i[l]=e/o|0,o*=4294967296;return new t(i,0)}var s=u(0),l=u(1),h=u(16777216);function C(e){if(0!=e.h)return!1;for(var i=0;i<e.g.length;i++)if(0!=e.g[i])return!1;return!0}function B(e){return -1==e.h}function x(e){for(var i=e.g.length,s=[],o=0;o<i;o++)s[o]=~e.g[o];return new t(s,~e.h).add(l)}function F(e,i){return e.add(x(i))}function G(e,i){for(;(65535&e[i])!=e[i];)e[i+1]+=e[i]>>>16,e[i]&=65535,i++}function H(e,i){this.g=e,this.h=i}function D(e,i){if(C(i))throw Error("division by zero");if(C(e))return new H(s,s);if(B(e))return i=D(x(e),i),new H(x(i.g),x(i.h));if(B(i))return i=D(e,x(i)),new H(x(i.g),i.h);if(30<e.g.length){if(B(e)||B(i))throw Error("slowDivide_ only works with positive integers.");for(var o=l,h=i;0>=h.l(e);)o=I(o),h=I(h);var d=J(o,1),f=J(h,1);for(h=J(h,2),o=J(o,2);!C(h);){var g=f.add(h);0>=g.l(e)&&(d=d.add(o),f=g),h=J(h,1),o=J(o,1)}return i=F(e,d.j(i)),new H(d,i)}for(d=s;0<=e.l(i);){for(h=48>=(h=Math.ceil(Math.log(o=Math.max(1,Math.floor(e.m()/i.m())))/Math.LN2))?1:Math.pow(2,h-48),g=(f=v(o)).j(i);B(g)||0<g.l(e);)o-=h,g=(f=v(o)).j(i);C(f)&&(f=l),d=d.add(f),e=F(e,g)}return new H(d,e)}function I(e){for(var i=e.g.length+1,s=[],o=0;o<i;o++)s[o]=e.i(o)<<1|e.i(o-1)>>>31;return new t(s,e.h)}function J(e,i){var s=i>>5;i%=32;for(var o=e.g.length-s,l=[],h=0;h<o;h++)l[h]=0<i?e.i(h+s)>>>i|e.i(h+s+1)<<32-i:e.i(h+s);return new t(l,e.h)}(e=t.prototype).m=function(){if(B(this))return-x(this).m();for(var e=0,i=1,s=0;s<this.g.length;s++){var o=this.i(s);e+=(0<=o?o:4294967296+o)*i,i*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(C(this))return"0";if(B(this))return"-"+x(this).toString(e);for(var i=v(Math.pow(e,6)),s=this,o="";;){var l=D(s,i).g,h=((0<(s=F(s,l.j(i))).g.length?s.g[0]:s.h)>>>0).toString(e);if(C(s=l))return h+o;for(;6>h.length;)h="0"+h;o=h+o}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return B(e=F(this,e))?-1:C(e)?0:1},e.abs=function(){return B(this)?x(this):this},e.add=function(e){for(var i=Math.max(this.g.length,e.g.length),s=[],o=0,l=0;l<=i;l++){var h=o+(65535&this.i(l))+(65535&e.i(l)),d=(h>>>16)+(this.i(l)>>>16)+(e.i(l)>>>16);o=d>>>16,h&=65535,d&=65535,s[l]=d<<16|h}return new t(s,-2147483648&s[s.length-1]?-1:0)},e.j=function(e){if(C(this)||C(e))return s;if(B(this))return B(e)?x(this).j(x(e)):x(x(this).j(e));if(B(e))return x(this.j(x(e)));if(0>this.l(h)&&0>e.l(h))return v(this.m()*e.m());for(var i=this.g.length+e.g.length,o=[],l=0;l<2*i;l++)o[l]=0;for(l=0;l<this.g.length;l++)for(var d=0;d<e.g.length;d++){var f=this.i(l)>>>16,g=65535&this.i(l),_=e.i(d)>>>16,b=65535&e.i(d);o[2*l+2*d]+=g*b,G(o,2*l+2*d),o[2*l+2*d+1]+=f*b,G(o,2*l+2*d+1),o[2*l+2*d+1]+=g*_,G(o,2*l+2*d+1),o[2*l+2*d+2]+=f*_,G(o,2*l+2*d+2)}for(l=0;l<i;l++)o[l]=o[2*l+1]<<16|o[2*l];for(l=i;l<2*i;l++)o[l]=0;return new t(o,0)},e.A=function(e){return D(this,e).h},e.and=function(e){for(var i=Math.max(this.g.length,e.g.length),s=[],o=0;o<i;o++)s[o]=this.i(o)&e.i(o);return new t(s,this.h&e.h)},e.or=function(e){for(var i=Math.max(this.g.length,e.g.length),s=[],o=0;o<i;o++)s[o]=this.i(o)|e.i(o);return new t(s,this.h|e.h)},e.xor=function(e){for(var i=Math.max(this.g.length,e.g.length),s=[],o=0;o<i;o++)s[o]=this.i(o)^e.i(o);return new t(s,this.h^e.h)},m.prototype.digest=m.prototype.v,m.prototype.reset=m.prototype.s,m.prototype.update=m.prototype.u,es.Md5=m,t.prototype.add=t.prototype.add,t.prototype.multiply=t.prototype.j,t.prototype.modulo=t.prototype.A,t.prototype.compare=t.prototype.l,t.prototype.toNumber=t.prototype.m,t.prototype.toString=t.prototype.toString,t.prototype.getBits=t.prototype.i,t.fromNumber=v,t.fromString=function y(e,i){if(0==e.length)throw Error("number format error: empty string");if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if("-"==e.charAt(0))return x(y(e.substring(1),i));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var o=v(Math.pow(i,8)),l=s,h=0;h<e.length;h+=8){var d=Math.min(8,e.length-h),f=parseInt(e.substring(h,h+d),i);8>d?(d=v(Math.pow(i,d)),l=l.j(d).add(v(f))):l=(l=l.j(o)).add(v(f))}return l},o=es.Integer=t}).apply(void 0!==ei?ei:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ea={};(function(){var e,i,s,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,i,s){return e==Array.prototype||e==Object.prototype||(e[i]=s.value),e},O=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof eo&&eo];for(var i=0;i<e.length;++i){var s=e[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var s=O;e=e.split(".");for(var l=0;l<e.length-1;l++){var h=e[l];if(!(h in s))break e;s=s[h]}(i=i(l=s[e=e[e.length-1]]))!=l&&null!=i&&o(s,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(e){return e||function(){var e,i,s,o;return e=this,e instanceof String&&(e+=""),i=0,s=!1,(o={next:function(){if(!s&&i<e.length)return{value:e[i++],done:!1};return s=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return o},o}});var j=j||{},$=this||self;function ha(e){var i=typeof e;return"array"==(i="object"!=i?i:e?Array.isArray(e)?"array":i:"null")||"object"==i&&"number"==typeof e.length}function n(e){var i=typeof e;return"object"==i&&null!=e||"function"==i}function ia(e,i,s){return e.call.apply(e.bind,arguments)}function ja(e,i,s){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,o),e.apply(i,s)}}return function(){return e.apply(i,arguments)}}function p(e,i,s){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja).apply(null,arguments)}function ka(e,i){var s=Array.prototype.slice.call(arguments,1);return function(){var i=s.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function r(e,i){function c(){}c.prototype=i.prototype,e.aa=i.prototype,e.prototype=new c,e.prototype.constructor=e,e.Qb=function(e,s,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return i.prototype[s].apply(e,l)}}function la(e){let i=e.length;if(0<i){let s=Array(i);for(let o=0;o<i;o++)s[o]=e[o];return s}return[]}function ma(e,i){for(let i=1;i<arguments.length;i++){let s=arguments[i];if(ha(s)){let i=e.length||0,o=s.length||0;e.length=i+o;for(let l=0;l<o;l++)e[i+l]=s[l]}else e.push(s)}}function t(e){return/^[\s\xa0]*$/.test(e)}function u(){var e=$.navigator;return e&&(e=e.userAgent)?e:""}function oa(e){return oa[" "](e),e}oa[" "]=function(){};var q=-1!=u().indexOf("Gecko")&&!(-1!=u().toLowerCase().indexOf("webkit")&&-1==u().indexOf("Edge"))&&!(-1!=u().indexOf("Trident")||-1!=u().indexOf("MSIE"))&&-1==u().indexOf("Edge");function qa(e,i,s){for(let o in e)i.call(s,e[o],o,e)}function sa(e){let i={};for(let s in e)i[s]=e[s];return i}let ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ua(e,i){let s,o;for(let i=1;i<arguments.length;i++){for(s in o=arguments[i])e[s]=o[s];for(let i=0;i<ee.length;i++)s=ee[i],Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}}var et=new class{constructor(e,i){this.i=e,this.j=i,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ca,e=>e.reset());let Ca=class Ca{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}};let er,en=!1,ei=new class{constructor(){this.h=this.g=null}add(e,i){let s=et.get();s.set(e,i),this.h?this.h.next=s:this.g=s,this.h=s}},Ea=()=>{let e=$.Promise.resolve(void 0);er=()=>{e.then(Da)}};var Da=()=>{let e;for(var i;e=null,ei.g&&(e=ei.g,ei.g=ei.g.next,ei.g||(ei.h=null),e.next=null),i=e;){try{i.h.call(i.g)}catch(e){!function(e){$.setTimeout(()=>{throw e},0)}(e)}et.j(i),100>et.h&&(et.h++,i.next=et.g,et.g=i)}en=!1};function z(){this.s=this.s,this.C=this.C}function A(e,i){this.type=e,this.g=this.target=i,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},A.prototype.h=function(){this.defaultPrevented=!0};var es=function(){if(!$.addEventListener||!Object.defineProperty)return!1;var e=!1,i=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let c=()=>{};$.addEventListener("test",c,i),$.removeEventListener("test",c,i)}catch(e){}return e}();function C(e,i){if(A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var s=this.type=e.type,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=i,i=e.relatedTarget){if(q){e:{try{oa(i.nodeName);var l=!0;break e}catch(e){}l=!1}l||(i=null)}}else"mouseover"==s?i=e.fromElement:"mouseout"==s&&(i=e.toElement);this.relatedTarget=i,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:el[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&C.aa.h.call(this)}}r(C,A);var el={2:"touch",3:"pen",4:"mouse"};C.prototype.h=function(){C.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var eu="closure_listenable_"+(1e6*Math.random()|0),eh=0;function Ia(e,i,s,o,l){this.listener=e,this.proxy=null,this.src=i,this.type=s,this.capture=!!o,this.ha=l,this.key=++eh,this.da=this.fa=!1}function Ja(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Ka(e){this.src=e,this.g={},this.h=0}function Ma(e,i){var s=i.type;if(s in e.g){var o,l=e.g[s],h=Array.prototype.indexOf.call(l,i,void 0);(o=0<=h)&&Array.prototype.splice.call(l,h,1),o&&(Ja(i),0==e.g[s].length&&(delete e.g[s],e.h--))}}function La(e,i,s,o){for(var l=0;l<e.length;++l){var h=e[l];if(!h.da&&h.listener==i&&!!s==h.capture&&h.ha==o)return l}return -1}Ka.prototype.add=function(e,i,s,o,l){var h=e.toString();(e=this.g[h])||(e=this.g[h]=[],this.h++);var d=La(e,i,o,l);return -1<d?(i=e[d],s||(i.fa=!1)):((i=new Ia(i,this.src,h,!!o,l)).fa=s,e.push(i)),i};var ef="closure_lm_"+(1e6*Math.random()|0),ep={};function Ta(e,i,s,o,l,h){if(!i)throw Error("Invalid event type");var d=n(l)?!!l.capture:!!l,f=Ua(e);if(f||(e[ef]=f=new Ka(e)),(s=f.add(i,s,o,d,h)).proxy)return s;if(o=function a(e){return Xa.call(a.src,a.listener,e)},s.proxy=o,o.src=e,o.listener=s,e.addEventListener)es||(l=d),void 0===l&&(l=!1),e.addEventListener(i.toString(),o,l);else if(e.attachEvent)e.attachEvent(Wa(i.toString()),o);else if(e.addListener&&e.removeListener)e.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return s}function Za(e){if("number"!=typeof e&&e&&!e.da){var i=e.src;if(i&&i[eu])Ma(i.i,e);else{var s=e.type,o=e.proxy;i.removeEventListener?i.removeEventListener(s,o,e.capture):i.detachEvent?i.detachEvent(Wa(s),o):i.addListener&&i.removeListener&&i.removeListener(o),(s=Ua(i))?(Ma(s,e),0==s.h&&(s.src=null,i[ef]=null)):Ja(e)}}}function Wa(e){return e in ep?ep[e]:ep[e]="on"+e}function Xa(e,i){if(e.da)e=!0;else{i=new C(i,this);var s=e.listener,o=e.ha||e.src;e.fa&&Za(e),e=s.call(o,i)}return e}function Ua(e){return(e=e[ef])instanceof Ka?e:null}var eg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sa(e){return"function"==typeof e?e:(e[eg]||(e[eg]=function(i){return e.handleEvent(i)}),e[eg])}function E(){z.call(this),this.i=new Ka(this),this.M=this,this.F=null}function F(e,i){var s,o=e.F;if(o)for(s=[];o;o=o.F)s.push(o);if(e=e.M,o=i.type||i,"string"==typeof i)i=new A(i,e);else if(i instanceof A)i.target=i.target||e;else{var l=i;ua(i=new A(o,e),l)}if(l=!0,s)for(var h=s.length-1;0<=h;h--){var d=i.g=s[h];l=ab(d,o,!0,i)&&l}if(l=ab(d=i.g=e,o,!0,i)&&l,l=ab(d,o,!1,i)&&l,s)for(h=0;h<s.length;h++)l=ab(d=i.g=s[h],o,!1,i)&&l}function ab(e,i,s,o){if(!(i=e.i.g[String(i)]))return!0;i=i.concat();for(var l=!0,h=0;h<i.length;++h){var d=i[h];if(d&&!d.da&&d.capture==s){var f=d.listener,g=d.ha||d.src;d.fa&&Ma(e.i,d),l=!1!==f.call(g,o)&&l}}return l&&!o.defaultPrevented}function bb(e,i,s){if("function"==typeof e)s&&(e=p(e,s));else if(e&&"function"==typeof e.handleEvent)e=p(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:$.setTimeout(e,i||0)}r(E,z),E.prototype[eu]=!0,E.prototype.removeEventListener=function(e,i,s,o){!function Ya(e,i,s,o,l){if(Array.isArray(i))for(var h=0;h<i.length;h++)Ya(e,i[h],s,o,l);else(o=n(o)?!!o.capture:!!o,s=Sa(s),e&&e[eu])?(e=e.i,(i=String(i).toString())in e.g&&-1<(s=La(h=e.g[i],s,o,l))&&(Ja(h[s]),Array.prototype.splice.call(h,s,1),0==h.length&&(delete e.g[i],e.h--))):e&&(e=Ua(e))&&(i=e.g[i.toString()],e=-1,i&&(e=La(i,s,o,l)),(s=-1<e?i[e]:null)&&Za(s))}(this,e,i,s,o)},E.prototype.N=function(){if(E.aa.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var s=i.g[e],o=0;o<s.length;o++)Ja(s[o]);delete i.g[e],i.h--}}this.F=null},E.prototype.K=function(e,i,s,o){return this.i.add(String(e),i,!1,s,o)},E.prototype.L=function(e,i,s,o){return this.i.add(String(e),i,!0,s,o)};let eb=class eb extends z{constructor(e,i){super(),this.m=e,this.l=i,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function cb(e){e.g=bb(()=>{e.g=null,e.i&&(e.i=!1,cb(e))},e.l);let i=e.h;e.h=null,e.m.apply(null,i)}(this)}N(){super.N(),this.g&&($.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function G(e){z.call(this),this.h=e,this.g={}}r(G,z);var em=[];function gb(e){qa(e.g,function(e,i){this.g.hasOwnProperty(i)&&Za(e)},e),e.g={}}G.prototype.N=function(){G.aa.N.call(this),gb(this)},G.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var e_=$.JSON.stringify,ey=$.JSON.parse,ev=class{stringify(e){return $.JSON.stringify(e,void 0)}parse(e){return $.JSON.parse(e,void 0)}};function kb(){}function lb(e){return e.h||(e.h=e.i())}function mb(){}kb.prototype.h=null;var eI={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nb(){A.call(this,"d")}function ob(){A.call(this,"c")}r(nb,A),r(ob,A);var eE={},eT=null;function qb(){return eT=eT||new E}function rb(e){A.call(this,eE.La,e)}function J(e){let i=qb();F(i,new rb(i))}function sb(e,i){A.call(this,eE.STAT_EVENT,e),this.stat=i}function K(e){let i=qb();F(i,new sb(i,e))}function tb(e,i){A.call(this,eE.Ma,e),this.size=i}function ub(e,i){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return $.setTimeout(function(){e()},i)}function vb(){this.g=!0}function L(e,i,s,o){e.info(function(){return"XMLHTTP TEXT ("+i+"): "+function(e,i){if(!e.g)return i;if(!i)return null;try{var s=JSON.parse(i);if(s){for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var o=s[e];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var h=l[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var d=1;d<l.length;d++)l[d]=""}}}}return e_(s)}catch(e){return i}}(e,s)+(o?" "+o:"")})}eE.La="serverreachability",r(rb,A),eE.STAT_EVENT="statevent",r(sb,A),eE.Ma="timingevent",r(tb,A),vb.prototype.xa=function(){this.g=!1},vb.prototype.info=function(){};var eA={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eP={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Db(){}function M(e,i,s,o){this.j=e,this.i=i,this.l=s,this.R=o||1,this.U=new G(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eb}function Eb(){this.i=null,this.g="",this.h=!1}r(Db,kb),Db.prototype.g=function(){return new XMLHttpRequest},Db.prototype.i=function(){return{}},i=new Db;var eR={},ew={};function Hb(e,i,s){e.L=1,e.v=Ib(N(i)),e.m=s,e.P=!0,Jb(e,null)}function Jb(e,i){e.F=Date.now(),Kb(e),e.A=N(e.v);var s=e.A,o=e.R;Array.isArray(o)||(o=[String(o)]),Lb(s.i,"t",o),e.C=0,s=e.j.J,e.h=new Eb,e.g=Mb(e.j,s?i:null,!e.m),0<e.O&&(e.M=new eb(p(e.Y,e,e.g),e.O)),i=e.U,s=e.g,o=e.ca;var l="readystatechange";Array.isArray(l)||(l&&(em[0]=l.toString()),l=em);for(var h=0;h<l.length;h++){var d=function Qa(e,i,s,o,l){if(o&&o.once)return function Ra(e,i,s,o,l){if(Array.isArray(i)){for(var h=0;h<i.length;h++)Ra(e,i[h],s,o,l);return null}return s=Sa(s),e&&e[eu]?e.L(i,s,n(o)?!!o.capture:!!o,l):Ta(e,i,s,!0,o,l)}(e,i,s,o,l);if(Array.isArray(i)){for(var h=0;h<i.length;h++)Qa(e,i[h],s,o,l);return null}return s=Sa(s),e&&e[eu]?e.K(i,s,n(o)?!!o.capture:!!o,l):Ta(e,i,s,!1,o,l)}(s,l[h],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}i=e.H?sa(e.H):{},e.m?(e.u||(e.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,i)):(e.u="GET",e.g.ea(e.A,e.u,null,i)),J(),function(e,i,s,o,l,h){e.info(function(){if(e.g){if(h)for(var d="",f=h.split("&"),g=0;g<f.length;g++){var _=f[g].split("=");if(1<_.length){var b=_[0];_=_[1];var w=b.split("_");d=2<=w.length&&"type"==w[1]?d+(b+"=")+_+"&":d+(b+"=redacted&")}}else d=null}else d=h;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+i+"\n"+s+"\n"+d})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Pb(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function Kb(e){e.S=Date.now()+e.I,Wb(e,e.I)}function Wb(e,i){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ub(p(e.ba,e),i)}function Ob(e){e.B&&($.clearTimeout(e.B),e.B=null)}function Qb(e){0==e.j.G||e.J||Ub(e.j,e)}function Q(e){Ob(e);var i=e.M;i&&"function"==typeof i.ma&&i.ma(),e.M=null,gb(e.U),e.g&&(i=e.g,e.g=null,i.abort(),i.ma())}function Rb(e,i){try{var s=e.j;if(0!=s.G&&(s.g==e||Xb(s.h,e))){if(!e.K&&Xb(s.h,e)&&3==s.G){try{var o=s.Da.g.parse(i)}catch(e){o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0]){e:if(!s.u){if(s.g){if(s.g.F+3e3<e.F)Yb(s),Zb(s);else break e}$b(s),K(18)}}else s.za=l[1],0<s.za-s.T&&37500>l[2]&&s.F&&0==s.v&&!s.C&&(s.C=ub(p(s.Za,s),6e3));if(1>=ac(s.h)&&s.ca){try{s.ca()}catch(e){}s.ca=void 0}}else R(s,11)}else if((e.K||s.g==e)&&Yb(s),!t(i))for(l=s.Da.g.parse(i),i=0;i<l.length;i++){let f=l[i];if(s.T=f[0],f=f[1],2==s.G){if("c"==f[0]){s.K=f[1],s.ia=f[2];let i=f[3];null!=i&&(s.la=i,s.j.info("VER="+s.la));let l=f[4];null!=l&&(s.Aa=l,s.j.info("SVER="+s.Aa));let g=f[5];null!=g&&"number"==typeof g&&0<g&&(o=1.5*g,s.L=o,s.j.info("backChannelRequestTimeoutMs_="+o)),o=s;let _=e.g;if(_){let e=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var h=o.h;h.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(bc(h,h.h),h.h=null))}if(o.D){let e=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(o.ya=e,S(o.I,o.D,e))}}if(s.G=3,s.l&&s.l.ua(),s.ba&&(s.R=Date.now()-e.F,s.j.info("Handshake RTT: "+s.R+"ms")),(o=s).qa=cc(o,o.J?o.ia:null,o.W),e.K){dc(o.h,e);var d=o.L;d&&(e.I=d),e.B&&(Ob(e),Kb(e)),o.g=e}else ec(o);0<s.i.length&&fc(s)}else"stop"!=f[0]&&"close"!=f[0]||R(s,7)}else 3==s.G&&("stop"==f[0]||"close"==f[0]?"stop"==f[0]?R(s,7):gc(s):"noop"!=f[0]&&s.l&&s.l.ta(f),s.v=0)}}J(4)}catch(e){}}M.prototype.ca=function(e){e=e.target;let i=this.M;i&&3==P(e)?i.j():this.Y(e)},M.prototype.Y=function(e){try{if(e==this.g)e:{let w=P(this.g);var i=this.g.Ba();let k=this.g.Z();if(!(3>w)&&(3!=w||this.g&&(this.h.h||this.g.oa()||Nb(this.g)))){this.J||4!=w||7==i||(8==i||0>=k?J(3):J(2)),Ob(this);var s=this.g.Z();this.X=s;t:if(Pb(this)){var o=Nb(this.g);e="";var l=o.length,h=4==P(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Q(this),Qb(this);var d="";break t}this.h.i=new $.TextDecoder}for(i=0;i<l;i++)this.h.h=!0,e+=this.h.i.decode(o[i],{stream:!(h&&i==l-1)});o.length=0,this.h.g+=e,this.C=0,d=this.h.g}else d=this.g.oa();if(this.o=200==s,function(e,i,s,o,l,h,d){e.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+i+"\n"+s+"\n"+h+" "+d})}(this.i,this.u,this.A,this.l,this.R,w,s),this.o){if(this.T&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!t(f)){var _=f;break t}}_=null}if(s=_)L(this.i,this.l,s,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rb(this,s);else{this.o=!1,this.s=3,K(12),Q(this),Qb(this);break e}}if(this.P){let e;for(s=!0;!this.J&&this.C<d.length;)if((e=function(e,i){var s=e.C,o=i.indexOf("\n",s);return -1==o?ew:isNaN(s=Number(i.substring(s,o)))?eR:(o+=1)+s>i.length?ew:(i=i.slice(o,o+s),e.C=o+s,i)}(this,d))==ew){4==w&&(this.s=4,K(14),s=!1),L(this.i,this.l,null,"[Incomplete Response]");break}else if(e==eR){this.s=4,K(15),L(this.i,this.l,d,"[Invalid Chunk]"),s=!1;break}else L(this.i,this.l,e,null),Rb(this,e);if(Pb(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=w||0!=d.length||this.h.h||(this.s=1,K(16),s=!1),this.o=this.o&&s,s){if(0<d.length&&!this.W){this.W=!0;var b=this.j;b.g==this&&b.ba&&!b.M&&(b.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Tb(b),b.M=!0,K(11))}}else L(this.i,this.l,d,"[Invalid Chunked Response]"),Q(this),Qb(this)}else L(this.i,this.l,d,null),Rb(this,d);4==w&&Q(this),this.o&&!this.J&&(4==w?Ub(this.j,this):(this.o=!1,Kb(this)))}else(function(e){let i={};e=(e.g&&2<=P(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<e.length;o++){if(t(e[o]))continue;var s=function(e){var i=1;e=e.split(":");let s=[];for(;0<i&&e.length;)s.push(e.shift()),i--;return e.length&&s.push(e.join(":")),s}(e[o]);let l=s[0];if("string"!=typeof(s=s[1]))continue;s=s.trim();let h=i[l]||[];i[l]=h,h.push(s)}!function(e,i){for(let s in e)i.call(void 0,e[s],s,e)}(i,function(e){return e.join(", ")})})(this.g),400==s&&0<d.indexOf("Unknown SID")?(this.s=3,K(12)):(this.s=0,K(13)),Q(this),Qb(this)}}}catch(e){}finally{}},M.prototype.cancel=function(){this.J=!0,Q(this)},M.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(function(e,i){e.info(function(){return"TIMEOUT: "+i})}(this.i,this.A),2!=this.L&&(J(),K(17)),Q(this),this.s=2,Qb(this)):Wb(this,this.S-e)};var eS=class{constructor(e,i){this.g=e,this.map=i}};function ic(e){this.l=e||10,e=$.PerformanceNavigationTiming?0<(e=$.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!($.chrome&&$.chrome.loadTimes&&$.chrome.loadTimes()&&$.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ac(e){return e.h?1:e.g?e.g.size:0}function Xb(e,i){return e.h?e.h==i:!!e.g&&e.g.has(i)}function bc(e,i){e.g?e.g.add(i):e.h=i}function dc(e,i){e.h&&e.h==i?e.h=null:e.g&&e.g.has(i)&&e.g.delete(i)}function kc(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let i=e.i;for(let s of e.g.values())i=i.concat(s.D);return i}return la(e.i)}function nc(e,i){if(e.forEach&&"function"==typeof e.forEach)e.forEach(i,void 0);else if(ha(e)||"string"==typeof e)Array.prototype.forEach.call(e,i,void 0);else for(var s=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(ha(e)||"string"==typeof e){var i=[];e=e.length;for(var s=0;s<e;s++)i.push(s);return i}for(let o in i=[],s=0,e)i[s++]=o;return i}}}(e),o=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(ha(e)){for(var i=[],s=e.length,o=0;o<s;o++)i.push(e[o]);return i}for(o in i=[],s=0,e)i[s++]=e[o];return i}(e),l=o.length,h=0;h<l;h++)i.call(void 0,o[h],s&&s[h],e)}ic.prototype.cancel=function(){if(this.i=kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof T){this.h=e.h,qc(this,e.j),this.o=e.o,this.g=e.g,rc(this,e.s),this.l=e.l;var i=e.i,s=new sc;s.i=i.i,i.g&&(s.g=new Map(i.g),s.h=i.h),tc(this,s),this.m=e.m}else e&&(i=String(e).match(eC))?(this.h=!1,qc(this,i[1]||"",!0),this.o=uc(i[2]||""),this.g=uc(i[3]||"",!0),rc(this,i[4]),this.l=uc(i[5]||"",!0),tc(this,i[6]||"",!0),this.m=uc(i[7]||"")):(this.h=!1,this.i=new sc(null,this.h))}function N(e){return new T(e)}function qc(e,i,s){e.j=s?uc(i,!0):i,e.j&&(e.j=e.j.replace(/:$/,""))}function rc(e,i){if(i){if(isNaN(i=Number(i))||0>i)throw Error("Bad port number "+i);e.s=i}else e.s=null}function tc(e,i,s){var o,l;i instanceof sc?(e.i=i,o=e.i,(l=e.h)&&!o.j&&(U(o),o.i=null,o.g.forEach(function(e,i){var s=i.toLowerCase();i!=s&&(Dc(this,i),Lb(this,s,e))},o)),o.j=l):(s||(i=vc(i,eD)),e.i=new sc(i,e.h))}function S(e,i,s){e.i.set(i,s)}function Ib(e){return S(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function uc(e,i){return e?i?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vc(e,i,s){return"string"==typeof e?(e=encodeURI(e).replace(i,Cc),s&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}T.prototype.toString=function(){var e=[],i=this.j;i&&e.push(vc(i,eV,!0),":");var s=this.g;return(s||"file"==i)&&(e.push("//"),(i=this.o)&&e.push(vc(i,eV,!0),"@"),e.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.s)&&e.push(":",String(s))),(s=this.l)&&(this.g&&"/"!=s.charAt(0)&&e.push("/"),e.push(vc(s,"/"==s.charAt(0)?eO:ek,!0))),(s=this.i.toString())&&e.push("?",s),(s=this.m)&&e.push("#",vc(s,eN)),e.join("")};var eV=/[#\/\?@]/g,ek=/[#\?:]/g,eO=/[#\?]/g,eD=/[#\?@]/g,eN=/#/g;function sc(e,i){this.h=this.g=null,this.i=e||null,this.j=!!i}function U(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,i){if(e){e=e.split("&");for(var s=0;s<e.length;s++){var o=e[s].indexOf("="),l=null;if(0<=o){var h=e[s].substring(0,o);l=e[s].substring(o+1)}else h=e[s];i(h,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(e.i,function(i,s){e.add(decodeURIComponent(i.replace(/\+/g," ")),s)}))}function Dc(e,i){U(e),i=V(e,i),e.g.has(i)&&(e.i=null,e.h-=e.g.get(i).length,e.g.delete(i))}function Ec(e,i){return U(e),i=V(e,i),e.g.has(i)}function Lb(e,i,s){Dc(e,i),0<s.length&&(e.i=null,e.g.set(V(e,i),la(s)),e.h+=s.length)}function V(e,i){return i=String(i),e.j&&(i=i.toLowerCase()),i}function W(e,i,s,o,l){try{l&&(l.onload=null,l.onerror=null,l.onabort=null,l.ontimeout=null),o(s)}catch(e){}}function Hc(){this.g=new ev}function Jc(e){this.l=e.Ub||null,this.j=e.eb||!1}function Kc(e,i){E.call(this),this.D=e,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nc(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Mc(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lc(e)}function Lc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Oc(e){let i="";return qa(e,function(e,s){i+=s+":"+e+"\r\n"}),i}function Pc(e,i,s){e:{for(o in s){var o=!1;break e}o=!0}o||(s=Oc(s),"string"==typeof e?null!=s&&encodeURIComponent(String(s)):S(e,i,s))}function X(e){E.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(s=sc.prototype).add=function(e,i){U(this),this.i=null,e=V(this,e);var s=this.g.get(e);return s||this.g.set(e,s=[]),s.push(i),this.h+=1,this},s.forEach=function(e,i){U(this),this.g.forEach(function(s,o){s.forEach(function(s){e.call(i,s,o,this)},this)},this)},s.na=function(){U(this);let e=Array.from(this.g.values()),i=Array.from(this.g.keys()),s=[];for(let o=0;o<i.length;o++){let l=e[o];for(let e=0;e<l.length;e++)s.push(i[o])}return s},s.V=function(e){U(this);let i=[];if("string"==typeof e)Ec(this,e)&&(i=i.concat(this.g.get(V(this,e))));else{e=Array.from(this.g.values());for(let s=0;s<e.length;s++)i=i.concat(e[s])}return i},s.set=function(e,i){return U(this),this.i=null,Ec(this,e=V(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[i]),this.h+=1,this},s.get=function(e,i){return e&&0<(e=this.V(e)).length?String(e[0]):i},s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],i=Array.from(this.g.keys());for(var s=0;s<i.length;s++){var o=i[s];let h=encodeURIComponent(String(o)),d=this.V(o);for(o=0;o<d.length;o++){var l=h;""!==d[o]&&(l+="="+encodeURIComponent(String(d[o]))),e.push(l)}}return this.i=e.join("&")},r(Jc,kb),Jc.prototype.g=function(){return new Kc(this.l,this.j)},Jc.prototype.i=(e={},function(){return e}),r(Kc,E),(s=Kc.prototype).open=function(e,i){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=i,this.readyState=1,Lc(this)},s.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(i.body=e),(this.D||$).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mc(this)),this.readyState=0},s.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lc(this)),this.g&&(this.readyState=3,Lc(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==$.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nc(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))}},s.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var i=e.value?e.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!e.done}))&&(this.response=this.responseText+=i)}e.done?Mc(this):Lc(this),3==this.readyState&&Nc(this)}},s.Ra=function(e){this.g&&(this.response=this.responseText=e,Mc(this))},s.Qa=function(e){this.g&&(this.response=e,Mc(this))},s.ga=function(){this.g&&Mc(this)},s.setRequestHeader=function(e,i){this.u.append(e,i)},s.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],i=this.h.entries();for(var s=i.next();!s.done;)e.push((s=s.value)[0]+": "+s[1]),s=i.next();return e.join("\r\n")},Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),r(X,E);var eL=/^https?$/i,ex=["POST","PUT"];function Sc(e,i){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=i,e.m=5,Uc(e),Vc(e)}function Uc(e){e.A||(e.A=!0,F(e,"complete"),F(e,"error"))}function Wc(e){if(e.h&&void 0!==j&&(!e.v[1]||4!=P(e)||2!=e.Z())){if(e.u&&4==P(e))bb(e.Ea,0,e);else if(F(e,"readystatechange"),4==P(e)){e.h=!1;try{let d=e.Z();switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i,s,o=!0;break;default:o=!1}if(!(i=o)){if(s=0===d){var l=String(e.D).match(eC)[1]||null;!l&&$.self&&$.self.location&&(l=$.self.location.protocol.slice(0,-1)),s=!eL.test(l?l.toLowerCase():"")}i=s}if(i)F(e,"complete"),F(e,"success");else{e.m=6;try{var h=2<P(e)?e.g.statusText:""}catch(e){h=""}e.l=h+" ["+e.Z()+"]",Uc(e)}}finally{Vc(e)}}}}function Vc(e,i){if(e.g){Tc(e);let s=e.g,o=e.v[0]?()=>{}:null;e.g=null,e.v=null,i||F(e,"ready");try{s.onreadystatechange=o}catch(e){}}}function Tc(e){e.I&&($.clearTimeout(e.I),e.I=null)}function P(e){return e.g?e.g.readyState:0}function Nb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xc(e,i,s){return s&&s.internalChannelParams&&s.internalChannelParams[e]||i}function Yc(e){this.Aa=0,this.i=[],this.j=new vb,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xc("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xc("baseRetryDelayMs",5e3,e),this.cb=Xc("retryDelaySeedMs",1e4,e),this.Wa=Xc("forwardChannelMaxRetries",2,e),this.wa=Xc("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ic(e&&e.concurrentRequestLimit),this.Da=new Hc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function gc(e){if(Zc(e),3==e.G){var i=e.U++,s=N(e.I);if(S(s,"SID",e.K),S(s,"RID",i),S(s,"TYPE","terminate"),$c(e,s),(i=new M(e,e.j,i)).L=2,i.v=Ib(N(s)),s=!1,$.navigator&&$.navigator.sendBeacon)try{s=$.navigator.sendBeacon(i.v.toString(),"")}catch(e){}!s&&$.Image&&((new Image).src=i.v,s=!0),s||(i.g=Mb(i.j,null),i.g.ea(i.v)),i.F=Date.now(),Kb(i)}ad(e)}function Zb(e){e.g&&(Tb(e),e.g.cancel(),e.g=null)}function Zc(e){Zb(e),e.u&&($.clearTimeout(e.u),e.u=null),Yb(e),e.h.cancel(),e.s&&("number"==typeof e.s&&$.clearTimeout(e.s),e.s=null)}function fc(e){if(!jc(e.h)&&!e.s){e.s=!0;var i=e.Ga;er||Ea(),en||(er(),en=!0),ei.add(i,e),e.B=0}}function ed(e,i){var s;s=i?i.l:e.U++;let o=N(e.I);S(o,"SID",e.K),S(o,"RID",s),S(o,"AID",e.T),$c(e,o),e.m&&e.o&&Pc(o,e.m,e.o),s=new M(e,e.j,s,e.B+1),null===e.m&&(s.H=e.o),i&&(e.i=i.D.concat(e.i)),i=dd(e,s,1e3),s.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),bc(e.h,s),Hb(s,o,i)}function $c(e,i){e.H&&qa(e.H,function(e,s){S(i,s,e)}),e.l&&nc({},function(e,s){S(i,s,e)})}function dd(e,i,s){s=Math.min(e.i.length,s);var o=e.l?p(e.l.Na,e.l,e):null;e:{var l=e.i;let i=-1;for(;;){let e=["count="+s];-1==i?0<s?(i=l[0].g,e.push("ofs="+i)):i=0:e.push("ofs="+i);let h=!0;for(let d=0;d<s;d++){let s=l[d].g,f=l[d].map;if(0>(s-=i))i=Math.max(0,l[d].g-100),h=!1;else try{!function(e,i,s){let o=s||"";try{nc(e,function(e,s){let l=e;n(e)&&(l=e_(e)),i.push(o+s+"="+encodeURIComponent(l))})}catch(e){throw i.push(o+"type="+encodeURIComponent("_badmap")),e}}(f,e,"req"+s+"_")}catch(e){o&&o(f)}}if(h){o=e.join("&");break e}}}return e=e.i.splice(0,s),i.D=e,o}function ec(e){if(!e.g&&!e.u){e.Y=1;var i=e.Fa;er||Ea(),en||(er(),en=!0),ei.add(i,e),e.v=0}}function $b(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=ub(p(e.Fa,e),cd(e,e.v)),e.v++,!0)}function Tb(e){null!=e.A&&($.clearTimeout(e.A),e.A=null)}function fd(e){e.g=new M(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var i=N(e.qa);S(i,"RID","rpc"),S(i,"SID",e.K),S(i,"AID",e.T),S(i,"CI",e.F?"0":"1"),!e.F&&e.ja&&S(i,"TO",e.ja),S(i,"TYPE","xmlhttp"),$c(e,i),e.m&&e.o&&Pc(i,e.m,e.o),e.L&&(e.g.I=e.L);var s=e.g;e=e.ia,s.L=1,s.v=Ib(N(i)),s.m=null,s.P=!0,Jb(s,e)}function Yb(e){null!=e.C&&($.clearTimeout(e.C),e.C=null)}function Ub(e,i){var s=null;if(e.g==i){Yb(e),Tb(e),e.g=null;var o=2}else{if(!Xb(e.h,i))return;s=i.D,dc(e.h,i),o=1}if(0!=e.G){if(i.o){if(1==o){s=i.m?i.m.length:0,i=Date.now()-i.F;var l,h=e.B;F(o=qb(),new tb(o,s)),fc(e)}else ec(e)}else if(3==(h=i.s)||0==h&&0<i.X||!(1==o&&(l=i,!(ac(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=l.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=ub(p(e.Ga,e,l),cd(e,e.B)),e.B++,!0)))||2==o&&$b(e)))switch(s&&0<s.length&&((i=e.h).i=i.i.concat(s)),h){case 1:R(e,5);break;case 4:R(e,10);break;case 3:R(e,6);break;default:R(e,2)}}}function cd(e,i){let s=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(s*=2),s*i}function R(e,i){if(e.j.info("Error code "+i),2==i){var s=p(e.fb,e),o=e.Xa;let i=!o;o=new T(o||"//www.google.com/images/cleardot.gif"),$.location&&"http"==$.location.protocol||qc(o,"https"),Ib(o),i?function(e,i){let s=new vb;if($.Image){let o=new Image;o.onload=ka(W,s,"TestLoadImage: loaded",!0,i,o),o.onerror=ka(W,s,"TestLoadImage: error",!1,i,o),o.onabort=ka(W,s,"TestLoadImage: abort",!1,i,o),o.ontimeout=ka(W,s,"TestLoadImage: timeout",!1,i,o),$.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=e}else i(!1)}(o.toString(),s):function(e,i){let s=new vb,o=new AbortController,l=setTimeout(()=>{o.abort(),W(s,"TestPingServer: timeout",!1,i)},1e4);fetch(e,{signal:o.signal}).then(e=>{clearTimeout(l),e.ok?W(s,"TestPingServer: ok",!0,i):W(s,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(l),W(s,"TestPingServer: error",!1,i)})}(o.toString(),s)}else K(2);e.G=0,e.l&&e.l.sa(i),ad(e),Zc(e)}function ad(e){if(e.G=0,e.ka=[],e.l){let i=kc(e.h);(0!=i.length||0!=e.i.length)&&(ma(e.ka,i),ma(e.ka,e.i),e.h.i.length=0,la(e.i),e.i.length=0),e.l.ra()}}function cc(e,i,s){var o=s instanceof T?N(s):new T(s);if(""!=o.g)i&&(o.g=i+"."+o.g),rc(o,o.s);else{var l=$.location;o=l.protocol,i=i?i+"."+l.hostname:l.hostname,l=+l.port;var h=new T(null);o&&qc(h,o),i&&(h.g=i),l&&rc(h,l),s&&(h.l=s),o=h}return s=e.D,i=e.ya,s&&i&&S(o,s,i),S(o,"VER",e.la),$c(e,o),o}function Mb(e,i,s){if(i&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(i=new X(e.Ca&&!e.pa?new Jc({eb:s}):e.pa)).Ha(e.J),i}function gd(){}function hd(){}function Y(e,i){E.call(this),this.g=new Yc(i),this.l=e,this.h=i&&i.messageUrlParams||null,e=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(e?e["X-WebChannel-Content-Type"]=i.messageContentType:e={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(e?e["X-WebChannel-Client-Profile"]=i.va:e={"X-WebChannel-Client-Profile":i.va}),this.g.S=e,(e=i&&i.Sb)&&!t(e)&&(this.g.m=e),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!t(i)&&(this.g.D=i,null!==(e=this.h)&&i in e&&i in(e=this.h)&&delete e[i]),this.j=new Z(this)}function id(e){nb.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var i=e.__sm__;if(i){e:{for(let s in i){e=s;break e}e=void 0}(this.i=e)&&(e=this.i,i=null!==i&&e in i?i[e]:void 0),this.data=i}else this.data=e}function jd(){ob.call(this),this.status=1}function Z(e){this.g=e}(s=X.prototype).Ha=function(e){this.J=e},s.ea=function(e,s,o,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);s=s?s.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():i.g(),this.v=this.o?lb(this.o):lb(i),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(s,String(e),!0),this.B=!1}catch(e){Sc(this,e);return}if(e=o||"",o=new Map(this.headers),l){if(Object.getPrototypeOf(l)===Object.prototype)for(var h in l)o.set(h,l[h]);else if("function"==typeof l.keys&&"function"==typeof l.get)for(let e of l.keys())o.set(e,l.get(e));else throw Error("Unknown input type for opt_headers: "+String(l))}for(let[i,d]of(l=Array.from(o.keys()).find(e=>"content-type"==e.toLowerCase()),h=$.FormData&&e instanceof $.FormData,!(0<=Array.prototype.indexOf.call(ex,s,void 0))||l||h||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o))this.g.setRequestHeader(i,d);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tc(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Sc(this,e)}},s.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,F(this,"complete"),F(this,"abort"),Vc(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vc(this,!0)),X.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Wc(this):this.bb())},s.bb=function(){Wc(this)},s.isActive=function(){return!!this.g},s.Z=function(){try{return 2<P(this)?this.g.status:-1}catch(e){return -1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},s.Oa=function(e){if(this.g){var i=this.g.responseText;return e&&0==i.indexOf(e)&&(i=i.substring(e.length)),ey(i)}},s.Ba=function(){return this.m},s.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(s=Yc.prototype).la=8,s.G=1,s.connect=function(e,i,s,o){K(0),this.W=e,this.H=i||{},s&&void 0!==o&&(this.H.OSID=s,this.H.OAID=o),this.F=this.X,this.I=cc(this,null,this.W),fc(this)},s.Ga=function(e){if(this.s){if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let l=new M(this,this.j,e),h=this.o;if(this.S&&(h?ua(h=sa(h),this.S):h=this.S),null!==this.m||this.O||(l.H=h,h=null),this.P)e:{for(var i=0,s=0;s<this.i.length;s++){t:{var o=this.i[s];if("__data__"in o.map&&"string"==typeof(o=o.map.__data__)){o=o.length;break t}o=void 0}if(void 0===o)break;if(4096<(i+=o)){i=s;break e}if(4096===i||s===this.i.length-1){i=s+1;break e}}i=1e3}else i=1e3;i=dd(this,l,i),S(s=N(this.I),"RID",e),S(s,"CVER",22),this.D&&S(s,"X-HTTP-Session-Id",this.D),$c(this,s),h&&(this.O?i="headers="+encodeURIComponent(String(Oc(h)))+"&"+i:this.m&&Pc(s,this.m,h)),bc(this.h,l),this.Ua&&S(s,"TYPE","init"),this.P?(S(s,"$req",i),S(s,"SID","null"),l.T=!0,Hb(l,s,null)):Hb(l,s,i),this.G=2}}else 3==this.G&&(e?ed(this,e):0==this.i.length||jc(this.h)||ed(this))}},s.Fa=function(){if(this.u=null,fd(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ub(p(this.ab,this),e)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,K(10),Zb(this),fd(this))},s.Za=function(){null!=this.C&&(this.C=null,Zb(this),$b(this),K(19))},s.fb=function(e){e?(this.j.info("Successfully pinged google.com"),K(2)):(this.j.info("Failed to ping google.com"),K(1))},s.isActive=function(){return!!this.l&&this.l.isActive(this)},(s=gd.prototype).ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){},hd.prototype.g=function(e,i){return new Y(e,i)},r(Y,E),Y.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Y.prototype.close=function(){gc(this.g)},Y.prototype.o=function(e){var i=this.g;if("string"==typeof e){var s={};s.__data__=e,e=s}else this.u&&((s={}).__data__=e_(e),e=s);i.i.push(new eS(i.Ya++,e)),3==i.G&&fc(i)},Y.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Y.aa.N.call(this)},r(id,nb),r(jd,ob),r(Z,gd),Z.prototype.ua=function(){F(this.g,"a")},Z.prototype.ta=function(e){F(this.g,new id(e))},Z.prototype.sa=function(e){F(this.g,new jd)},Z.prototype.ra=function(){F(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,Y.prototype.send=Y.prototype.o,Y.prototype.open=Y.prototype.m,Y.prototype.close=Y.prototype.close,k=ea.createWebChannelTransport=function(){return new hd},w=ea.getStatEventTarget=function(){return qb()},b=ea.Event=eE,_=ea.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eA.NO_ERROR=0,eA.TIMEOUT=8,eA.HTTP_ERROR=6,g=ea.ErrorCode=eA,eP.COMPLETE="complete",f=ea.EventType=eP,mb.EventType=eI,eI.OPEN="a",eI.CLOSE="b",eI.ERROR="c",eI.MESSAGE="d",E.prototype.listen=E.prototype.K,d=ea.WebChannel=mb,h=ea.FetchXmlHttpFactory=Jc,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,l=ea.XhrIo=X}).apply(void 0!==eo?eo:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),s(3454),s(8764).lW;let el="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User=class User{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="10.12.1",eh=new er.Yd("@firebase/firestore");function __PRIVATE_getLogLevel(){return eh.logLevel}function __PRIVATE_logDebug(e,...i){if(eh.logLevel<=er.in.DEBUG){let s=i.map(__PRIVATE_argToString);eh.debug(`Firestore (${eu}): ${e}`,...s)}}function __PRIVATE_logError(e,...i){if(eh.logLevel<=er.in.ERROR){let s=i.map(__PRIVATE_argToString);eh.error(`Firestore (${eu}): ${e}`,...s)}}function __PRIVATE_logWarn(e,...i){if(eh.logLevel<=er.in.WARN){let s=i.map(__PRIVATE_argToString);eh.warn(`Firestore (${eu}): ${e}`,...s)}}function __PRIVATE_argToString(e){if("string"==typeof e)return e;try{/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return JSON.stringify(e)}catch(i){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(e="Unexpected state"){let i=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: `+e;throw __PRIVATE_logError(i),Error(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let FirestoreError=class FirestoreError extends en.ZR{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_Deferred=class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_OAuthToken=class __PRIVATE_OAuthToken{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}};let __PRIVATE_EmptyAuthCredentialsProvider=class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(User.UNAUTHENTICATED))}shutdown(){}};let __PRIVATE_EmulatorAuthCredentialsProvider=class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}};let __PRIVATE_FirebaseAuthCredentialsProvider=class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){let s=this.i,__PRIVATE_guardedChangeListener=e=>this.i!==s?(s=this.i,i(e)):Promise.resolve(),o=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new __PRIVATE_Deferred,e.enqueueRetryable(()=>__PRIVATE_guardedChangeListener(this.currentUser))};let __PRIVATE_awaitNextToken=()=>{let i=o;e.enqueueRetryable(async()=>{await i.promise,await __PRIVATE_guardedChangeListener(this.currentUser)})},__PRIVATE_registerAuth=e=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),__PRIVATE_awaitNextToken()};this.t.onInit(e=>__PRIVATE_registerAuth(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?__PRIVATE_registerAuth(e):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new __PRIVATE_Deferred)}},0),__PRIVATE_awaitNextToken()}getToken(){let e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(i=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?("string"==typeof i.accessToken||fail(),new __PRIVATE_OAuthToken(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||fail(),new User(e)}};let __PRIVATE_FirstPartyToken=class __PRIVATE_FirstPartyToken{constructor(e,i,s){this.l=e,this.h=i,this.P=s,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}};let __PRIVATE_FirstPartyAuthCredentialsProvider=class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,i,s){this.l=e,this.h=i,this.P=s}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}};let AppCheckToken=class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}};let __PRIVATE_FirebaseAppCheckTokenProvider=class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,i){let onTokenChanged=e=>{null!=e.error&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let s=e.token!==this.R;return this.R=e.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(e.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>onTokenChanged(i))};let __PRIVATE_registerAppCheck=e=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>__PRIVATE_registerAppCheck(e)),setTimeout(()=>{if(!this.appCheck){let e=this.A.getImmediate({optional:!0});e?__PRIVATE_registerAppCheck(e):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||fail(),this.R=e.token,new AppCheckToken(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_AutoId=class __PRIVATE_AutoId{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,s="";for(;s.length<20;){let o=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let i="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(e);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(s);else for(let i=0;i<e;i++)s[i]=Math.floor(256*Math.random());return s}(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<i&&(s+=e.charAt(o[l]%e.length))}return s}};function __PRIVATE_primitiveComparator(e,i){return e<i?-1:e>i?1:0}function __PRIVATE_arrayEquals(e,i,s){return e.length===i.length&&e.every((e,o)=>s(e,i[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Timestamp=class Timestamp{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0||i>=1e9)throw new FirestoreError(ef.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800||e>=253402300800)throw new FirestoreError(ef.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){let i=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*i));return new Timestamp(i,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SnapshotVersion=class SnapshotVersion{constructor(e){this.timestamp=e}static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BasePath=class BasePath{constructor(e,i,s){void 0===i?i=0:i>e.length&&fail(),void 0===s?s=e.length-i:s>e.length-i&&fail(),this.segments=e,this.offset=i,this.len=s}get length(){return this.len}isEqual(e){return 0===BasePath.comparator(this,e)}child(e){let i=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(e=>{i.push(e)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,s=this.limit();i<s;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){let s=Math.min(e.length,i.length);for(let o=0;o<s;o++){let s=e.get(o),l=i.get(o);if(s<l)return -1;if(s>l)return 1}return e.length<i.length?-1:e.length>i.length?1:0}};let ResourcePath=class ResourcePath extends BasePath{construct(e,i,s){return new ResourcePath(e,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let i=[];for(let s of e){if(s.indexOf("//")>=0)throw new FirestoreError(ef.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(e=>e.length>0))}return new ResourcePath(i)}static emptyPath(){return new ResourcePath([])}};let ep=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let FieldPath$1=class FieldPath$1 extends BasePath{construct(e,i,s){return new FieldPath$1(e,i,s)}static isValidIdentifier(e){return ep.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(e){let i=[],s="",o=0,__PRIVATE_addCurrentSegment=()=>{if(0===s.length)throw new FirestoreError(ef.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""},l=!1;for(;o<e.length;){let i=e[o];if("\\"===i){if(o+1===e.length)throw new FirestoreError(ef.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let i=e[o+1];if("\\"!==i&&"."!==i&&"`"!==i)throw new FirestoreError(ef.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=i,o+=2}else"`"===i?l=!l:"."!==i||l?s+=i:__PRIVATE_addCurrentSegment(),o++}if(__PRIVATE_addCurrentSegment(),l)throw new FirestoreError(ef.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(i)}static emptyPath(){return new FieldPath$1([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DocumentKey=class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ResourcePath.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return ResourcePath.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}};let IndexOffset=class IndexOffset{constructor(e,i,s){this.readTime=e,this.documentKey=i,this.largestBatchId=s}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}};let PersistenceTransaction=class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(e){if(e.code!==ef.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PersistencePromise=class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((s,o)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,o)},this.catchCallback=e=>{this.wrapFailure(i,e).next(s,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{let i=e();return i instanceof PersistencePromise?i:PersistencePromise.resolve(i)}catch(e){return PersistencePromise.reject(e)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):PersistencePromise.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):PersistencePromise.reject(i)}static resolve(e){return new PersistencePromise((i,s)=>{i(e)})}static reject(e){return new PersistencePromise((i,s)=>{s(e)})}static waitFor(e){return new PersistencePromise((i,s)=>{let o=0,l=0,h=!1;e.forEach(e=>{++o,e.next(()=>{++l,h&&l===o&&i()},e=>s(e))}),h=!0,l===o&&i()})}static or(e){let i=PersistencePromise.resolve(!1);for(let s of e)i=i.next(e=>e?PersistencePromise.resolve(e):s());return i}static forEach(e,i){let s=[];return e.forEach((e,o)=>{s.push(i.call(this,e,o))}),this.waitFor(s)}static mapArray(e,i){return new PersistencePromise((s,o)=>{let l=e.length,h=Array(l),d=0;for(let f=0;f<l;f++){let g=f;i(e[g]).next(e=>{h[g]=e,++d===l&&s(h)},e=>o(e))}})}static doWhile(e,i){return new PersistencePromise((s,o)=>{let process=()=>{!0===e()?i().next(()=>{process()},o):s()};process()})}};function __PRIVATE_isIndexedDbTransactionError(e){return"IndexedDbTransactionError"===e.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_ListenSequence=class __PRIVATE_ListenSequence{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=e=>this.ie(e),this.se=e=>i.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}};function __PRIVATE_isNegativeZero(e){return 0===e&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(e){let i=0;for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&i++;return i}function forEach(e,i){for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&i(s,e[s])}function isEmpty(e){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0}__PRIVATE_ListenSequence.oe=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SortedMap=class SortedMap{constructor(e,i){this.comparator=e,this.root=i||LLRBNode.EMPTY}insert(e,i){return new SortedMap(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(0===s)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(e){let i=0,s=this.root;for(;!s.isEmpty();){let o=this.comparator(e,s.key);if(0===o)return i+s.left.size;o<0?s=s.left:(i+=s.left.size+1,s=s.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,s)=>(e(i,s),!1))}toString(){let e=[];return this.inorderTraversal((i,s)=>(e.push(`${i}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}};let SortedMapIterator=class SortedMapIterator{constructor(e,i,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=i?s(e.key,i):1,i&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}};let LLRBNode=class LLRBNode{constructor(e,i,s,o,l){this.key=e,this.value=i,this.color=null!=s?s:LLRBNode.RED,this.left=null!=o?o:LLRBNode.EMPTY,this.right=null!=l?l:LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,s,o,l){return new LLRBNode(null!=e?e:this.key,null!=i?i:this.value,null!=s?s:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let o=this,l=s(e,o.key);return(o=l<0?o.copy(null,null,null,o.left.insert(e,i,s),null):0===l?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,s))).fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,i){let s,o=this;if(0>i(e,o.key))o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===i(e,o.key)){if(o.right.isEmpty())return LLRBNode.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();let e=this.left.check();if(e!==this.right.check())throw fail();return e+(this.isRed()?0:1)}};LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1,LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(e,i,s,o,l){return this}insert(e,i,s){return new LLRBNode(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SortedSet=class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,s)=>(e(i),!1))}forEachInRange(e,i){let s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){let o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let s;for(s=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){let i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(e=>{i=i.add(e)}),i}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;let i=this.data.getIterator(),s=e.data.getIterator();for(;i.hasNext();){let e=i.getNext().key,o=s.getNext().key;if(0!==this.comparator(e,o))return!1}return!0}toArray(){let e=[];return this.forEach(i=>{e.push(i)}),e}toString(){let e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){let i=new SortedSet(this.comparator);return i.data=e,i}};let SortedSetIterator=class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FieldMask=class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let i=new SortedSet(FieldPath$1.comparator);for(let e of this.fields)i=i.add(e);for(let s of e)i=i.add(s);return new FieldMask(i.toArray())}covers(e){for(let i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(e,i)=>e.isEqual(i))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_Base64DecodeError=class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ByteString=class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){let i=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+e):e}}(e);return new ByteString(i)}static fromUint8Array(e){let i=function(e){let i="";for(let s=0;s<e.length;++s)i+=String.fromCharCode(e[s]);return i}(e);return new ByteString(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ByteString.EMPTY_BYTE_STRING=new ByteString("");let eg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(e){if(e||fail(),"string"==typeof e){let i=0,s=eg.exec(e);if(s||fail(),s[1]){let e=s[1];i=Number(e=(e+"000000000").substr(0,9))}let o=new Date(e);return{seconds:Math.floor(o.getTime()/1e3),nanos:i}}return{seconds:__PRIVATE_normalizeNumber(e.seconds),nanos:__PRIVATE_normalizeNumber(e.nanos)}}function __PRIVATE_normalizeNumber(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function __PRIVATE_normalizeByteString(e){return"string"==typeof e?ByteString.fromBase64String(e):ByteString.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(e){var i,s;return"server_timestamp"===(null===(s=((null===(i=null==e?void 0:e.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function __PRIVATE_getLocalWriteTime(e){let i=__PRIVATE_normalizeTimestamp(e.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(i.seconds,i.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DatabaseInfo=class DatabaseInfo{constructor(e,i,s,o,l,h,d,f,g){this.databaseId=e,this.appId=i,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g}};let DatabaseId=class DatabaseId{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?__PRIVATE_isServerTimestamp(e)?4:__PRIVATE_isMaxValue(e)?9007199254740991:10:fail()}function __PRIVATE_valueEquals(e,i){if(e===i)return!0;let s=__PRIVATE_typeOrder(e);if(s!==__PRIVATE_typeOrder(i))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===i.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(e).isEqual(__PRIVATE_getLocalWriteTime(i));case 3:return function(e,i){if("string"==typeof e.timestampValue&&"string"==typeof i.timestampValue&&e.timestampValue.length===i.timestampValue.length)return e.timestampValue===i.timestampValue;let s=__PRIVATE_normalizeTimestamp(e.timestampValue),o=__PRIVATE_normalizeTimestamp(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(e,i);case 5:return e.stringValue===i.stringValue;case 6:return __PRIVATE_normalizeByteString(e.bytesValue).isEqual(__PRIVATE_normalizeByteString(i.bytesValue));case 7:return e.referenceValue===i.referenceValue;case 8:return __PRIVATE_normalizeNumber(e.geoPointValue.latitude)===__PRIVATE_normalizeNumber(i.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(e.geoPointValue.longitude)===__PRIVATE_normalizeNumber(i.geoPointValue.longitude);case 2:return function(e,i){if("integerValue"in e&&"integerValue"in i)return __PRIVATE_normalizeNumber(e.integerValue)===__PRIVATE_normalizeNumber(i.integerValue);if("doubleValue"in e&&"doubleValue"in i){let s=__PRIVATE_normalizeNumber(e.doubleValue),o=__PRIVATE_normalizeNumber(i.doubleValue);return s===o?__PRIVATE_isNegativeZero(s)===__PRIVATE_isNegativeZero(o):isNaN(s)&&isNaN(o)}return!1}(e,i);case 9:return __PRIVATE_arrayEquals(e.arrayValue.values||[],i.arrayValue.values||[],__PRIVATE_valueEquals);case 10:return function(e,i){let s=e.mapValue.fields||{},o=i.mapValue.fields||{};if(__PRIVATE_objectSize(s)!==__PRIVATE_objectSize(o))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===o[e]||!__PRIVATE_valueEquals(s[e],o[e])))return!1;return!0}(e,i);default:return fail()}}function __PRIVATE_arrayValueContains(e,i){return void 0!==(e.values||[]).find(e=>__PRIVATE_valueEquals(e,i))}function __PRIVATE_valueCompare(e,i){if(e===i)return 0;let s=__PRIVATE_typeOrder(e),o=__PRIVATE_typeOrder(i);if(s!==o)return __PRIVATE_primitiveComparator(s,o);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(e.booleanValue,i.booleanValue);case 2:return function(e,i){let s=__PRIVATE_normalizeNumber(e.integerValue||e.doubleValue),o=__PRIVATE_normalizeNumber(i.integerValue||i.doubleValue);return s<o?-1:s>o?1:s===o?0:isNaN(s)?isNaN(o)?0:-1:1}(e,i);case 3:return __PRIVATE_compareTimestamps(e.timestampValue,i.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(e),__PRIVATE_getLocalWriteTime(i));case 5:return __PRIVATE_primitiveComparator(e.stringValue,i.stringValue);case 6:return function(e,i){let s=__PRIVATE_normalizeByteString(e),o=__PRIVATE_normalizeByteString(i);return s.compareTo(o)}(e.bytesValue,i.bytesValue);case 7:return function(e,i){let s=e.split("/"),o=i.split("/");for(let e=0;e<s.length&&e<o.length;e++){let i=__PRIVATE_primitiveComparator(s[e],o[e]);if(0!==i)return i}return __PRIVATE_primitiveComparator(s.length,o.length)}(e.referenceValue,i.referenceValue);case 8:return function(e,i){let s=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(i.latitude));return 0!==s?s:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.longitude),__PRIVATE_normalizeNumber(i.longitude))}(e.geoPointValue,i.geoPointValue);case 9:return function(e,i){let s=e.values||[],o=i.values||[];for(let e=0;e<s.length&&e<o.length;++e){let i=__PRIVATE_valueCompare(s[e],o[e]);if(i)return i}return __PRIVATE_primitiveComparator(s.length,o.length)}(e.arrayValue,i.arrayValue);case 10:return function(e,i){if(e===em.mapValue&&i===em.mapValue)return 0;if(e===em.mapValue)return 1;if(i===em.mapValue)return -1;let s=e.fields||{},o=Object.keys(s),l=i.fields||{},h=Object.keys(l);o.sort(),h.sort();for(let e=0;e<o.length&&e<h.length;++e){let i=__PRIVATE_primitiveComparator(o[e],h[e]);if(0!==i)return i;let d=__PRIVATE_valueCompare(s[o[e]],l[h[e]]);if(0!==d)return d}return __PRIVATE_primitiveComparator(o.length,h.length)}(e.mapValue,i.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(e,i){if("string"==typeof e&&"string"==typeof i&&e.length===i.length)return __PRIVATE_primitiveComparator(e,i);let s=__PRIVATE_normalizeTimestamp(e),o=__PRIVATE_normalizeTimestamp(i),l=__PRIVATE_primitiveComparator(s.seconds,o.seconds);return 0!==l?l:__PRIVATE_primitiveComparator(s.nanos,o.nanos)}function __PRIVATE_canonifyValue(e){var i,s;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let i=__PRIVATE_normalizeTimestamp(e);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?__PRIVATE_normalizeByteString(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,DocumentKey.fromName(i).toString()):"geoPointValue"in e?(s=e.geoPointValue,`geo(${s.latitude},${s.longitude})`):"arrayValue"in e?function(e){let i="[",s=!0;for(let o of e.values||[])s?s=!1:i+=",",i+=__PRIVATE_canonifyValue(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(e){let i=Object.keys(e.fields||{}).sort(),s="{",o=!0;for(let l of i)o?o=!1:s+=",",s+=`${l}:${__PRIVATE_canonifyValue(e.fields[l])}`;return s+"}"}(e.mapValue):fail()}function isInteger(e){return!!e&&"integerValue"in e}function isArray(e){return!!e&&"arrayValue"in e}function __PRIVATE_isMapValue(e){return!!e&&"mapValue"in e}function __PRIVATE_deepClone(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let i={mapValue:{fields:{}}};return forEach(e.mapValue.fields,(e,s)=>i.mapValue.fields[e]=__PRIVATE_deepClone(s)),i}if(e.arrayValue){let i={arrayValue:{values:[]}};for(let s=0;s<(e.arrayValue.values||[]).length;++s)i.arrayValue.values[s]=__PRIVATE_deepClone(e.arrayValue.values[s]);return i}return Object.assign({},e)}function __PRIVATE_isMaxValue(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ObjectValue=class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let s=0;s<e.length-1;++s)if(!__PRIVATE_isMapValue(i=(i.mapValue.fields||{})[e.get(s)]))return null;return(i=(i.mapValue.fields||{})[e.lastSegment()])||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(i)}setAll(e){let i=FieldPath$1.emptyPath(),s={},o=[];e.forEach((e,l)=>{if(!i.isImmediateParentOf(l)){let e=this.getFieldsMap(i);this.applyChanges(e,s,o),s={},o=[],i=l.popLast()}e?s[l.lastSegment()]=__PRIVATE_deepClone(e):o.push(l.lastSegment())});let l=this.getFieldsMap(i);this.applyChanges(l,s,o)}delete(e){let i=this.field(e.popLast());__PRIVATE_isMapValue(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=i.mapValue.fields[e.get(s)];__PRIVATE_isMapValue(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(s)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,s){for(let o of(forEach(i,(i,s)=>e[i]=s),s))delete e[o]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MutableDocument=class MutableDocument{constructor(e,i,s,o,l,h,d){this.key=e,this.documentType=i,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,i,s,o){return new MutableDocument(e,1,i,SnapshotVersion.min(),s,o,0)}static newNoDocument(e,i){return new MutableDocument(e,2,i,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,i){return new MutableDocument(e,3,i,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,i){return this.createTime.isEqual(SnapshotVersion.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bound=class Bound{constructor(e,i){this.position=e,this.inclusive=i}};function __PRIVATE_boundCompareToDocument(e,i,s){let o=0;for(let l=0;l<e.position.length;l++){let h=i[l],d=e.position[l];if(o=h.field.isKeyField()?DocumentKey.comparator(DocumentKey.fromName(d.referenceValue),s.key):__PRIVATE_valueCompare(d,s.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function __PRIVATE_boundEquals(e,i){if(null===e)return null===i;if(null===i||e.inclusive!==i.inclusive||e.position.length!==i.position.length)return!1;for(let s=0;s<e.position.length;s++)if(!__PRIVATE_valueEquals(e.position[s],i.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OrderBy=class OrderBy{constructor(e,i="asc"){this.field=e,this.dir=i}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Filter=class Filter{};let FieldFilter=class FieldFilter extends Filter{constructor(e,i,s){super(),this.field=e,this.op=i,this.value=s}static create(e,i,s){return e.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(e,i,s):new __PRIVATE_KeyFieldFilter(e,i,s):"array-contains"===i?new __PRIVATE_ArrayContainsFilter(e,s):"in"===i?new __PRIVATE_InFilter(e,s):"not-in"===i?new __PRIVATE_NotInFilter(e,s):"array-contains-any"===i?new __PRIVATE_ArrayContainsAnyFilter(e,s):new FieldFilter(e,i,s)}static createKeyFieldInFilter(e,i,s){return"in"===i?new __PRIVATE_KeyFieldInFilter(e,s):new __PRIVATE_KeyFieldNotInFilter(e,s)}matches(e){let i=e.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(__PRIVATE_valueCompare(i,this.value)):null!==i&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(i)&&this.matchesComparison(__PRIVATE_valueCompare(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}};let CompositeFilter=class CompositeFilter extends Filter{constructor(e,i){super(),this.filters=e,this.op=i,this.ae=null}static create(e,i){return new CompositeFilter(e,i)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?void 0===this.filters.find(i=>!i.matches(e)):void 0!==this.filters.find(i=>i.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function __PRIVATE_compositeFilterIsConjunction(e){return"and"===e.op}function __PRIVATE_compositeFilterIsFlat(e){for(let i of e.filters)if(i instanceof CompositeFilter)return!1;return!0}let __PRIVATE_KeyFieldFilter=class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,i,s){super(e,i,s),this.key=DocumentKey.fromName(s.referenceValue)}matches(e){let i=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(i)}};let __PRIVATE_KeyFieldInFilter=class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,i){super(e,"in",i),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}};let __PRIVATE_KeyFieldNotInFilter=class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,i){super(e,"not-in",i),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}};function __PRIVATE_extractDocumentKeysFromArrayValue(e,i){var s;return((null===(s=i.arrayValue)||void 0===s?void 0:s.values)||[]).map(e=>DocumentKey.fromName(e.referenceValue))}let __PRIVATE_ArrayContainsFilter=class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,i){super(e,"array-contains",i)}matches(e){let i=e.data.field(this.field);return isArray(i)&&__PRIVATE_arrayValueContains(i.arrayValue,this.value)}};let __PRIVATE_InFilter=class __PRIVATE_InFilter extends FieldFilter{constructor(e,i){super(e,"in",i)}matches(e){let i=e.data.field(this.field);return null!==i&&__PRIVATE_arrayValueContains(this.value.arrayValue,i)}};let __PRIVATE_NotInFilter=class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,i){super(e,"not-in",i)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let i=e.data.field(this.field);return null!==i&&!__PRIVATE_arrayValueContains(this.value.arrayValue,i)}};let __PRIVATE_ArrayContainsAnyFilter=class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,i){super(e,"array-contains-any",i)}matches(e){let i=e.data.field(this.field);return!(!isArray(i)||!i.arrayValue.values)&&i.arrayValue.values.some(e=>__PRIVATE_arrayValueContains(this.value.arrayValue,e))}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_TargetImpl=class __PRIVATE_TargetImpl{constructor(e,i=null,s=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=i,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.ue=null}};function __PRIVATE_newTarget(e,i=null,s=[],o=[],l=null,h=null,d=null){return new __PRIVATE_TargetImpl(e,i,s,o,l,h,d)}function __PRIVATE_canonifyTarget(e){if(null===e.ue){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:"+e.filters.map(e=>(function __PRIVATE_canonifyFilter(e){if(e instanceof FieldFilter)return e.field.canonicalString()+e.op.toString()+__PRIVATE_canonifyValue(e.value);if(__PRIVATE_compositeFilterIsFlat(e)&&__PRIVATE_compositeFilterIsConjunction(e))return e.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{let i=e.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");return`${e.op}(${i})`}})(e)).join(",")+"|ob:"+e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(i+="|l:"+e.limit),e.startAt&&(i+="|lb:"+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(e=>__PRIVATE_canonifyValue(e)).join(",")),e.endAt&&(i+="|ub:"+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(e=>__PRIVATE_canonifyValue(e)).join(",")),e.ue=i}return e.ue}function __PRIVATE_targetEquals(e,i){if(e.limit!==i.limit||e.orderBy.length!==i.orderBy.length)return!1;for(let l=0;l<e.orderBy.length;l++){var s,o;if(s=e.orderBy[l],o=i.orderBy[l],!(s.dir===o.dir&&s.field.isEqual(o.field)))return!1}if(e.filters.length!==i.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if(!function __PRIVATE_filterEquals(e,i){return e instanceof FieldFilter?i instanceof FieldFilter&&e.op===i.op&&e.field.isEqual(i.field)&&__PRIVATE_valueEquals(e.value,i.value):e instanceof CompositeFilter?i instanceof CompositeFilter&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((e,s,o)=>e&&__PRIVATE_filterEquals(s,i.filters[o]),!0):void fail()}(e.filters[s],i.filters[s]))return!1;return e.collectionGroup===i.collectionGroup&&!!e.path.isEqual(i.path)&&!!__PRIVATE_boundEquals(e.startAt,i.startAt)&&__PRIVATE_boundEquals(e.endAt,i.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_QueryImpl=class __PRIVATE_QueryImpl{constructor(e,i=null,s=[],o=[],l=null,h="F",d=null,f=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function __PRIVATE_queryMatchesAllDocuments(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_queryNormalizedOrderBy(e){if(null===e.ce){let i;e.ce=[];let s=new Set;for(let i of e.explicitOrderBy)e.ce.push(i),s.add(i.field.canonicalString());let o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",l=(i=new SortedSet(FieldPath$1.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(i=i.add(e.field))})}),i);l.forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.ce.push(new OrderBy(i,o))}),s.has(FieldPath$1.keyField().canonicalString())||e.ce.push(new OrderBy(FieldPath$1.keyField(),o))}return e.ce}function __PRIVATE_queryToTarget(e){return e.le||(e.le=function(e,i){if("F"===e.limitType)return __PRIVATE_newTarget(e.path,e.collectionGroup,i,e.filters,e.limit,e.startAt,e.endAt);{i=i.map(e=>{let i="desc"===e.dir?"asc":"desc";return new OrderBy(e.field,i)});let s=e.endAt?new Bound(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Bound(e.startAt.position,e.startAt.inclusive):null;return __PRIVATE_newTarget(e.path,e.collectionGroup,i,e.filters,e.limit,s,o)}}(e,__PRIVATE_queryNormalizedOrderBy(e))),e.le}function __PRIVATE_queryWithLimit(e,i,s){return new __PRIVATE_QueryImpl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),i,s,e.startAt,e.endAt)}function __PRIVATE_queryEquals(e,i){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(e),__PRIVATE_queryToTarget(i))&&e.limitType===i.limitType}function __PRIVATE_canonifyQuery(e){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(e))}|lt:${e.limitType}`}function __PRIVATE_stringifyQuery(e){var i;let s;return`Query(target=${s=(i=__PRIVATE_queryToTarget(e)).path.canonicalString(),null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(e=>(function __PRIVATE_stringifyFilter(e){return e instanceof FieldFilter?`${e.field.canonicalString()} ${e.op} ${__PRIVATE_canonifyValue(e.value)}`:e instanceof CompositeFilter?e.op.toString()+" {"+e.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==i.limit||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),i.startAt&&(s+=", startAt: "+(i.startAt.inclusive?"b:":"a:")+i.startAt.position.map(e=>__PRIVATE_canonifyValue(e)).join(",")),i.endAt&&(s+=", endAt: "+(i.endAt.inclusive?"a:":"b:")+i.endAt.position.map(e=>__PRIVATE_canonifyValue(e)).join(",")),`Target(${s})`}; limitType=${e.limitType})`}function __PRIVATE_queryMatches(e,i){return i.isFoundDocument()&&function(e,i){let s=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(s):DocumentKey.isDocumentKey(e.path)?e.path.isEqual(s):e.path.isImmediateParentOf(s)}(e,i)&&function(e,i){for(let s of __PRIVATE_queryNormalizedOrderBy(e))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(e,i)&&function(e,i){for(let s of e.filters)if(!s.matches(i))return!1;return!0}(e,i)&&(!e.startAt||!!function(e,i,s){let o=__PRIVATE_boundCompareToDocument(e,i,s);return e.inclusive?o<=0:o<0}(e.startAt,__PRIVATE_queryNormalizedOrderBy(e),i))&&(!e.endAt||!!function(e,i,s){let o=__PRIVATE_boundCompareToDocument(e,i,s);return e.inclusive?o>=0:o>0}(e.endAt,__PRIVATE_queryNormalizedOrderBy(e),i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ObjectMap=class ObjectMap{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){let i=this.mapKeyFn(e),s=this.inner[i];if(void 0!==s){for(let[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return void 0!==this.get(e)}set(e,i){let s=this.mapKeyFn(e),o=this.inner[s];if(void 0===o)return this.inner[s]=[[e,i]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){let i=this.mapKeyFn(e),s=this.inner[i];if(void 0===s)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return 1===s.length?delete this.inner[i]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(i,s)=>{for(let[i,o]of s)e(i,o)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e_=new SortedMap(DocumentKey.comparator),ey=new SortedMap(DocumentKey.comparator);function documentMap(...e){let i=ey;for(let s of e)i=i.insert(s.key,s);return i}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(e){let i=ey;return e.forEach((e,s)=>i=i.insert(e,s.overlayedDocument)),i}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(e=>e.toString(),(e,i)=>e.isEqual(i))}let ev=new SortedMap(DocumentKey.comparator),eI=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...e){let i=eI;for(let s of e)i=i.add(s);return i}let eE=new SortedSet(__PRIVATE_primitiveComparator);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(e,i){if(e.useProto3Json){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(i)?"-0":i}}function __PRIVATE_toInteger(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TransformOperation=class TransformOperation{constructor(){this._=void 0}};function __PRIVATE_computeTransformOperationBaseValue(e,i){return e instanceof __PRIVATE_NumericIncrementTransformOperation?isInteger(i)||i&&"doubleValue"in i?i:{integerValue:0}:null}let __PRIVATE_ServerTimestampTransform=class __PRIVATE_ServerTimestampTransform extends TransformOperation{};let __PRIVATE_ArrayUnionTransformOperation=class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}};function __PRIVATE_applyArrayUnionTransformOperation(e,i){let s=__PRIVATE_coercedFieldValuesArray(i);for(let i of e.elements)s.some(e=>__PRIVATE_valueEquals(e,i))||s.push(i);return{arrayValue:{values:s}}}let __PRIVATE_ArrayRemoveTransformOperation=class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}};function __PRIVATE_applyArrayRemoveTransformOperation(e,i){let s=__PRIVATE_coercedFieldValuesArray(i);for(let i of e.elements)s=s.filter(e=>!__PRIVATE_valueEquals(e,i));return{arrayValue:{values:s}}}let __PRIVATE_NumericIncrementTransformOperation=class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,i){super(),this.serializer=e,this.Pe=i}};function asNumber(e){return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue)}function __PRIVATE_coercedFieldValuesArray(e){return isArray(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}let MutationResult=class MutationResult{constructor(e,i){this.version=e,this.transformResults=i}};let Precondition=class Precondition{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function __PRIVATE_preconditionIsValidForDocument(e,i){return void 0!==e.updateTime?i.isFoundDocument()&&i.version.isEqual(e.updateTime):void 0===e.exists||e.exists===i.isFoundDocument()}let Mutation=class Mutation{};function __PRIVATE_calculateOverlayMutation(e,i){if(!e.hasLocalMutations||i&&0===i.fields.length)return null;if(null===i)return e.isNoDocument()?new __PRIVATE_DeleteMutation(e.key,Precondition.none()):new __PRIVATE_SetMutation(e.key,e.data,Precondition.none());{let s=e.data,o=ObjectValue.empty(),l=new SortedSet(FieldPath$1.comparator);for(let e of i.fields)if(!l.has(e)){let i=s.field(e);null===i&&e.length>1&&(e=e.popLast(),i=s.field(e)),null===i?o.delete(e):o.set(e,i),l=l.add(e)}return new __PRIVATE_PatchMutation(e.key,o,new FieldMask(l.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToLocalView(e,i,s,o){return e instanceof __PRIVATE_SetMutation?function(e,i,s,o){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,i))return s;let l=e.value.clone(),h=__PRIVATE_localTransformResults(e.fieldTransforms,o,i);return l.setAll(h),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(e,i,s,o):e instanceof __PRIVATE_PatchMutation?function(e,i,s,o){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,i))return s;let l=__PRIVATE_localTransformResults(e.fieldTransforms,o,i),h=i.data;return(h.setAll(__PRIVATE_getPatch(e)),h.setAll(l),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),null===s)?null:s.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,i,s,o):__PRIVATE_preconditionIsValidForDocument(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s}function __PRIVATE_mutationEquals(e,i){var s,o;return e.type===i.type&&!!e.key.isEqual(i.key)&&!!e.precondition.isEqual(i.precondition)&&(s=e.fieldTransforms,o=i.fieldTransforms,!!(void 0===s&&void 0===o||!(!s||!o)&&__PRIVATE_arrayEquals(s,o,(e,i)=>{var s,o;return e.field.isEqual(i.field)&&(s=e.transform,o=i.transform,s instanceof __PRIVATE_ArrayUnionTransformOperation&&o instanceof __PRIVATE_ArrayUnionTransformOperation||s instanceof __PRIVATE_ArrayRemoveTransformOperation&&o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(s.elements,o.elements,__PRIVATE_valueEquals):s instanceof __PRIVATE_NumericIncrementTransformOperation&&o instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(s.Pe,o.Pe):s instanceof __PRIVATE_ServerTimestampTransform&&o instanceof __PRIVATE_ServerTimestampTransform)})))&&(0===e.type?e.value.isEqual(i.value):1!==e.type||e.data.isEqual(i.data)&&e.fieldMask.isEqual(i.fieldMask))}let __PRIVATE_SetMutation=class __PRIVATE_SetMutation extends Mutation{constructor(e,i,s,o=[]){super(),this.key=e,this.value=i,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}};let __PRIVATE_PatchMutation=class __PRIVATE_PatchMutation extends Mutation{constructor(e,i,s,o,l=[]){super(),this.key=e,this.data=i,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}};function __PRIVATE_getPatch(e){let i=new Map;return e.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){let o=e.data.field(s);i.set(s,o)}}),i}function __PRIVATE_serverTransformResults(e,i,s){var o;let l=new Map;e.length===s.length||fail();for(let h=0;h<s.length;h++){let d=e[h],f=d.transform,g=i.data.field(d.field);l.set(d.field,(o=s[h],f instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(f,g):f instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(f,g):o))}return l}function __PRIVATE_localTransformResults(e,i,s){let o=new Map;for(let l of e){let e=l.transform,h=s.data.field(l.field);o.set(l.field,e instanceof __PRIVATE_ServerTimestampTransform?function(e,i){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return i&&__PRIVATE_isServerTimestamp(i)&&(i=function __PRIVATE_getPreviousValue(e){let i=e.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(i)?__PRIVATE_getPreviousValue(i):i}(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(i,h):e instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(e,h):e instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(e,h):function(e,i){let s=__PRIVATE_computeTransformOperationBaseValue(e,i),o=asNumber(s)+asNumber(e.Pe);return isInteger(s)&&isInteger(e.Pe)?__PRIVATE_toInteger(o):__PRIVATE_toDouble(e.serializer,o)}(e,h))}return o}let __PRIVATE_DeleteMutation=class __PRIVATE_DeleteMutation extends Mutation{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};let __PRIVATE_VerifyMutation=class __PRIVATE_VerifyMutation extends Mutation{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MutationBatch=class MutationBatch{constructor(e,i,s,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,i){let s=i.mutationResults;for(let i=0;i<this.mutations.length;i++){let l=this.mutations[i];if(l.key.isEqual(e.key)){var o;o=s[i],l instanceof __PRIVATE_SetMutation?function(e,i,s){let o=e.value.clone(),l=__PRIVATE_serverTransformResults(e.fieldTransforms,i,s.transformResults);o.setAll(l),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(l,e,o):l instanceof __PRIVATE_PatchMutation?function(e,i,s){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,i))return void i.convertToUnknownDocument(s.version);let o=__PRIVATE_serverTransformResults(e.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(__PRIVATE_getPatch(e)),l.setAll(o),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(l,e,o):function(e,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,o)}}}applyToLocalView(e,i){for(let s of this.baseMutations)s.key.isEqual(e.key)&&(i=__PRIVATE_mutationApplyToLocalView(s,e,i,this.localWriteTime));for(let s of this.mutations)s.key.isEqual(e.key)&&(i=__PRIVATE_mutationApplyToLocalView(s,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){let s=__PRIVATE_newDocumentKeyMap();return this.mutations.forEach(o=>{let l=e.get(o.key),h=l.overlayedDocument,d=this.applyToLocalView(h,l.mutatedFields);d=i.has(o.key)?null:d;let f=__PRIVATE_calculateOverlayMutation(h,d);null!==f&&s.set(o.key,f),h.isValidDocument()||h.convertToNoDocument(SnapshotVersion.min())}),s}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(e,i)=>__PRIVATE_mutationEquals(e,i))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(e,i)=>__PRIVATE_mutationEquals(e,i))}};let MutationBatchResult=class MutationBatchResult{constructor(e,i,s,o){this.batch=e,this.commitVersion=i,this.mutationResults=s,this.docVersions=o}static from(e,i,s){e.mutations.length===s.length||fail();let o=ev,l=e.mutations;for(let e=0;e<l.length;e++)o=o.insert(l[e].key,s[e].version);return new MutationBatchResult(e,i,s,o)}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Overlay=class Overlay{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};(j=O||(O={}))[j.OK=0]="OK",j[j.CANCELLED=1]="CANCELLED",j[j.UNKNOWN=2]="UNKNOWN",j[j.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",j[j.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",j[j.NOT_FOUND=5]="NOT_FOUND",j[j.ALREADY_EXISTS=6]="ALREADY_EXISTS",j[j.PERMISSION_DENIED=7]="PERMISSION_DENIED",j[j.UNAUTHENTICATED=16]="UNAUTHENTICATED",j[j.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",j[j.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",j[j.ABORTED=10]="ABORTED",j[j.OUT_OF_RANGE=11]="OUT_OF_RANGE",j[j.UNIMPLEMENTED=12]="UNIMPLEMENTED",j[j.INTERNAL=13]="INTERNAL",j[j.UNAVAILABLE=14]="UNAVAILABLE",j[j.DATA_LOSS=15]="DATA_LOSS",new o([4294967295,4294967295],0);let JsonProtoSerializer=class JsonProtoSerializer{constructor(e,i){this.databaseId=e,this.useProto3Json=i}};function toTimestamp(e,i){return e.useProto3Json?`${new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+i.nanoseconds).slice(-9)}Z`:{seconds:""+i.seconds,nanos:i.nanoseconds}}function __PRIVATE_fromVersion(e){return e||fail(),SnapshotVersion.fromTimestamp(function(e){let i=__PRIVATE_normalizeTimestamp(e);return new Timestamp(i.seconds,i.nanos)}(e))}function __PRIVATE_toResourceName(e,i){return __PRIVATE_toResourcePath(e,i).canonicalString()}function __PRIVATE_toResourcePath(e,i){let s=new ResourcePath(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===i?s:s.child(i)}function __PRIVATE_toName(e,i){return __PRIVATE_toResourceName(e.databaseId,i.path)}function __PRIVATE_toMutationDocument(e,i,s){return{name:__PRIVATE_toName(e,i),fields:s.value.mapValue.fields}}function __PRIVATE_fromFieldPathReference(e){return FieldPath$1.fromServerFormat(e.fieldPath)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_LocalSerializer=class __PRIVATE_LocalSerializer{constructor(e){this.ct=e}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_FirestoreIndexValueWriter=class __PRIVATE_FirestoreIndexValueWriter{constructor(){}Pt(e,i){this.It(e,i),i.Tt()}It(e,i){if("nullValue"in e)this.Et(i,5);else if("booleanValue"in e)this.Et(i,10),i.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(i,15),i.dt(__PRIVATE_normalizeNumber(e.integerValue));else if("doubleValue"in e){let s=__PRIVATE_normalizeNumber(e.doubleValue);isNaN(s)?this.Et(i,13):(this.Et(i,15),__PRIVATE_isNegativeZero(s)?i.dt(0):i.dt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Et(i,20),"string"==typeof s&&(s=__PRIVATE_normalizeTimestamp(s)),i.At(`${s.seconds||""}`),i.dt(s.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,i),this.Vt(i);else if("bytesValue"in e)this.Et(i,30),i.ft(__PRIVATE_normalizeByteString(e.bytesValue)),this.Vt(i);else if("referenceValue"in e)this.gt(e.referenceValue,i);else if("geoPointValue"in e){let s=e.geoPointValue;this.Et(i,45),i.dt(s.latitude||0),i.dt(s.longitude||0)}else"mapValue"in e?__PRIVATE_isMaxValue(e)?this.Et(i,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,i),this.Vt(i)):"arrayValue"in e?(this.wt(e.arrayValue,i),this.Vt(i)):fail()}Rt(e,i){this.Et(i,25),this.St(e,i)}St(e,i){i.At(e)}yt(e,i){let s=e.fields||{};for(let e of(this.Et(i,55),Object.keys(s)))this.Rt(e,i),this.It(s[e],i)}wt(e,i){let s=e.values||[];for(let e of(this.Et(i,50),s))this.It(e,i)}gt(e,i){this.Et(i,37),DocumentKey.fromName(e).path.forEach(e=>{this.Et(i,60),this.St(e,i)})}Et(e,i){e.dt(i)}Vt(e){e.dt(2)}};__PRIVATE_FirestoreIndexValueWriter.bt=new __PRIVATE_FirestoreIndexValueWriter;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryIndexManager=class __PRIVATE_MemoryIndexManager{constructor(){this._n=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,i){return this._n.add(i),PersistencePromise.resolve()}getCollectionParents(e,i){return PersistencePromise.resolve(this._n.getEntries(i))}addFieldIndex(e,i){return PersistencePromise.resolve()}deleteFieldIndex(e,i){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,i){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,i){return PersistencePromise.resolve(null)}getIndexType(e,i){return PersistencePromise.resolve(0)}getFieldIndexes(e,i){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,i){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,i){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,i,s){return PersistencePromise.resolve()}updateIndexEntries(e,i){return PersistencePromise.resolve()}};let __PRIVATE_MemoryCollectionParentIndex=class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){let i=e.lastSegment(),s=e.popLast(),o=this.index[i]||new SortedSet(ResourcePath.comparator),l=!o.has(s);return this.index[i]=o.add(s),l}has(e){let i=e.lastSegment(),s=e.popLast(),o=this.index[i];return o&&o.has(s)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}};new Uint8Array(0);let LruParams=class LruParams{constructor(e,i,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(41943040,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_TargetIdGenerator=class __PRIVATE_TargetIdGenerator{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new __PRIVATE_TargetIdGenerator(0)}static Ln(){return new __PRIVATE_TargetIdGenerator(-1)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RemoteDocumentChangeBuffer=class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();let s=this.changes.get(i);return void 0!==s?PersistencePromise.resolve(s):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OverlayedDocument=class OverlayedDocument{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LocalDocumentsView=class LocalDocumentsView{constructor(e,i,s,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,i){let s=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,i))).next(e=>(null!==s&&__PRIVATE_mutationApplyToLocalView(s.mutation,e,FieldMask.empty(),Timestamp.now()),e))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(i=>this.getLocalViewOfDocuments(e,i,__PRIVATE_documentKeySet()).next(()=>i))}getLocalViewOfDocuments(e,i,s=__PRIVATE_documentKeySet()){let o=__PRIVATE_newDocumentKeyMap();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,s).next(e=>{let i=documentMap();return e.forEach((e,s)=>{i=i.insert(e,s.overlayedDocument)}),i}))}getOverlayedDocuments(e,i){let s=__PRIVATE_newDocumentKeyMap();return this.populateOverlays(e,s,i).next(()=>this.computeViews(e,i,s,__PRIVATE_documentKeySet()))}populateOverlays(e,i,s){let o=[];return s.forEach(e=>{i.has(e)||o.push(e)}),this.documentOverlayCache.getOverlays(e,o).next(e=>{e.forEach((e,s)=>{i.set(e,s)})})}computeViews(e,i,s,o){let l=e_,h=__PRIVATE_newDocumentKeyMap(),d=__PRIVATE_newDocumentKeyMap();return i.forEach((e,i)=>{let d=s.get(i.key);o.has(i.key)&&(void 0===d||d.mutation instanceof __PRIVATE_PatchMutation)?l=l.insert(i.key,i):void 0!==d?(h.set(i.key,d.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(d.mutation,i,d.mutation.getFieldMask(),Timestamp.now())):h.set(i.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,l).next(e=>(e.forEach((e,i)=>h.set(e,i)),i.forEach((e,i)=>{var s;return d.set(e,new OverlayedDocument(i,null!==(s=h.get(e))&&void 0!==s?s:null))}),d))}recalculateAndSaveOverlays(e,i){let s=__PRIVATE_newDocumentKeyMap(),o=new SortedMap((e,i)=>e-i),l=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(e=>{for(let l of e)l.keys().forEach(e=>{let h=i.get(e);if(null===h)return;let d=s.get(e)||FieldMask.empty();d=l.applyToLocalView(h,d),s.set(e,d);let f=(o.get(l.batchId)||__PRIVATE_documentKeySet()).add(e);o=o.insert(l.batchId,f)})}).next(()=>{let h=[],d=o.getReverseIterator();for(;d.hasNext();){let o=d.getNext(),f=o.key,g=o.value,_=__PRIVATE_newDocumentKeyMap();g.forEach(e=>{if(!l.has(e)){let o=__PRIVATE_calculateOverlayMutation(i.get(e),s.get(e));null!==o&&_.set(e,o),l=l.add(e)}}),h.push(this.documentOverlayCache.saveOverlays(e,f,_))}return PersistencePromise.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,i,s,o){return DocumentKey.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,i.path):null!==i.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(e,i,s,o):this.getDocumentsMatchingCollectionQuery(e,i,s,o)}getNextDocuments(e,i,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,s,o).next(l=>{let h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,s.largestBatchId,o-l.size):PersistencePromise.resolve(__PRIVATE_newDocumentKeyMap()),d=-1,f=l;return h.next(i=>PersistencePromise.forEach(i,(i,s)=>(d<s.largestBatchId&&(d=s.largestBatchId),l.get(i)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,i).next(e=>{f=f.insert(i,e)}))).next(()=>this.populateOverlays(e,i,l)).next(()=>this.computeViews(e,f,i,__PRIVATE_documentKeySet())).next(e=>({batchId:d,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(e)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new DocumentKey(i)).next(e=>{let i=documentMap();return e.isFoundDocument()&&(i=i.insert(e.key,e)),i})}getDocumentsMatchingCollectionGroupQuery(e,i,s,o){let l=i.collectionGroup,h=documentMap();return this.indexManager.getCollectionParents(e,l).next(d=>PersistencePromise.forEach(d,d=>{var f;let g=(f=d.child(l),new __PRIVATE_QueryImpl(f,null,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(e=>{e.forEach((e,i)=>{h=h.insert(e,i)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,i,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,s,l,o))).next(e=>{l.forEach((i,s)=>{let o=s.getKey();null===e.get(o)&&(e=e.insert(o,MutableDocument.newInvalidDocument(o)))});let s=documentMap();return e.forEach((e,o)=>{let h=l.get(e);void 0!==h&&__PRIVATE_mutationApplyToLocalView(h.mutation,o,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(i,o)&&(s=s.insert(e,o))}),s})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryBundleCache=class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,i){return PersistencePromise.resolve(this.cr.get(i))}saveBundleMetadata(e,i){return this.cr.set(i.id,{id:i.id,version:i.version,createTime:__PRIVATE_fromVersion(i.createTime)}),PersistencePromise.resolve()}getNamedQuery(e,i){return PersistencePromise.resolve(this.lr.get(i))}saveNamedQuery(e,i){return this.lr.set(i.name,{name:i.name,query:function(e){let i=function(e){var i,s,o,l,h,d,f,g;let _,b=function(e){let i=function(e){let i=ResourcePath.fromString(e);return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)||fail(),i}(e);return 4===i.length?ResourcePath.emptyPath():(i.length>4&&"documents"===i.get(4)||fail(),i.popFirst(5))}(e.parent),w=e.structuredQuery,k=w.from?w.from.length:0,O=null;if(k>0){1===k||fail();let e=w.from[0];e.allDescendants?O=e.collectionId:b=b.child(e.collectionId)}let j=[];w.where&&(j=function(e){var i;let s=function __PRIVATE_fromFilter(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let l=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(l,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(e):void 0!==e.fieldFilter?FieldFilter.create(__PRIVATE_fromFieldPathReference(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==e.compositeFilter?CompositeFilter.create(e.compositeFilter.filters.map(e=>__PRIVATE_fromFilter(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fail()}}(e.compositeFilter.op)):fail()}(e);return s instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlat(i=s)&&__PRIVATE_compositeFilterIsConjunction(i)?s.getFilters():[s]}(w.where));let $=[];w.orderBy&&($=w.orderBy.map(e=>new OrderBy(__PRIVATE_fromFieldPathReference(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let q=null;w.limit&&(q=null==(_="object"==typeof(i=w.limit)?i.value:i)?null:_);let ee=null;w.startAt&&(ee=function(e){let i=!!e.before,s=e.values||[];return new Bound(s,i)}(w.startAt));let et=null;return w.endAt&&(et=function(e){let i=!e.before,s=e.values||[];return new Bound(s,i)}(w.endAt)),s=b,o=O,l=$,h=j,d=q,f=ee,g=et,new __PRIVATE_QueryImpl(s,o,l,h,d,"F",f,g)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?__PRIVATE_queryWithLimit(i,i.limit,"L"):i}(i.bundledQuery),readTime:__PRIVATE_fromVersion(i.readTime)}),PersistencePromise.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryDocumentOverlayCache=class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.hr=new Map}getOverlay(e,i){return PersistencePromise.resolve(this.overlays.get(i))}getOverlays(e,i){let s=__PRIVATE_newDocumentKeyMap();return PersistencePromise.forEach(i,i=>this.getOverlay(e,i).next(e=>{null!==e&&s.set(i,e)})).next(()=>s)}saveOverlays(e,i,s){return s.forEach((s,o)=>{this.ht(e,i,o)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,i,s){let o=this.hr.get(s);return void 0!==o&&(o.forEach(e=>this.overlays=this.overlays.remove(e)),this.hr.delete(s)),PersistencePromise.resolve()}getOverlaysForCollection(e,i,s){let o=__PRIVATE_newDocumentKeyMap(),l=i.length+1,h=new DocumentKey(i.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){let e=d.getNext().value,h=e.getKey();if(!i.isPrefixOf(h.path))break;h.path.length===l&&e.largestBatchId>s&&o.set(e.getKey(),e)}return PersistencePromise.resolve(o)}getOverlaysForCollectionGroup(e,i,s,o){let l=new SortedMap((e,i)=>e-i),h=this.overlays.getIterator();for(;h.hasNext();){let e=h.getNext().value;if(e.getKey().getCollectionGroup()===i&&e.largestBatchId>s){let i=l.get(e.largestBatchId);null===i&&(i=__PRIVATE_newDocumentKeyMap(),l=l.insert(e.largestBatchId,i)),i.set(e.getKey(),e)}}let d=__PRIVATE_newDocumentKeyMap(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((e,i)=>d.set(e,i)),!(d.size()>=o)););return PersistencePromise.resolve(d)}ht(e,i,s){let o=this.overlays.get(s.key);if(null!==o){let e=this.hr.get(o.largestBatchId).delete(s.key);this.hr.set(o.largestBatchId,e)}this.overlays=this.overlays.insert(s.key,new Overlay(i,s));let l=this.hr.get(i);void 0===l&&(l=__PRIVATE_documentKeySet(),this.hr.set(i,l)),this.hr.set(i,l.add(s.key))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_ReferenceSet=class __PRIVATE_ReferenceSet{constructor(){this.Pr=new SortedSet(__PRIVATE_DocReference.Ir),this.Tr=new SortedSet(__PRIVATE_DocReference.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,i){let s=new __PRIVATE_DocReference(e,i);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,i){e.forEach(e=>this.addReference(e,i))}removeReference(e,i){this.Ar(new __PRIVATE_DocReference(e,i))}Rr(e,i){e.forEach(e=>this.removeReference(e,i))}Vr(e){let i=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(i,e),o=new __PRIVATE_DocReference(i,e+1),l=[];return this.Tr.forEachInRange([s,o],e=>{this.Ar(e),l.push(e.key)}),l}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let i=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(i,e),o=new __PRIVATE_DocReference(i,e+1),l=__PRIVATE_documentKeySet();return this.Tr.forEachInRange([s,o],e=>{l=l.add(e.key)}),l}containsKey(e){let i=new __PRIVATE_DocReference(e,0),s=this.Pr.firstAfterOrEqual(i);return null!==s&&e.isEqual(s.key)}};let __PRIVATE_DocReference=class __PRIVATE_DocReference{constructor(e,i){this.key=e,this.pr=i}static Ir(e,i){return DocumentKey.comparator(e.key,i.key)||__PRIVATE_primitiveComparator(e.pr,i.pr)}static Er(e,i){return __PRIVATE_primitiveComparator(e.pr,i.pr)||DocumentKey.comparator(e.key,i.key)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryMutationQueue=class __PRIVATE_MemoryMutationQueue{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.yr=1,this.wr=new SortedSet(__PRIVATE_DocReference.Ir)}checkEmpty(e){return PersistencePromise.resolve(0===this.mutationQueue.length)}addMutationBatch(e,i,s,o){let l=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let h=new MutationBatch(l,i,s,o);for(let i of(this.mutationQueue.push(h),o))this.wr=this.wr.add(new __PRIVATE_DocReference(i.key,l)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return PersistencePromise.resolve(h)}lookupMutationBatch(e,i){return PersistencePromise.resolve(this.Sr(i))}getNextMutationBatchAfterBatchId(e,i){let s=this.br(i+1),o=s<0?0:s;return PersistencePromise.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){let s=new __PRIVATE_DocReference(i,0),o=new __PRIVATE_DocReference(i,Number.POSITIVE_INFINITY),l=[];return this.wr.forEachInRange([s,o],e=>{let i=this.Sr(e.pr);l.push(i)}),PersistencePromise.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,i){let s=new SortedSet(__PRIVATE_primitiveComparator);return i.forEach(e=>{let i=new __PRIVATE_DocReference(e,0),o=new __PRIVATE_DocReference(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],e=>{s=s.add(e.pr)})}),PersistencePromise.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,i){let s=i.path,o=s.length+1,l=s;DocumentKey.isDocumentKey(l)||(l=l.child(""));let h=new __PRIVATE_DocReference(new DocumentKey(l),0),d=new SortedSet(__PRIVATE_primitiveComparator);return this.wr.forEachWhile(e=>{let i=e.key.path;return!!s.isPrefixOf(i)&&(i.length===o&&(d=d.add(e.pr)),!0)},h),PersistencePromise.resolve(this.Dr(d))}Dr(e){let i=[];return e.forEach(e=>{let s=this.Sr(e);null!==s&&i.push(s)}),i}removeMutationBatch(e,i){0===this.Cr(i.batchId,"removed")||fail(),this.mutationQueue.shift();let s=this.wr;return PersistencePromise.forEach(i.mutations,o=>{let l=new __PRIVATE_DocReference(o.key,i.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,i){let s=new __PRIVATE_DocReference(i,0),o=this.wr.firstAfterOrEqual(s);return PersistencePromise.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}Cr(e,i){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){let i=this.br(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryRemoteDocumentCacheImpl=class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.vr=e,this.docs=new SortedMap(DocumentKey.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){let s=i.key,o=this.docs.get(s),l=o?o.size:0,h=this.vr(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){let i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){let s=this.docs.get(i);return PersistencePromise.resolve(s?s.document.mutableCopy():MutableDocument.newInvalidDocument(i))}getEntries(e,i){let s=e_;return i.forEach(e=>{let i=this.docs.get(e);s=s.insert(e,i?i.document.mutableCopy():MutableDocument.newInvalidDocument(e))}),PersistencePromise.resolve(s)}getDocumentsMatchingQuery(e,i,s,o){let l=e_,h=i.path,d=new DocumentKey(h.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){let{key:e,value:{document:d}}=f.getNext();if(!h.isPrefixOf(e.path))break;e.path.length>h.length+1||0>=function(e,i){let s=e.readTime.compareTo(i.readTime);return 0!==s?s:0!==(s=DocumentKey.comparator(e.documentKey,i.documentKey))?s:__PRIVATE_primitiveComparator(e.largestBatchId,i.largestBatchId)}(new IndexOffset(d.readTime,d.key,-1),s)||(o.has(d.key)||__PRIVATE_queryMatches(i,d))&&(l=l.insert(d.key,d.mutableCopy()))}return PersistencePromise.resolve(l)}getAllFromCollectionGroup(e,i,s,o){fail()}Fr(e,i){return PersistencePromise.forEach(this.docs,e=>i(e))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}};let __PRIVATE_MemoryRemoteDocumentChangeBuffer=class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.ar=e}applyChanges(e){let i=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?i.push(this.ar.addEntry(e,o)):this.ar.removeEntry(s)}),PersistencePromise.waitFor(i)}getFromCache(e,i){return this.ar.getEntry(e,i)}getAllFromCache(e,i){return this.ar.getEntries(e,i)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryTargetCache=class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.Mr=new ObjectMap(e=>__PRIVATE_canonifyTarget(e),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Or=0,this.Nr=new __PRIVATE_ReferenceSet,this.targetCount=0,this.Lr=__PRIVATE_TargetIdGenerator.Nn()}forEachTarget(e,i){return this.Mr.forEach((e,s)=>i(s)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.Or&&(this.Or=i),PersistencePromise.resolve()}qn(e){this.Mr.set(e.target,e);let i=e.targetId;i>this.highestTargetId&&(this.Lr=new __PRIVATE_TargetIdGenerator(i),this.highestTargetId=i),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,i){return this.qn(i),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,i){return this.qn(i),PersistencePromise.resolve()}removeTargetData(e,i){return this.Mr.delete(i.target),this.Nr.Vr(i.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,i,s){let o=0,l=[];return this.Mr.forEach((h,d)=>{d.sequenceNumber<=i&&null===s.get(d.targetId)&&(this.Mr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),PersistencePromise.waitFor(l).next(()=>o)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,i){let s=this.Mr.get(i)||null;return PersistencePromise.resolve(s)}addMatchingKeys(e,i,s){return this.Nr.dr(i,s),PersistencePromise.resolve()}removeMatchingKeys(e,i,s){this.Nr.Rr(i,s);let o=this.persistence.referenceDelegate,l=[];return o&&i.forEach(i=>{l.push(o.markPotentiallyOrphaned(e,i))}),PersistencePromise.waitFor(l)}removeMatchingKeysForTargetId(e,i){return this.Nr.Vr(i),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,i){let s=this.Nr.gr(i);return PersistencePromise.resolve(s)}containsKey(e,i){return PersistencePromise.resolve(this.Nr.containsKey(i))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_MemoryPersistence=class __PRIVATE_MemoryPersistence{constructor(e,i){this.Br={},this.overlays={},this.kr=new __PRIVATE_ListenSequence(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=new __PRIVATE_MemoryRemoteDocumentCacheImpl(e=>this.referenceDelegate.Kr(e)),this.serializer=new __PRIVATE_LocalSerializer(i),this.$r=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let s=this.Br[e.toKey()];return s||(s=new __PRIVATE_MemoryMutationQueue(i,this.referenceDelegate),this.Br[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,i,s){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);let o=new __PRIVATE_MemoryTransaction(this.kr.next());return this.referenceDelegate.Ur(),s(o).next(e=>this.referenceDelegate.Wr(o).next(()=>e)).toPromise().then(e=>(o.raiseOnCommittedEvent(),e))}Gr(e,i){return PersistencePromise.or(Object.values(this.Br).map(s=>()=>s.containsKey(e,i)))}};let __PRIVATE_MemoryTransaction=class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}};let __PRIVATE_MemoryEagerDelegate=class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.zr=new __PRIVATE_ReferenceSet,this.jr=null}static Hr(e){return new __PRIVATE_MemoryEagerDelegate(e)}get Jr(){if(this.jr)return this.jr;throw fail()}addReference(e,i,s){return this.zr.addReference(s,i),this.Jr.delete(s.toString()),PersistencePromise.resolve()}removeReference(e,i,s){return this.zr.removeReference(s,i),this.Jr.add(s.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,i){return this.Jr.add(i.toString()),PersistencePromise.resolve()}removeTarget(e,i){this.zr.Vr(i.targetId).forEach(e=>this.Jr.add(e.toString()));let s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,i.targetId).next(e=>{e.forEach(e=>this.Jr.add(e.toString()))}).next(()=>s.removeTargetData(e,i))}Ur(){this.jr=new Set}Wr(e){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Jr,s=>{let o=DocumentKey.fromPath(s);return this.Yr(e,o).next(e=>{e||i.removeEntry(o,SnapshotVersion.min())})}).next(()=>(this.jr=null,i.apply(e)))}updateLimboDocument(e,i){return this.Yr(e,i).next(e=>{e?this.Jr.delete(i.toString()):this.Jr.add(i.toString())})}Kr(e){return 0}Yr(e,i){return PersistencePromise.or([()=>PersistencePromise.resolve(this.zr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Gr(e,i)])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_LocalViewChanges=class __PRIVATE_LocalViewChanges{constructor(e,i,s,o){this.targetId=e,this.fromCache=i,this.qi=s,this.Qi=o}static Ki(e,i){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();for(let e of i.docChanges)switch(e.type){case 0:s=s.add(e.doc.key);break;case 1:o=o.add(e.doc.key)}return new __PRIVATE_LocalViewChanges(e,i.fromCache,s,o)}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QueryContext=class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_QueryEngine=class __PRIVATE_QueryEngine{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,en.G6)()?8:function(e){let i=e.match(/Android ([\d.]+)/i),s=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(s)}((0,en.z$)())>0?6:4}initialize(e,i){this.zi=e,this.indexManager=i,this.$i=!0}getDocumentsMatchingQuery(e,i,s,o){let l={result:null};return this.ji(e,i).next(e=>{l.result=e}).next(()=>{if(!l.result)return this.Hi(e,i,o,s).next(e=>{l.result=e})}).next(()=>{if(l.result)return;let s=new QueryContext;return this.Ji(e,i,s).next(o=>{if(l.result=o,this.Ui)return this.Yi(e,i,s,o.size)})}).next(()=>l.result)}Yi(e,i,s,o){return s.documentReadCount<this.Wi?(__PRIVATE_getLogLevel()<=er.in.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=er.in.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(i),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Gi*o?(__PRIVATE_getLogLevel()<=er.in.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(i))):PersistencePromise.resolve())}ji(e,i){if(__PRIVATE_queryMatchesAllDocuments(i))return PersistencePromise.resolve(null);let s=__PRIVATE_queryToTarget(i);return this.indexManager.getIndexType(e,s).next(o=>0===o?null:(null!==i.limit&&1===o&&(s=__PRIVATE_queryToTarget(i=__PRIVATE_queryWithLimit(i,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{let l=__PRIVATE_documentKeySet(...o);return this.zi.getDocuments(e,l).next(o=>this.indexManager.getMinOffset(e,s).next(s=>{let h=this.Zi(i,o);return this.Xi(i,h,l,s.readTime)?this.ji(e,__PRIVATE_queryWithLimit(i,null,"F")):this.es(e,h,i,s)}))})))}Hi(e,i,s,o){return __PRIVATE_queryMatchesAllDocuments(i)||o.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.zi.getDocuments(e,s).next(l=>{let h=this.Zi(i,l);return this.Xi(i,h,s,o)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=er.in.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),__PRIVATE_stringifyQuery(i)),this.es(e,h,i,function(e,i){let s=e.toTimestamp().seconds,o=e.toTimestamp().nanoseconds+1,l=SnapshotVersion.fromTimestamp(1e9===o?new Timestamp(s+1,0):new Timestamp(s,o));return new IndexOffset(l,DocumentKey.empty(),-1)}(o,0)).next(e=>e))})}Zi(e,i){let s=new SortedSet((i,s)=>{let o=!1;for(let l of __PRIVATE_queryNormalizedOrderBy(e)){let e=function(e,i,s){let o=e.field.isKeyField()?DocumentKey.comparator(i.key,s.key):function(e,i,s){let o=i.data.field(e),l=s.data.field(e);return null!==o&&null!==l?__PRIVATE_valueCompare(o,l):fail()}(e.field,i,s);switch(e.dir){case"asc":return o;case"desc":return -1*o;default:return fail()}}(l,i,s);if(0!==e)return e;o=o||l.field.isKeyField()}return 0});return i.forEach((i,o)=>{__PRIVATE_queryMatches(e,o)&&(s=s.add(o))}),s}Xi(e,i,s,o){if(null===e.limit)return!1;if(s.size!==i.size)return!0;let l="F"===e.limitType?i.last():i.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ji(e,i,s){return __PRIVATE_getLogLevel()<=er.in.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(i)),this.zi.getDocumentsMatchingQuery(e,i,IndexOffset.min(),s)}es(e,i,s,o){return this.zi.getDocumentsMatchingQuery(e,s,o).next(e=>(i.forEach(i=>{e=e.insert(i.key,i)}),e))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_LocalStoreImpl=class __PRIVATE_LocalStoreImpl{constructor(e,i,s,o){this.persistence=e,this.ts=i,this.serializer=o,this.ns=new SortedMap(__PRIVATE_primitiveComparator),this.rs=new ObjectMap(e=>__PRIVATE_canonifyTarget(e),__PRIVATE_targetEquals),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.ns))}};async function __PRIVATE_localStoreHandleUserChange(e,i){return await e.persistence.runTransaction("Handle user change","readonly",s=>{let o;return e.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,e._s(i),e.mutationQueue.getAllMutationBatches(s))).next(i=>{let l=[],h=[],d=__PRIVATE_documentKeySet();for(let e of o)for(let i of(l.push(e.batchId),e.mutations))d=d.add(i.key);for(let e of i)for(let i of(h.push(e.batchId),e.mutations))d=d.add(i.key);return e.localDocuments.getDocuments(s,d).next(e=>({us:e,removedBatchIds:l,addedBatchIds:h}))})})}let __PRIVATE_LocalClientState=class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=eE}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};let __PRIVATE_MemorySharedClientState=class __PRIVATE_MemorySharedClientState{constructor(){this.no=new __PRIVATE_LocalClientState,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,i,s){this.ro[e]=i}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,i,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_NoopConnectivityMonitor=class __PRIVATE_NoopConnectivityMonitor{io(e){}shutdown(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_BrowserConnectivityMonitor=class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){for(let e of(__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.uo))e(0)}ao(){for(let e of(__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.uo))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eT=null;function __PRIVATE_generateUniqueDebugId(){return null===eT?eT=268435456+Math.round(2147483648*Math.random()):eT++,"0x"+eT.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_StreamBridge=class __PRIVATE_StreamBridge{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eP="WebChannelConnection";let __PRIVATE_WebChannelConnection=class __PRIVATE_WebChannelConnection extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${s}/databases/${o}`,this.bo="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Do(){return!1}Co(e,i,s,o,l){let h=__PRIVATE_generateUniqueDebugId(),d=this.vo(e,i.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${e}' ${h}:`,d,s);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,l),this.Mo(e,d,f,s).then(i=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${e}' ${h}: `,i),i),i=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${e}' ${h} failed with error: `,i,"url: ",d,"request:",s),i})}xo(e,i,s,o,l,h){return this.Co(e,i,s,o,l)}Fo(e,i,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((i,s)=>e[s]=i),s&&s.headers.forEach((i,s)=>e[s]=i)}vo(e,i){let s=eA[e];return`${this.wo}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,i,s,o){let h=__PRIVATE_generateUniqueDebugId();return new Promise((d,_)=>{let b=new l;b.setWithCredentials(!0),b.listenOnce(f.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case g.NO_ERROR:let i=b.getResponseJson();__PRIVATE_logDebug(eP,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(i)),d(i);break;case g.TIMEOUT:__PRIVATE_logDebug(eP,`RPC '${e}' ${h} timed out`),_(new FirestoreError(ef.DEADLINE_EXCEEDED,"Request time out"));break;case g.HTTP_ERROR:let s=b.getStatus();if(__PRIVATE_logDebug(eP,`RPC '${e}' ${h} failed with status:`,s,"response text:",b.getResponseText()),s>0){let e=b.getResponseJson();Array.isArray(e)&&(e=e[0]);let i=null==e?void 0:e.error;if(i&&i.status&&i.message){let e=function(e){let i=e.toLowerCase().replace(/_/g,"-");return Object.values(ef).indexOf(i)>=0?i:ef.UNKNOWN}(i.status);_(new FirestoreError(e,i.message))}else _(new FirestoreError(ef.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new FirestoreError(ef.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(eP,`RPC '${e}' ${h} completed.`)}});let w=JSON.stringify(o);__PRIVATE_logDebug(eP,`RPC '${e}' ${h} sending request:`,o),b.send(i,"POST",w,s,15)})}Oo(e,i,s){let o=__PRIVATE_generateUniqueDebugId(),l=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=k(),g=w(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},$=this.longPollingOptions.timeoutSeconds;void 0!==$&&(j.longPollingTimeout=Math.round(1e3*$)),this.useFetchStreams&&(j.xmlHttpFactory=new h({})),this.Fo(j.initMessageHeaders,i,s),j.encodeInitMessageHeaders=!0;let q=l.join("");__PRIVATE_logDebug(eP,`Creating RPC '${e}' stream ${o}: ${q}`,j);let ee=f.createWebChannel(q,j),et=!1,er=!1,en=new __PRIVATE_StreamBridge({lo:i=>{er?__PRIVATE_logDebug(eP,`Not sending because RPC '${e}' stream ${o} is closed:`,i):(et||(__PRIVATE_logDebug(eP,`Opening RPC '${e}' stream ${o} transport.`),ee.open(),et=!0),__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} sending:`,i),ee.send(i))},ho:()=>ee.close()}),__PRIVATE_unguardedEventListen=(e,i,s)=>{e.listen(i,e=>{try{s(e)}catch(e){setTimeout(()=>{throw e},0)}})};return __PRIVATE_unguardedEventListen(ee,d.EventType.OPEN,()=>{er||(__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} transport opened.`),en.mo())}),__PRIVATE_unguardedEventListen(ee,d.EventType.CLOSE,()=>{er||(er=!0,__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} transport closed`),en.po())}),__PRIVATE_unguardedEventListen(ee,d.EventType.ERROR,i=>{er||(er=!0,__PRIVATE_logWarn(eP,`RPC '${e}' stream ${o} transport errored:`,i),en.po(new FirestoreError(ef.UNAVAILABLE,"The operation could not be completed")))}),__PRIVATE_unguardedEventListen(ee,d.EventType.MESSAGE,i=>{var s;if(!er){let l=i.data[0];l||fail();let h=l.error||(null===(s=l[0])||void 0===s?void 0:s.error);if(h){__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} received error:`,h);let i=h.status,s=function(e){let i=O[e];if(void 0!==i)return function(e){if(void 0===e)return __PRIVATE_logError("GRPC error has no .code"),ef.UNKNOWN;switch(e){case O.OK:return ef.OK;case O.CANCELLED:return ef.CANCELLED;case O.UNKNOWN:return ef.UNKNOWN;case O.DEADLINE_EXCEEDED:return ef.DEADLINE_EXCEEDED;case O.RESOURCE_EXHAUSTED:return ef.RESOURCE_EXHAUSTED;case O.INTERNAL:return ef.INTERNAL;case O.UNAVAILABLE:return ef.UNAVAILABLE;case O.UNAUTHENTICATED:return ef.UNAUTHENTICATED;case O.INVALID_ARGUMENT:return ef.INVALID_ARGUMENT;case O.NOT_FOUND:return ef.NOT_FOUND;case O.ALREADY_EXISTS:return ef.ALREADY_EXISTS;case O.PERMISSION_DENIED:return ef.PERMISSION_DENIED;case O.FAILED_PRECONDITION:return ef.FAILED_PRECONDITION;case O.ABORTED:return ef.ABORTED;case O.OUT_OF_RANGE:return ef.OUT_OF_RANGE;case O.UNIMPLEMENTED:return ef.UNIMPLEMENTED;case O.DATA_LOSS:return ef.DATA_LOSS;default:return fail()}}(i)}(i),l=h.message;void 0===s&&(s=ef.INTERNAL,l="Unknown error status: "+i+" with message "+h.message),er=!0,en.po(new FirestoreError(s,l)),ee.close()}else __PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} received:`,l),en.yo(l)}}),__PRIVATE_unguardedEventListen(g,b.STAT_EVENT,i=>{i.stat===_.PROXY?__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} detected buffering proxy`):i.stat===_.NOPROXY&&__PRIVATE_logDebug(eP,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{en.fo()},0),en}};function getDocument(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(e){return new JsonProtoSerializer(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_ExponentialBackoff=class __PRIVATE_ExponentialBackoff{constructor(e,i,s=1e3,o=1.5,l=6e4){this.oi=e,this.timerId=i,this.No=s,this.Lo=o,this.Bo=l,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let i=Math.floor(this.ko+this.Uo()),s=Math.max(0,Date.now()-this.Qo),o=Math.max(0,i-s);o>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.ko} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,o,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_PersistentStream=class __PRIVATE_PersistentStream{constructor(e,i,s,o,l,h,d,f){this.oi=e,this.Go=s,this.zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new __PRIVATE_ExponentialBackoff(e,i)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,i){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():i&&i.code===ef.RESOURCE_EXHAUSTED?(__PRIVATE_logError(i.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):i&&i.code===ef.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(i)}__(){}auth(){this.state=1;let e=this.a_(this.jo),i=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,s])=>{this.jo===i&&this.u_(e,s)},i=>{e(()=>{let e=new FirestoreError(ef.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(e)})})}u_(e,i){let s=this.a_(this.jo);this.stream=this.l_(e,i),this.stream.Po(()=>{s(()=>this.listener.Po())}),this.stream.To(()=>{s(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(e=>{s(()=>this.c_(e))}),this.stream.onMessage(e=>{s(()=>this.onMessage(e))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return __PRIVATE_logDebug("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return i=>{this.oi.enqueueAndForget(()=>this.jo===e?i():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};let __PRIVATE_PersistentWriteStream=class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,i,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,o,h),this.serializer=l,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,i){return this.connection.Oo("Write",e,i)}onMessage(e){var i,s;if(e.streamToken||fail(),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let o=(i=e.writeResults,s=e.commitTime,i&&i.length>0?(void 0!==s||fail(),i.map(e=>{let i;return(i=e.updateTime?__PRIVATE_fromVersion(e.updateTime):__PRIVATE_fromVersion(s)).isEqual(SnapshotVersion.min())&&(i=__PRIVATE_fromVersion(s)),new MutationResult(i,e.transformResults||[])})):[]),l=__PRIVATE_fromVersion(e.commitTime);return this.listener.A_(l,o)}return e.writeResults&&0!==e.writeResults.length&&fail(),this.T_=!0,this.listener.R_()}V_(){var e;let i={};i.database=(e=this.serializer,new ResourcePath(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()),this.i_(i)}d_(e){let i={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,i){var s;let o;if(i instanceof __PRIVATE_SetMutation)o={update:__PRIVATE_toMutationDocument(e,i.key,i.value)};else if(i instanceof __PRIVATE_DeleteMutation)o={delete:__PRIVATE_toName(e,i.key)};else if(i instanceof __PRIVATE_PatchMutation)o={update:__PRIVATE_toMutationDocument(e,i.key,i.data),updateMask:function(e){let i=[];return e.fields.forEach(e=>i.push(e.canonicalString())),{fieldPaths:i}}(i.fieldMask)};else{if(!(i instanceof __PRIVATE_VerifyMutation))return fail();o={verify:__PRIVATE_toName(e,i.key)}}return i.fieldTransforms.length>0&&(o.updateTransforms=i.fieldTransforms.map(e=>(function(e,i){let s=i.transform;if(s instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:i.field.canonicalString(),increment:s.Pe};throw fail()})(0,e))),i.precondition.isNone||(o.currentDocument=void 0!==(s=i.precondition).updateTime?{updateTime:toTimestamp(e,s.updateTime.toTimestamp())}:void 0!==s.exists?{exists:s.exists}:fail()),o})(this.serializer,e))};this.i_(i)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_DatastoreImpl=class __PRIVATE_DatastoreImpl extends class{}{constructor(e,i,s,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=s,this.serializer=o,this.m_=!1}f_(){if(this.m_)throw new FirestoreError(ef.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,i,s,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Co(e,__PRIVATE_toResourcePath(i,s),o,l,h)).catch(e=>{throw"FirebaseError"===e.name?(e.code===ef.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new FirestoreError(ef.UNKNOWN,e.toString())})}xo(e,i,s,o,l){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.xo(e,__PRIVATE_toResourcePath(i,s),o,h,d,l)).catch(e=>{throw"FirebaseError"===e.name?(e.code===ef.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new FirestoreError(ef.UNKNOWN,e.toString())})}terminate(){this.m_=!0,this.connection.terminate()}};let __PRIVATE_OnlineStateTracker=class __PRIVATE_OnlineStateTracker{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(__PRIVATE_logError(i),this.y_=!1):__PRIVATE_logDebug("OnlineStateTracker",i)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_RemoteStoreImpl=class __PRIVATE_RemoteStoreImpl{constructor(e,i,s,o,l){this.localStore=e,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=l,this.O_.io(e=>{s.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.M_.add(4),await __PRIVATE_disableNetworkInternal(e),e.N_.set("Unknown"),e.M_.delete(4),await __PRIVATE_enableNetworkInternal(e)}(this))})}),this.N_=new __PRIVATE_OnlineStateTracker(s,o)}};async function __PRIVATE_enableNetworkInternal(e){if(__PRIVATE_canUseNetwork(e))for(let i of e.x_)await i(!0)}async function __PRIVATE_disableNetworkInternal(e){for(let i of e.x_)await i(!1)}function __PRIVATE_canUseNetwork(e){return 0===e.M_.size}async function __PRIVATE_disableNetworkUntilRecovery(e,i,s){if(!__PRIVATE_isIndexedDbTransactionError(i))throw i;e.M_.add(1),await __PRIVATE_disableNetworkInternal(e),e.N_.set("Offline"),s||(s=()=>{var i;return(i=e.localStore).persistence.runTransaction("Get last remote snapshot version","readonly",e=>i.Qr.getLastRemoteSnapshotVersion(e))}),e.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await s(),e.M_.delete(1),await __PRIVATE_enableNetworkInternal(e)})}function __PRIVATE_executeWithRecovery(e,i){return i().catch(s=>__PRIVATE_disableNetworkUntilRecovery(e,s,i))}async function __PRIVATE_fillWritePipeline(e){let i=__PRIVATE_ensureWriteStream(e),s=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;__PRIVATE_canUseNetwork(e)&&e.v_.length<10;)try{let o=await function(e,i){return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===i&&(i=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(s,i)))}(e.localStore,s);if(null===o){0===e.v_.length&&i.n_();break}s=o.batchId,function(e,i){e.v_.push(i);let s=__PRIVATE_ensureWriteStream(e);s.Xo()&&s.E_&&s.d_(i.mutations)}(e,o)}catch(i){await __PRIVATE_disableNetworkUntilRecovery(e,i)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_shouldStartWriteStream(e){return __PRIVATE_canUseNetwork(e)&&!__PRIVATE_ensureWriteStream(e).Zo()&&e.v_.length>0}function __PRIVATE_startWriteStream(e){__PRIVATE_ensureWriteStream(e).start()}async function __PRIVATE_onWriteStreamOpen(e){__PRIVATE_ensureWriteStream(e).V_()}async function __PRIVATE_onWriteHandshakeComplete(e){let i=__PRIVATE_ensureWriteStream(e);for(let s of e.v_)i.d_(s.mutations)}async function __PRIVATE_onMutationResult(e,i,s){let o=e.v_.shift(),l=MutationBatchResult.from(o,i,s);await __PRIVATE_executeWithRecovery(e,()=>e.remoteSyncer.applySuccessfulWrite(l)),await __PRIVATE_fillWritePipeline(e)}async function __PRIVATE_onWriteStreamClose(e,i){i&&__PRIVATE_ensureWriteStream(e).E_&&await async function(e,i){var s;if(function(e){switch(e){default:return fail();case ef.CANCELLED:case ef.UNKNOWN:case ef.DEADLINE_EXCEEDED:case ef.RESOURCE_EXHAUSTED:case ef.INTERNAL:case ef.UNAVAILABLE:case ef.UNAUTHENTICATED:return!1;case ef.INVALID_ARGUMENT:case ef.NOT_FOUND:case ef.ALREADY_EXISTS:case ef.PERMISSION_DENIED:case ef.FAILED_PRECONDITION:case ef.ABORTED:case ef.OUT_OF_RANGE:case ef.UNIMPLEMENTED:case ef.DATA_LOSS:return!0}}(s=i.code)&&s!==ef.ABORTED){let s=e.v_.shift();__PRIVATE_ensureWriteStream(e).t_(),await __PRIVATE_executeWithRecovery(e,()=>e.remoteSyncer.rejectFailedWrite(s.batchId,i)),await __PRIVATE_fillWritePipeline(e)}}(e,i),__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}async function __PRIVATE_remoteStoreHandleCredentialChange(e,i){e.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");let s=__PRIVATE_canUseNetwork(e);e.M_.add(3),await __PRIVATE_disableNetworkInternal(e),s&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(i),e.M_.delete(3),await __PRIVATE_enableNetworkInternal(e)}async function __PRIVATE_remoteStoreApplyPrimaryState(e,i){i?(e.M_.delete(2),await __PRIVATE_enableNetworkInternal(e)):i||(e.M_.add(2),await __PRIVATE_disableNetworkInternal(e),e.N_.set("Unknown"))}function __PRIVATE_ensureWriteStream(e){var i,s,o;return e.k_||(e.k_=(i=e.datastore,s=e.asyncQueue,o={Po:()=>Promise.resolve(),To:__PRIVATE_onWriteStreamOpen.bind(null,e),Ao:__PRIVATE_onWriteStreamClose.bind(null,e),R_:__PRIVATE_onWriteHandshakeComplete.bind(null,e),A_:__PRIVATE_onMutationResult.bind(null,e)},i.f_(),new __PRIVATE_PersistentWriteStream(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)),e.x_.push(async i=>{i?(e.k_.t_(),await __PRIVATE_fillWritePipeline(e)):(await e.k_.stop(),e.v_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DelayedOperation=class DelayedOperation{constructor(e,i,s,o,l){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,s,o,l){let h=Date.now()+s,d=new DelayedOperation(e,i,h,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(ef.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function __PRIVATE_wrapInUserErrorIfRecoverable(e,i){if(__PRIVATE_logError("AsyncQueue",`${i}: ${e}`),__PRIVATE_isIndexedDbTransactionError(e))return new FirestoreError(ef.UNAVAILABLE,`${i}: ${e}`);throw e}let __PRIVATE_EventManagerImpl=class __PRIVATE_EventManagerImpl{constructor(){this.queries=new ObjectMap(e=>__PRIVATE_canonifyQuery(e),__PRIVATE_queryEquals),this.onlineState="Unknown",this.z_=new Set}};(q=$||($={})).J_="default",q.Cache="cache";let __PRIVATE_SyncEngineImpl=class __PRIVATE_SyncEngineImpl{constructor(e,i,s,o,l,h){this.localStore=e,this.remoteStore=i,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Sa={},this.ba=new ObjectMap(e=>__PRIVATE_canonifyQuery(e),__PRIVATE_queryEquals),this.Da=new Map,this.Ca=new Set,this.va=new SortedMap(DocumentKey.comparator),this.Fa=new Map,this.Ma=new __PRIVATE_ReferenceSet,this.xa={},this.Oa=new Map,this.Na=__PRIVATE_TargetIdGenerator.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}};async function __PRIVATE_syncEngineWrite(e,i,s){var o;let l=(e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e);try{let e;let h=await function(e,i){let s,o;let l=Timestamp.now(),h=i.reduce((e,i)=>e.add(i.key),__PRIVATE_documentKeySet());return e.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=e_,g=__PRIVATE_documentKeySet();return e.os.getEntries(d,h).next(e=>{(f=e).forEach((e,i)=>{i.isValidDocument()||(g=g.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(d,f)).next(o=>{s=o;let h=[];for(let e of i){let i=function(e,i){let s=null;for(let o of e.fieldTransforms){let e=i.data.field(o.field),l=__PRIVATE_computeTransformOperationBaseValue(o.transform,e||null);null!=l&&(null===s&&(s=ObjectValue.empty()),s.set(o.field,l))}return s||null}(e,s.get(e.key).overlayedDocument);null!=i&&h.push(new __PRIVATE_PatchMutation(e.key,i,function __PRIVATE_extractFieldMask(e){let i=[];return forEach(e.fields,(e,s)=>{let o=new FieldPath$1([e]);if(__PRIVATE_isMapValue(s)){let e=__PRIVATE_extractFieldMask(s.mapValue).fields;if(0===e.length)i.push(o);else for(let s of e)i.push(o.child(s))}else i.push(o)}),new FieldMask(i)}(i.value.mapValue),Precondition.exists(!0)))}return e.mutationQueue.addMutationBatch(d,l,h,i)}).next(i=>{o=i;let l=i.applyToLocalDocumentSet(s,g);return e.documentOverlayCache.saveOverlays(d,i.batchId,l)})}).then(()=>({batchId:o.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(s)}))}(l.localStore,i);l.sharedClientState.addPendingMutation(h.batchId),o=h.batchId,(e=l.xa[l.currentUser.toKey()])||(e=new SortedMap(__PRIVATE_primitiveComparator)),e=e.insert(o,s),l.xa[l.currentUser.toKey()]=e,await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(l,h.changes),await __PRIVATE_fillWritePipeline(l.remoteStore)}catch(i){let e=__PRIVATE_wrapInUserErrorIfRecoverable(i,"Failed to persist write");s.reject(e)}}function __PRIVATE_syncEngineApplyOnlineStateChange(e,i,s){var o;if(e.isPrimaryClient&&0===s||!e.isPrimaryClient&&1===s){let s;let l=[];e.ba.forEach((e,s)=>{let o=s.view.j_(i);o.snapshot&&l.push(o.snapshot)}),(o=e.eventManager).onlineState=i,s=!1,o.queries.forEach((e,o)=>{for(let e of o.U_)e.j_(i)&&(s=!0)}),s&&function(e){e.z_.forEach(e=>{e.next()})}(o),l.length&&e.Sa.h_(l),e.onlineState=i,e.isPrimaryClient&&e.sharedClientState.setOnlineState(i)}}async function __PRIVATE_syncEngineApplySuccessfulWrite(e,i){var s;let o=i.batch.batchId;try{let l=await (s=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let o=i.batch.keys(),l=s.os.newChangeBuffer({trackRemovals:!0});return(function(e,i,s,o){let l=s.batch,h=l.keys(),d=PersistencePromise.resolve();return h.forEach(e=>{d=d.next(()=>o.getEntry(i,e)).next(i=>{let h=s.docVersions.get(e);null!==h||fail(),0>i.version.compareTo(h)&&(l.applyToRemoteDocument(i,s),i.isValidDocument()&&(i.setReadTime(s.commitVersion),o.addEntry(i)))})}),d.next(()=>e.mutationQueue.removeMutationBatch(i,l))})(s,e,i,l).next(()=>l.apply(e)).next(()=>s.mutationQueue.performConsistencyCheck(e)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(e,o,i.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let i=__PRIVATE_documentKeySet();for(let s=0;s<e.mutationResults.length;++s)e.mutationResults[s].transformResults.length>0&&(i=i.add(e.batch.mutations[s].key));return i}(i))).next(()=>s.localDocuments.getDocuments(e,o))});__PRIVATE_processUserCallback(e,o,null),__PRIVATE_triggerPendingWritesCallbacks(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e,l)}catch(e){await __PRIVATE_ignoreIfPrimaryLeaseLoss(e)}}async function __PRIVATE_syncEngineRejectFailedWrite(e,i,s){var o;try{let l=await (o=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let s;return o.mutationQueue.lookupMutationBatch(e,i).next(i=>(null!==i||fail(),s=i.keys(),o.mutationQueue.removeMutationBatch(e,i))).next(()=>o.mutationQueue.performConsistencyCheck(e)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(e,s,i)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s)).next(()=>o.localDocuments.getDocuments(e,s))});__PRIVATE_processUserCallback(e,i,s),__PRIVATE_triggerPendingWritesCallbacks(e,i),e.sharedClientState.updateMutationState(i,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e,l)}catch(e){await __PRIVATE_ignoreIfPrimaryLeaseLoss(e)}}function __PRIVATE_triggerPendingWritesCallbacks(e,i){(e.Oa.get(i)||[]).forEach(e=>{e.resolve()}),e.Oa.delete(i)}function __PRIVATE_processUserCallback(e,i,s){let o=e.xa[e.currentUser.toKey()];if(o){let l=o.get(i);l&&(s?l.reject(s):l.resolve(),o=o.remove(i)),e.xa[e.currentUser.toKey()]=o}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e,i,s){let o=[],l=[],h=[];e.ba.isEmpty()||(e.ba.forEach((d,f)=>{h.push(e.Ba(f,i,s).then(i=>{if((i||s)&&e.isPrimaryClient){let s=i&&!i.fromCache;e.sharedClientState.updateQueryState(f.targetId,s?"current":"not-current")}if(i){o.push(i);let e=__PRIVATE_LocalViewChanges.Ki(f.targetId,i);l.push(e)}}))}),await Promise.all(h),e.Sa.h_(o),await async function(e,i){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",s=>PersistencePromise.forEach(i,i=>PersistencePromise.forEach(i.qi,o=>e.persistence.referenceDelegate.addReference(s,i.targetId,o)).next(()=>PersistencePromise.forEach(i.Qi,o=>e.persistence.referenceDelegate.removeReference(s,i.targetId,o)))))}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+e)}for(let s of i){let i=s.targetId;if(!s.fromCache){let s=e.ns.get(i),o=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(o);e.ns=e.ns.insert(i,l)}}}(e.localStore,l))}async function __PRIVATE_syncEngineHandleCredentialChange(e,i){if(!e.currentUser.isEqual(i)){__PRIVATE_logDebug("SyncEngine","User change. New user:",i.toKey());let s=await __PRIVATE_localStoreHandleUserChange(e.localStore,i);e.currentUser=i,e.Oa.forEach(e=>{e.forEach(e=>{e.reject(new FirestoreError(ef.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Oa.clear(),e.sharedClientState.handleUserChange(i,s.removedBatchIds,s.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e,s.us)}}let MemoryOfflineComponentProvider=class MemoryOfflineComponentProvider{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,i){return null}createIndexBackfillerScheduler(e,i){return null}createLocalStore(e){var i,s,o,l;return i=this.persistence,s=new __PRIVATE_QueryEngine,o=e.initialUser,l=this.serializer,new __PRIVATE_LocalStoreImpl(i,s,o,l)}createPersistence(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Hr,this.serializer)}createSharedClientState(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,i;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(i=this.indexBackfillerScheduler)||void 0===i||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};let OnlineComponentProvider=class OnlineComponentProvider{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new __PRIVATE_EventManagerImpl}createDatastore(e){var i,s,o;let l=__PRIVATE_newSerializer(e.databaseInfo.databaseId),h=(i=e.databaseInfo,new __PRIVATE_WebChannelConnection(i));return s=e.authCredentials,o=e.appCheckCredentials,new __PRIVATE_DatastoreImpl(s,o,h,l)}createRemoteStore(e){var i,s,o,l;return i=this.localStore,s=this.datastore,o=e.asyncQueue,l=__PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor,new __PRIVATE_RemoteStoreImpl(i,s,o,e=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,e,0),l)}createSyncEngine(e,i){return function(e,i,s,o,l,h,d){let f=new __PRIVATE_SyncEngineImpl(e,i,s,o,l,h);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e;await async function(e){__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),e.M_.add(5),await __PRIVATE_disableNetworkInternal(e),e.O_.shutdown(),e.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FirestoreClient=class FirestoreClient{constructor(e,i,s,o){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=o,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async e=>{__PRIVATE_logDebug("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(s,e=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new FirestoreError(ef.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){let i=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");e.reject(i)}}),e.promise}};async function __PRIVATE_setOfflineComponentProvider(e,i){e.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");let s=e.configuration;await i.initialize(s);let o=s.initialUser;e.setCredentialChangeListener(async e=>{o.isEqual(e)||(await __PRIVATE_localStoreHandleUserChange(i.localStore,e),o=e)}),i.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=i}async function __PRIVATE_setOnlineComponentProvider(e,i){e.asyncQueue.verifyOperationInProgress();let s=await __PRIVATE_ensureOfflineComponents(e);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await i.initialize(s,e.configuration),e.setCredentialChangeListener(e=>__PRIVATE_remoteStoreHandleCredentialChange(i.remoteStore,e)),e.setAppCheckTokenChangeListener((e,s)=>__PRIVATE_remoteStoreHandleCredentialChange(i.remoteStore,s)),e._onlineComponents=i}async function __PRIVATE_ensureOfflineComponents(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(e,e._uninitializedComponentsProvider._offline)}catch(i){if(!("FirebaseError"===i.name?i.code===ef.FAILED_PRECONDITION||i.code===ef.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw i;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+i),await __PRIVATE_setOfflineComponentProvider(e,new MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(e,new MemoryOfflineComponentProvider)}return e._offlineComponents}async function __PRIVATE_ensureOnlineComponents(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(e,e._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(e,new OnlineComponentProvider))),e._onlineComponents}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(e){let i={};return void 0!==e.timeoutSeconds&&(i.timeoutSeconds=e.timeoutSeconds),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(e,i,s){if(!s)throw new FirestoreError(ef.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${i}.`)}function __PRIVATE_validateDocumentPath(e){if(!DocumentKey.isDocumentKey(e))throw new FirestoreError(ef.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function __PRIVATE_validateCollectionPath(e){if(DocumentKey.isDocumentKey(e))throw new FirestoreError(ef.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function __PRIVATE_valueDescription(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var i;let s=(i=e).constructor?i.constructor.name:null;return s?`a custom ${s} object`:"an object"}}return"function"==typeof e?"a function":fail()}function __PRIVATE_cast(e,i){if("_delegate"in e&&(e=e._delegate),!(e instanceof i)){if(i.name===e.constructor.name)throw new FirestoreError(ef.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let s=__PRIVATE_valueDescription(e);throw new FirestoreError(ef.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${s}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FirestoreSettingsImpl=class FirestoreSettingsImpl{constructor(e){var i,s;if(void 0===e.host){if(void 0!==e.ssl)throw new FirestoreError(ef.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new FirestoreError(ef.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,i,s,o){if(!0===i&&!0===o)throw new FirestoreError(ef.INVALID_ARGUMENT,`${e} and ${s} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new FirestoreError(ef.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new FirestoreError(ef.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new FirestoreError(ef.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var i,s;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(i=this.experimentalLongPollingOptions,s=e.experimentalLongPollingOptions,i.timeoutSeconds===s.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};let Firestore$1=class Firestore$1{constructor(e,i,s,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new FirestoreError(ef.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(ef.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(e.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new FirestoreError(ef.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=eR.get(e);i&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),eR.delete(e),i.terminate())}(this),Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Query=class Query{constructor(e,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}};let DocumentReference=class DocumentReference{constructor(e,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}};let CollectionReference=class CollectionReference extends Query{constructor(e,i,s){super(e,i,new __PRIVATE_QueryImpl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}};function collection(e,i,...s){if(e=(0,en.m9)(e),__PRIVATE_validateNonEmptyArgument("collection","path",i),e instanceof Firestore$1){let o=ResourcePath.fromString(i,...s);return __PRIVATE_validateCollectionPath(o),new CollectionReference(e,null,o)}{if(!(e instanceof DocumentReference||e instanceof CollectionReference))throw new FirestoreError(ef.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=e._path.child(ResourcePath.fromString(i,...s));return __PRIVATE_validateCollectionPath(o),new CollectionReference(e.firestore,null,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_AsyncQueueImpl=class __PRIVATE_AsyncQueueImpl{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.hu=()=>{let e=getDocument();e&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let e=getDocument();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let i=getDocument();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let i=new __PRIVATE_Deferred;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){let i=this.iu.then(()=>(this.uu=!0,e().catch(e=>{let i;this.au=e,this.uu=!1;let s=(i=e.message||"",e.stack&&(i=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),i);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",s),e}).then(e=>(this.uu=!1,e))));return this.iu=i,i}enqueueAfterDelay(e,i,s){this.Pu(),this.lu.indexOf(e)>-1&&(i=0);let o=DelayedOperation.createAndSchedule(this,e,i,s,e=>this.Eu(e));return this._u.push(o),o}Pu(){this.au&&fail()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(let i of this._u)if(i.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{for(let i of(this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs),this._u))if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let i=this._u.indexOf(e);this._u.splice(i,1)}};let Firestore=class Firestore extends Firestore$1{constructor(e,i,s,o){super(e,i,s,o),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||__PRIVATE_configureFirestore(this),this._firestoreClient.terminate()}};function getFirestore(e,i){let s="object"==typeof e?e:(0,ee.Mq)(),o=(0,ee.qX)(s,"firestore").getImmediate({identifier:"string"==typeof e?e:i||"(default)"});if(!o._initialized){let e=(0,en.P0)("firestore");e&&function(e,i,s,o={}){var l;let h=(e=__PRIVATE_cast(e,Firestore$1))._getSettings(),d=`${i}:${s}`;if("firestore.googleapis.com"!==h.host&&h.host!==d&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},h),{host:d,ssl:!1})),o.mockUserToken){let i,s;if("string"==typeof o.mockUserToken)i=o.mockUserToken,s=User.MOCK_USER;else{i=(0,en.Sg)(o.mockUserToken,null===(l=e._app)||void 0===l?void 0:l.options.projectId);let h=o.mockUserToken.sub||o.mockUserToken.user_id;if(!h)throw new FirestoreError(ef.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new User(h)}e._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(i,s))}}(o,...e)}return o}function __PRIVATE_configureFirestore(e){var i,s,o,l,h,d;let f=e._freezeSettings(),g=(l=e._databaseId,h=(null===(i=e._app)||void 0===i?void 0:i.options.appId)||"",d=e._persistenceKey,new DatabaseInfo(l,h,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(f.experimentalLongPollingOptions),f.useFetchStreams));e._firestoreClient=new FirestoreClient(e._authCredentials,e._appCheckCredentials,e._queue,g),(null===(s=f.localCache)||void 0===s?void 0:s._offlineComponentProvider)&&(null===(o=f.localCache)||void 0===o?void 0:o._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:f.localCache.kind,_offline:f.localCache._offlineComponentProvider,_online:f.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bytes=class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(e){throw new FirestoreError(ef.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FieldPath=class FieldPath{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new FirestoreError(ef.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FieldValue=class FieldValue{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GeoPoint=class GeoPoint{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(ef.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new FirestoreError(ef.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ew=/^__.*__$/;let ParsedSetData=class ParsedSetData{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return null!==this.fieldMask?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,i,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,i,this.fieldTransforms)}};function __PRIVATE_isWrite(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}let __PRIVATE_ParseContextImpl=class __PRIVATE_ParseContextImpl{constructor(e,i,s,o,l,h){this.settings=e,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=o,void 0===l&&this.mu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var i;let s=null===(i=this.path)||void 0===i?void 0:i.child(e),o=this.gu({path:s,yu:!1});return o.wu(e),o}Su(e){var i;let s=null===(i=this.path)||void 0===i?void 0:i.child(e),o=this.gu({path:s,yu:!1});return o.mu(),o}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(__PRIVATE_isWrite(this.fu)&&ew.test(e))throw this.Du('Document fields cannot begin and end with "__"')}};let __PRIVATE_UserDataReader=class __PRIVATE_UserDataReader{constructor(e,i,s){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=s||__PRIVATE_newSerializer(e)}Fu(e,i,s,o=!1){return new __PRIVATE_ParseContextImpl({fu:e,methodName:i,vu:s,path:FieldPath$1.emptyPath(),yu:!1,Cu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function __PRIVATE_looksLikeJsonObject(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Timestamp||e instanceof GeoPoint||e instanceof Bytes||e instanceof DocumentReference||e instanceof FieldValue)}function __PRIVATE_validatePlainObject(e,i,s){if(!__PRIVATE_looksLikeJsonObject(s)||!("object"==typeof s&&null!==s&&(Object.getPrototypeOf(s)===Object.prototype||null===Object.getPrototypeOf(s)))){let o=__PRIVATE_valueDescription(s);throw"an object"===o?i.Du(e+" a custom object"):i.Du(e+" "+o)}}let eS=RegExp("[~\\*/\\[\\]]");function __PRIVATE_createError(e,i,s,o,l){let h=o&&!o.isEmpty(),d=void 0!==l,f=`Function ${i}() called with invalid data`;s&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(h||d)&&(g+=" (found",h&&(g+=` in field ${o}`),d&&(g+=` in document ${l}`),g+=")"),new FirestoreError(ef.INVALID_ARGUMENT,f+e+g)}function addDoc(e,i){var s,o,l,h;let d=__PRIVATE_cast(e.firestore,Firestore),f=function(e,i,...s){if(e=(0,en.m9)(e),1==arguments.length&&(i=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",i),e instanceof Firestore$1){let o=ResourcePath.fromString(i,...s);return __PRIVATE_validateDocumentPath(o),new DocumentReference(e,null,new DocumentKey(o))}{if(!(e instanceof DocumentReference||e instanceof CollectionReference))throw new FirestoreError(ef.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=e._path.child(ResourcePath.fromString(i,...s));return __PRIVATE_validateDocumentPath(o),new DocumentReference(e.firestore,e instanceof CollectionReference?e.converter:null,new DocumentKey(o))}}(e),g=(s=e.converter)?o&&(o.merge||o.mergeFields)?s.toFirestore(i,o):s.toFirestore(i):i;return(l=d,h=[(function(e,i,s,o,l,h={}){let d,f;let g=e.Fu(h.merge||h.mergeFields?2:0,i,s,l);__PRIVATE_validatePlainObject("Data must be an object, but it was:",g,o);let _=function __PRIVATE_parseObject(e,i){let s={};return isEmpty(e)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):forEach(e,(e,o)=>{let l=function __PRIVATE_parseData(e,i){if(__PRIVATE_looksLikeJsonObject(e=(0,en.m9)(e)))return __PRIVATE_validatePlainObject("Unsupported field value:",i,e),__PRIVATE_parseObject(e,i);if(e instanceof FieldValue)return function(e,i){if(!__PRIVATE_isWrite(i.fu))throw i.Du(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${e._methodName}() is not currently supported inside arrays`);let s=e._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,i),null;if(void 0===e&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),e instanceof Array){if(i.settings.yu&&4!==i.fu)throw i.Du("Nested arrays are not supported");return function(e,i){let s=[],o=0;for(let l of e){let e=__PRIVATE_parseData(l,i.bu(o));null==e&&(e={nullValue:"NULL_VALUE"}),s.push(e),o++}return{arrayValue:{values:s}}}(e,i)}return function(e,i){var s,o,l,h,d;if(null===(e=(0,en.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return s=i.serializer,"number"==typeof(l=o=e)&&Number.isInteger(l)&&!__PRIVATE_isNegativeZero(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER?__PRIVATE_toInteger(o):__PRIVATE_toDouble(s,o);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let s=Timestamp.fromDate(e);return{timestampValue:toTimestamp(i.serializer,s)}}if(e instanceof Timestamp){let s=new Timestamp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:toTimestamp(i.serializer,s)}}if(e instanceof GeoPoint)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bytes)return{bytesValue:(h=i.serializer,d=e._byteString,h.useProto3Json?d.toBase64():d.toUint8Array())};if(e instanceof DocumentReference){let s=i.databaseId,o=e.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:__PRIVATE_toResourceName(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.Du(`Unsupported field value: ${__PRIVATE_valueDescription(e)}`)}(e,i)}(o,i.pu(e));null!=l&&(s[e]=l)}),{mapValue:{fields:s}}}(o,g);if(h.merge)d=new FieldMask(g.fieldMask),f=g.fieldTransforms;else if(h.mergeFields){let e=[];for(let o of h.mergeFields){let l=function(e,i,s){if((i=(0,en.m9)(i))instanceof FieldPath)return i._internalPath;if("string"==typeof i)return function(e,i,s){if(i.search(eS)>=0)throw __PRIVATE_createError(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,s);try{return new FieldPath(...i.split("."))._internalPath}catch(o){throw __PRIVATE_createError(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,s)}}(e,i);throw __PRIVATE_createError("Field path arguments must be of type string or ",e,!1,void 0,s)}(i,o,s);if(!g.contains(l))throw new FirestoreError(ef.INVALID_ARGUMENT,`Field '${l}' is specified in your field mask but missing from your input data.`);(function(e,i){return e.some(e=>e.isEqual(i))})(e,l)||e.push(l)}d=new FieldMask(e),f=g.fieldTransforms.filter(e=>d.covers(e.field))}else d=null,f=g.fieldTransforms;return new ParsedSetData(new ObjectValue(_),d,f)})(function(e){let i=e._freezeSettings(),s=__PRIVATE_newSerializer(e._databaseId);return new __PRIVATE_UserDataReader(e._databaseId,!!i.ignoreUndefinedProperties,s)}(e.firestore),"addDoc",f._key,g,null!==e.converter,{}).toMutation(f._key,Precondition.exists(!1))],function(e,i){let s=new __PRIVATE_Deferred;return e.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_ensureOnlineComponents(e).then(e=>e.syncEngine),i,s)),s.promise}((l._firestoreClient||__PRIVATE_configureFirestore(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient),h)).then(()=>f)}new WeakMap,function(e=!0){eu=ee.Jn,(0,ee.Xd)(new et.wA("firestore",(i,{instanceIdentifier:s,options:o})=>{let l=i.getProvider("app").getImmediate(),h=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(i.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(i.getProvider("app-check-internal")),function(e,i){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new FirestoreError(ef.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(e.options.projectId,i)}(l,s),l);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),(0,ee.KN)(el,"4.6.3",void 0),(0,ee.KN)(el,"4.6.3","esm2017")}()},6609:function(e,i,s){"use strict";s.d(i,{ZP:function(){return q}});let o={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,i){console&&console[e]&&console[e].apply(console,i)}};let Logger=class Logger{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,i)}init(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=e||o,this.options=i,this.debug=i.debug}log(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.forward(i,"log","",!0)}warn(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.forward(i,"warn","",!0)}error(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.forward(i,"error","")}deprecate(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(e,i,s,o){return o&&!this.debug?null:("string"==typeof e[0]&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[i](e))}create(e){return new Logger(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Logger(this.logger,e)}};var l=new Logger;let EventEmitter=class EventEmitter{constructor(){this.observers={}}on(e,i){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);let s=this.observers[e].get(i)||0;this.observers[e].set(i,s+1)}),this}off(e,i){if(this.observers[e]){if(!i){delete this.observers[e];return}this.observers[e].delete(i)}}emit(e){for(var i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(this.observers[e]){let i=Array.from(this.observers[e].entries());i.forEach(e=>{let[i,o]=e;for(let e=0;e<o;e++)i(...s)})}if(this.observers["*"]){let i=Array.from(this.observers["*"].entries());i.forEach(i=>{let[o,l]=i;for(let i=0;i<l;i++)o.apply(o,[e,...s])})}}};function defer(){let e,i;let s=new Promise((s,o)=>{e=s,i=o});return s.resolve=e,s.reject=i,s}function makeString(e){return null==e?"":""+e}let h=/###/g;function getLastOfPath(e,i,s){function cleanKey(e){return e&&e.indexOf("###")>-1?e.replace(h,"."):e}function canNotTraverseDeeper(){return!e||"string"==typeof e}let o="string"!=typeof i?i:i.split("."),l=0;for(;l<o.length-1;){if(canNotTraverseDeeper())return{};let i=cleanKey(o[l]);!e[i]&&s&&(e[i]=new s),e=Object.prototype.hasOwnProperty.call(e,i)?e[i]:{},++l}return canNotTraverseDeeper()?{}:{obj:e,k:cleanKey(o[l])}}function setPath(e,i,s){let{obj:o,k:l}=getLastOfPath(e,i,Object);if(void 0!==o||1===i.length){o[l]=s;return}let h=i[i.length-1],d=i.slice(0,i.length-1),f=getLastOfPath(e,d,Object);for(;void 0===f.obj&&d.length;)h=`${d[d.length-1]}.${h}`,(f=getLastOfPath(e,d=d.slice(0,d.length-1),Object))&&f.obj&&void 0!==f.obj[`${f.k}.${h}`]&&(f.obj=void 0);f.obj[`${f.k}.${h}`]=s}function getPath(e,i){let{obj:s,k:o}=getLastOfPath(e,i);if(s)return s[o]}function regexEscape(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,e=>d[e]):e}let f=[" ",",","?","!",";"],g=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let i=this.regExpMap.get(e);if(void 0!==i)return i;let s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}(20);function deepFind(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[i])return e[i];let o=i.split(s),l=e;for(let e=0;e<o.length;){let i;if(!l||"object"!=typeof l)return;let h="";for(let d=e;d<o.length;++d)if(d!==e&&(h+=s),h+=o[d],void 0!==(i=l[h])){if(["string","number","boolean"].indexOf(typeof i)>-1&&d<o.length-1)continue;e+=d-e+1;break}l=i}return l}function getCleanedCode(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}let ResourceStore=class ResourceStore extends EventEmitter{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=i,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}removeNamespaces(e){let i=this.options.ns.indexOf(e);i>-1&&this.options.ns.splice(i,1)}getResource(e,i,s){let o,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=void 0!==l.keySeparator?l.keySeparator:this.options.keySeparator,d=void 0!==l.ignoreJSONStructure?l.ignoreJSONStructure:this.options.ignoreJSONStructure;e.indexOf(".")>-1?o=e.split("."):(o=[e,i],s&&(Array.isArray(s)?o.push(...s):"string"==typeof s&&h?o.push(...s.split(h)):o.push(s)));let f=getPath(this.data,o);return(!f&&!i&&!s&&e.indexOf(".")>-1&&(e=o[0],i=o[1],s=o.slice(2).join(".")),f||!d||"string"!=typeof s)?f:deepFind(this.data&&this.data[e]&&this.data[e][i],s,h)}addResource(e,i,s,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},h=void 0!==l.keySeparator?l.keySeparator:this.options.keySeparator,d=[e,i];s&&(d=d.concat(h?s.split(h):s)),e.indexOf(".")>-1&&(d=e.split("."),o=i,i=d[1]),this.addNamespaces(i),setPath(this.data,d,o),l.silent||this.emit("added",e,i,s,o)}addResources(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(let o in s)("string"==typeof s[o]||Array.isArray(s[o]))&&this.addResource(e,i,o,s[o],{silent:!0});o.silent||this.emit("added",e,i,s)}addResourceBundle(e,i,s,o,l){let h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},d=[e,i];e.indexOf(".")>-1&&(d=e.split("."),o=s,s=i,i=d[1]),this.addNamespaces(i);let f=getPath(this.data,d)||{};h.skipCopy||(s=JSON.parse(JSON.stringify(s))),o?function deepExtend(e,i,s){for(let o in i)"__proto__"!==o&&"constructor"!==o&&(o in e?"string"==typeof e[o]||e[o]instanceof String||"string"==typeof i[o]||i[o]instanceof String?s&&(e[o]=i[o]):deepExtend(e[o],i[o],s):e[o]=i[o]);return e}(f,s,l):f={...f,...s},setPath(this.data,d,f),h.silent||this.emit("added",e,i,s)}removeResourceBundle(e,i){this.hasResourceBundle(e,i)&&delete this.data[e][i],this.removeNamespaces(i),this.emit("removed",e,i)}hasResourceBundle(e,i){return void 0!==this.getResource(e,i)}getResourceBundle(e,i){return(i||(i=this.options.defaultNS),"v1"===this.options.compatibilityAPI)?{...this.getResource(e,i)}:this.getResource(e,i)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let i=this.getDataByLanguage(e),s=i&&Object.keys(i)||[];return!!s.find(e=>i[e]&&Object.keys(i[e]).length>0)}toJSON(){return this.data}};var _={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,i,s,o,l){return e.forEach(e=>{this.processors[e]&&(i=this.processors[e].process(i,s,o,l))}),i}};let b={};let Translator=class Translator extends EventEmitter{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,i,s){e.forEach(e=>{i[e]&&(s[e]=i[e])})}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=i,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=l.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;let s=this.resolve(e,i);return s&&void 0!==s.res}extractFromKey(e,i){let s=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===s&&(s=":");let o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,l=i.ns||this.options.defaultNS||[],h=s&&e.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!function(e,i,s){i=i||"",s=s||"";let o=f.filter(e=>0>i.indexOf(e)&&0>s.indexOf(e));if(0===o.length)return!0;let l=g.getRegExp(`(${o.map(e=>"?"===e?"\\?":e).join("|")})`),h=!l.test(e);if(!h){let i=e.indexOf(s);i>0&&!l.test(e.substring(0,i))&&(h=!0)}return h}(e,s,o);if(h&&!d){let i=e.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:e,namespaces:l};let h=e.split(s);(s!==o||s===o&&this.options.ns.indexOf(h[0])>-1)&&(l=h.shift()),e=h.join(o)}return"string"==typeof l&&(l=[l]),{key:e,namespaces:l}}translate(e,i,s){if("object"!=typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof i&&(i={...i}),i||(i={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);let o=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,l=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:h,namespaces:d}=this.extractFromKey(e[e.length-1],i),f=d[d.length-1],g=i.lng||this.language,_=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g&&"cimode"===g.toLowerCase()){if(_){let e=i.nsSeparator||this.options.nsSeparator;return o?{res:`${f}${e}${h}`,usedKey:h,exactUsedKey:h,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:`${f}${e}${h}`}return o?{res:h,usedKey:h,exactUsedKey:h,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:h}let b=this.resolve(e,i),w=b&&b.res,k=b&&b.usedKey||h,O=b&&b.exactUsedKey||h,j=Object.prototype.toString.apply(w),$=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,ee="string"!=typeof w&&"boolean"!=typeof w&&"number"!=typeof w;if(q&&w&&ee&&0>["[object Number]","[object Function]","[object RegExp]"].indexOf(j)&&!("string"==typeof $&&Array.isArray(w))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,w,{...i,ns:d}):`key '${h} (${this.language})' returned an object instead of string.`;return o?(b.res=e,b.usedParams=this.getUsedParamsDetails(i),b):e}if(l){let e=Array.isArray(w),s=e?[]:{},o=e?O:k;for(let e in w)if(Object.prototype.hasOwnProperty.call(w,e)){let h=`${o}${l}${e}`;s[e]=this.translate(h,{...i,joinArrays:!1,ns:d}),s[e]===h&&(s[e]=w[e])}w=s}}else if(q&&"string"==typeof $&&Array.isArray(w))(w=w.join($))&&(w=this.extendTranslation(w,e,i,s));else{let o=!1,d=!1,_=void 0!==i.count&&"string"!=typeof i.count,k=Translator.hasDefaultValue(i),O=_?this.pluralResolver.getSuffix(g,i.count,i):"",j=i.ordinal&&_?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",$=_&&!i.ordinal&&0===i.count&&this.pluralResolver.shouldUseIntlApi(),q=$&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${O}`]||i[`defaultValue${j}`]||i.defaultValue;!this.isValidLookup(w)&&k&&(o=!0,w=q),this.isValidLookup(w)||(d=!0,w=h);let ee=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,et=ee&&d?void 0:w,er=k&&q!==w&&this.options.updateMissing;if(d||o||er){if(this.logger.log(er?"updateKey":"missingKey",g,f,h,er?q:w),l){let e=this.resolve(h,{...i,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[],s=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&s&&s[0])for(let i=0;i<s.length;i++)e.push(s[i]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);let send=(e,s,o)=>{let l=k&&o!==w?o:et;this.options.missingKeyHandler?this.options.missingKeyHandler(e,f,s,l,er,i):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,f,s,l,er,i),this.emit("missingKey",e,f,s,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?e.forEach(e=>{let s=this.pluralResolver.getSuffixes(e,i);$&&i[`defaultValue${this.options.pluralSeparator}zero`]&&0>s.indexOf(`${this.options.pluralSeparator}zero`)&&s.push(`${this.options.pluralSeparator}zero`),s.forEach(s=>{send([e],h+s,i[`defaultValue${s}`]||q)})}):send(e,h,q))}w=this.extendTranslation(w,e,i,b,s),d&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${f}:${h}`),(d||o)&&this.options.parseMissingKeyHandler&&(w="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${h}`:h,o?w:void 0):this.options.parseMissingKeyHandler(w))}return o?(b.res=w,b.usedParams=this.getUsedParamsDetails(i),b):w}extendTranslation(e,i,s,o,l){var h=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!s.skipInterpolation){let d;s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});let f="string"==typeof e&&(s&&s.interpolation&&void 0!==s.interpolation.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(f){let i=e.match(this.interpolator.nestingRegexp);d=i&&i.length}let g=s.replace&&"string"!=typeof s.replace?s.replace:s;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,s.lng||this.language,s),f){let i=e.match(this.interpolator.nestingRegexp),o=i&&i.length;d<o&&(s.nest=!1)}!s.lng&&"v1"!==this.options.compatibilityAPI&&o&&o.res&&(s.lng=o.usedLng),!1!==s.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,o=Array(e),d=0;d<e;d++)o[d]=arguments[d];return l&&l[0]===o[0]&&!s.context?(h.logger.warn(`It seems you are nesting recursively key: ${o[0]} in key: ${i[0]}`),null):h.translate(...o,i)},s)),s.interpolation&&this.interpolator.reset()}let d=s.postProcess||this.options.postProcess,f="string"==typeof d?[d]:d;return null!=e&&f&&f.length&&!1!==s.applyPostProcessor&&(e=_.handle(f,e,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let i,s,o,l,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(i))return;let f=this.extractFromKey(e,d),g=f.key;s=g;let _=f.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));let w=void 0!==d.count&&"string"!=typeof d.count,k=w&&!d.ordinal&&0===d.count&&this.pluralResolver.shouldUseIntlApi(),O=void 0!==d.context&&("string"==typeof d.context||"number"==typeof d.context)&&""!==d.context,j=d.lngs?d.lngs:this.languageUtils.toResolveHierarchy(d.lng||this.language,d.fallbackLng);_.forEach(e=>{this.isValidLookup(i)||(h=e,!b[`${j[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(h)&&(b[`${j[0]}-${e}`]=!0,this.logger.warn(`key "${s}" for languages "${j.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(s=>{let h;if(this.isValidLookup(i))return;l=s;let f=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(f,g,s,e,d);else{let e;w&&(e=this.pluralResolver.getSuffix(s,d.count,d));let i=`${this.options.pluralSeparator}zero`,o=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(w&&(f.push(g+e),d.ordinal&&0===e.indexOf(o)&&f.push(g+e.replace(o,this.options.pluralSeparator)),k&&f.push(g+i)),O){let s=`${g}${this.options.contextSeparator}${d.context}`;f.push(s),w&&(f.push(s+e),d.ordinal&&0===e.indexOf(o)&&f.push(s+e.replace(o,this.options.pluralSeparator)),k&&f.push(s+i))}}for(;h=f.pop();)this.isValidLookup(i)||(o=h,i=this.getResource(s,e,h,d))}))})}),{res:i,usedKey:s,exactUsedKey:o,usedLng:l,usedNS:h}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,i,s,o):this.resourceStore.getResource(e,i,s,o)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.replace&&"string"!=typeof e.replace,s=i?e.replace:e;if(i&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i)for(let e of(s={...s},["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"]))delete s[e];return s}static hasDefaultValue(e){let i="defaultValue";for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&i===s.substring(0,i.length)&&void 0!==e[s])return!0;return!1}};function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}let LanguageUtil=class LanguageUtil{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=l.create("languageUtils")}getScriptPartFromCode(e){if(!(e=getCleanedCode(e))||0>e.indexOf("-"))return null;let i=e.split("-");return 2===i.length?null:(i.pop(),"x"===i[i.length-1].toLowerCase())?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(e){if(!(e=getCleanedCode(e))||0>e.indexOf("-"))return e;let i=e.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(e){if("string"==typeof e&&e.indexOf("-")>-1){let i=["hans","hant","latn","cyrl","cans","mong","arab"],s=e.split("-");return this.options.lowerCaseLng?s=s.map(e=>e.toLowerCase()):2===s.length?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),i.indexOf(s[1].toLowerCase())>-1&&(s[1]=capitalize(s[1].toLowerCase()))):3===s.length&&(s[0]=s[0].toLowerCase(),2===s[1].length&&(s[1]=s[1].toUpperCase()),"sgn"!==s[0]&&2===s[2].length&&(s[2]=s[2].toUpperCase()),i.indexOf(s[1].toLowerCase())>-1&&(s[1]=capitalize(s[1].toLowerCase())),i.indexOf(s[2].toLowerCase())>-1&&(s[2]=capitalize(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){let i;return e?(e.forEach(e=>{if(i)return;let s=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(s))&&(i=s)}),!i&&this.options.supportedLngs&&e.forEach(e=>{if(i)return;let s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return i=s;i=this.options.supportedLngs.find(e=>{if(e===s||!(0>e.indexOf("-")&&0>s.indexOf("-"))&&(e.indexOf("-")>0&&0>s.indexOf("-")&&e.substring(0,e.indexOf("-"))===s||0===e.indexOf(s)&&s.length>1))return e})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i):null}getFallbackCodes(e,i){if(!e)return[];if("function"==typeof e&&(e=e(i)),"string"==typeof e&&(e=[e]),Array.isArray(e))return e;if(!i)return e.default||[];let s=e[i];return s||(s=e[this.getScriptPartFromCode(i)]),s||(s=e[this.formatLanguageCode(i)]),s||(s=e[this.getLanguagePartFromCode(i)]),s||(s=e.default),s||[]}toResolveHierarchy(e,i){let s=this.getFallbackCodes(i||this.options.fallbackLng||[],e),o=[],addCode=e=>{e&&(this.isSupportedCode(e)?o.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return"string"==typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&addCode(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&addCode(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&addCode(this.getLanguagePartFromCode(e))):"string"==typeof e&&addCode(this.formatLanguageCode(e)),s.forEach(e=>{0>o.indexOf(e)&&addCode(this.formatLanguageCode(e))}),o}};let w=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],k={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},O=["v1","v2","v3"],j=["v4"],$={zero:0,one:1,two:2,few:3,many:4,other:5};let PluralResolver=class PluralResolver{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=i,this.logger=l.create("pluralResolver"),(!this.options.compatibilityJSON||j.includes(this.options.compatibilityJSON))&&("undefined"==typeof Intl||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){let e={};return w.forEach(i=>{i.lngs.forEach(s=>{e[s]={numbers:i.nr,plurals:k[i.fc]}})}),e}()}addRule(e,i){this.rules[e]=i}getRule(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode("dev"===e?"en":e),{type:i.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getRule(e,i);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,s).map(e=>`${i}${e}`)}getSuffixes(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getRule(e,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((e,i)=>$[e]-$[i]).map(e=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${e}`):s.numbers.map(s=>this.getSuffix(e,s,i)):[]}getSuffix(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.getRule(e,s);return o?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${o.select(i)}`:this.getSuffixRetroCompatible(o,i):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,i){let s=e.noAbs?e.plurals(i):e.plurals(Math.abs(i)),o=e.numbers[s];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===o?o="plural":1===o&&(o=""));let returnSuffix=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?`_plural_${o.toString()}`:returnSuffix():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?returnSuffix():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!O.includes(this.options.compatibilityJSON)}};function deepFindWithDefaults(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",l=!(arguments.length>4)||void 0===arguments[4]||arguments[4],h=function(e,i,s){let o=getPath(e,s);return void 0!==o?o:getPath(i,s)}(e,i,s);return!h&&l&&"string"==typeof s&&void 0===(h=deepFind(e,s,o))&&(h=deepFind(i,s,o)),h}let Interpolator=class Interpolator{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=l.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});let{escape:i,escapeValue:s,useRawValueToEscape:o,prefix:l,prefixEscaped:h,suffix:d,suffixEscaped:f,formatSeparator:g,unescapeSuffix:_,unescapePrefix:b,nestingPrefix:w,nestingPrefixEscaped:k,nestingSuffix:O,nestingSuffixEscaped:j,nestingOptionsSeparator:$,maxReplaces:q,alwaysFormat:ee}=e.interpolation;this.escape=void 0!==i?i:escape,this.escapeValue=void 0===s||s,this.useRawValueToEscape=void 0!==o&&o,this.prefix=l?regexEscape(l):h||"{{",this.suffix=d?regexEscape(d):f||"}}",this.formatSeparator=g||",",this.unescapePrefix=_?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":_||"",this.nestingPrefix=w?regexEscape(w):k||regexEscape("$t("),this.nestingSuffix=O?regexEscape(O):j||regexEscape(")"),this.nestingOptionsSeparator=$||",",this.maxReplaces=q||1e3,this.alwaysFormat=void 0!==ee&&ee,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let getOrResetRegExp=(e,i)=>e&&e.source===i?(e.lastIndex=0,e):RegExp(i,"g");this.regexp=getOrResetRegExp(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=getOrResetRegExp(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=getOrResetRegExp(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,i,s,o){let l,h,d;let f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function regexSafe(e){return e.replace(/\$/g,"$$$$")}let handleFormat=e=>{if(0>e.indexOf(this.formatSeparator)){let l=deepFindWithDefaults(i,f,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(l,void 0,s,{...o,...i,interpolationkey:e}):l}let l=e.split(this.formatSeparator),h=l.shift().trim(),d=l.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(i,f,h,this.options.keySeparator,this.options.ignoreJSONStructure),d,s,{...o,...i,interpolationkey:h})};this.resetRegExp();let g=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,_=o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,b=[{regex:this.regexpUnescape,safeValue:e=>regexSafe(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?regexSafe(this.escape(e)):regexSafe(e)}];return b.forEach(i=>{for(d=0;l=i.regex.exec(e);){let s=l[1].trim();if(void 0===(h=handleFormat(s))){if("function"==typeof g){let i=g(e,l,o);h="string"==typeof i?i:""}else if(o&&Object.prototype.hasOwnProperty.call(o,s))h="";else if(_){h=l[0];continue}else this.logger.warn(`missed to pass in variable ${s} for interpolating ${e}`),h=""}else"string"==typeof h||this.useRawValueToEscape||(h=makeString(h));let f=i.safeValue(h);if(e=e.replace(l[0],f),_?(i.regex.lastIndex+=h.length,i.regex.lastIndex-=l[0].length):i.regex.lastIndex=0,++d>=this.maxReplaces)break}}),e}nest(e,i){let s,o,l,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function handleHasOptions(e,i){let s=this.nestingOptionsSeparator;if(0>e.indexOf(s))return e;let o=e.split(RegExp(`${s}[ ]*{`)),h=`{${o[1]}`;e=o[0],h=this.interpolate(h,l);let d=h.match(/'/g),f=h.match(/"/g);(d&&d.length%2==0&&!f||f.length%2!=0)&&(h=h.replace(/'/g,'"'));try{l=JSON.parse(h),i&&(l={...i,...l})}catch(i){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,i),`${e}${s}${h}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,e}for(;s=this.nestingRegexp.exec(e);){let d=[];(l=(l={...h}).replace&&"string"!=typeof l.replace?l.replace:l).applyPostProcessor=!1,delete l.defaultValue;let f=!1;if(-1!==s[0].indexOf(this.formatSeparator)&&!/{.*}/.test(s[1])){let e=s[1].split(this.formatSeparator).map(e=>e.trim());s[1]=e.shift(),d=e,f=!0}if((o=i(handleHasOptions.call(this,s[1].trim(),l),l))&&s[0]===e&&"string"!=typeof o)return o;"string"!=typeof o&&(o=makeString(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),f&&(o=d.reduce((e,i)=>this.format(e,i,h.lng,{...h,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}};function createCachedFormatter(e){let i={};return function(s,o,l){let h=o+JSON.stringify(l),d=i[h];return d||(d=e(getCleanedCode(o),l),i[h]=d),d(s)}}let Formatter=class Formatter{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=l.create("formatter"),this.options=e,this.formats={number:createCachedFormatter((e,i)=>{let s=new Intl.NumberFormat(e,{...i});return e=>s.format(e)}),currency:createCachedFormatter((e,i)=>{let s=new Intl.NumberFormat(e,{...i,style:"currency"});return e=>s.format(e)}),datetime:createCachedFormatter((e,i)=>{let s=new Intl.DateTimeFormat(e,{...i});return e=>s.format(e)}),relativetime:createCachedFormatter((e,i)=>{let s=new Intl.RelativeTimeFormat(e,{...i});return e=>s.format(e,i.range||"day")}),list:createCachedFormatter((e,i)=>{let s=new Intl.ListFormat(e,{...i});return e=>s.format(e)})},this.init(e)}init(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},s=i.interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}add(e,i){this.formats[e.toLowerCase().trim()]=i}addCached(e,i){this.formats[e.toLowerCase().trim()]=createCachedFormatter(i)}format(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=i.split(this.formatSeparator),h=l.reduce((e,i)=>{let{formatName:l,formatOptions:h}=function(e){let i=e.toLowerCase().trim(),s={};if(e.indexOf("(")>-1){let o=e.split("(");i=o[0].toLowerCase().trim();let l=o[1].substring(0,o[1].length-1);if("currency"===i&&0>l.indexOf(":"))s.currency||(s.currency=l.trim());else if("relativetime"===i&&0>l.indexOf(":"))s.range||(s.range=l.trim());else{let e=l.split(";");e.forEach(e=>{if(e){let[i,...o]=e.split(":"),l=o.join(":").trim().replace(/^'+|'+$/g,""),h=i.trim();s[h]||(s[h]=l),"false"===l&&(s[h]=!1),"true"===l&&(s[h]=!0),isNaN(l)||(s[h]=parseInt(l,10))}})}}return{formatName:i,formatOptions:s}}(i);if(this.formats[l]){let i=e;try{let d=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},f=d.locale||d.lng||o.locale||o.lng||s;i=this.formats[l](e,f,{...h,...o,...d})}catch(e){this.logger.warn(e)}return i}return this.logger.warn(`there was no format function for ${l}`),e},e);return h}};let Connector=class Connector extends EventEmitter{constructor(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=i,this.services=s,this.languageUtils=s.languageUtils,this.options=o,this.logger=l.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,o.backend,o)}queueLoad(e,i,s,o){let l={},h={},d={},f={};return e.forEach(e=>{let o=!0;i.forEach(i=>{let d=`${e}|${i}`;!s.reload&&this.store.hasResourceBundle(e,i)?this.state[d]=2:this.state[d]<0||(1===this.state[d]?void 0===h[d]&&(h[d]=!0):(this.state[d]=1,o=!1,void 0===h[d]&&(h[d]=!0),void 0===l[d]&&(l[d]=!0),void 0===f[i]&&(f[i]=!0)))}),o||(d[e]=!0)}),(Object.keys(l).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(h),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(f)}}loaded(e,i,s){let o=e.split("|"),l=o[0],h=o[1];i&&this.emit("failedLoading",l,h,i),s&&this.store.addResourceBundle(l,h,s,void 0,void 0,{skipCopy:!0}),this.state[e]=i?-1:2;let d={};this.queue.forEach(s=>{(function(e,i,s,o){let{obj:l,k:h}=getLastOfPath(e,i,Object);l[h]=l[h]||[],o&&(l[h]=l[h].concat(s)),o||l[h].push(s)})(s.loaded,[l],h),void 0!==s.pending[e]&&(delete s.pending[e],s.pendingCount--),i&&s.errors.push(i),0!==s.pendingCount||s.done||(Object.keys(s.loaded).forEach(e=>{d[e]||(d[e]={});let i=s.loaded[e];i.length&&i.forEach(i=>{void 0===d[e][i]&&(d[e][i]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(e=>!e.done)}read(e,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,h=arguments.length>5?arguments[5]:void 0;if(!e.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:i,fcName:s,tried:o,wait:l,callback:h});return}this.readingCalls++;let resolver=(d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){let e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}if(d&&f&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,i,s,o+1,2*l,h)},l);return}h(d,f)},d=this.backend[s].bind(this.backend);if(2===d.length){try{let s=d(e,i);s&&"function"==typeof s.then?s.then(e=>resolver(null,e)).catch(resolver):resolver(null,s)}catch(e){resolver(e)}return}return d(e,i,resolver)}prepareLoading(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof i&&(i=[i]);let l=this.queueLoad(e,i,s,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(e=>{this.loadOne(e)})}load(e,i,s){this.prepareLoading(e,i,{},s)}reload(e,i,s){this.prepareLoading(e,i,{reload:!0},s)}loadOne(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=e.split("|"),o=s[0],l=s[1];this.read(o,l,"read",void 0,void 0,(s,h)=>{s&&this.logger.warn(`${i}loading namespace ${l} for language ${o} failed`,s),!s&&h&&this.logger.log(`${i}loaded namespace ${l} for language ${o}`,h),this.loaded(e,s,h)})}saveMissing(e,i,s,o,l){let h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn(`did not save key "${s}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(null!=s&&""!==s){if(this.backend&&this.backend.create){let f={...h,isUpdate:l},g=this.backend.create.bind(this.backend);if(g.length<6)try{let l;(l=5===g.length?g(e,i,s,o,f):g(e,i,s,o))&&"function"==typeof l.then?l.then(e=>d(null,e)).catch(d):d(null,l)}catch(e){d(e)}else g(e,i,s,o,d,f)}e&&e[0]&&this.store.addResource(e[0],i,s,o)}}};function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let i={};if("object"==typeof e[1]&&(i=e[1]),"string"==typeof e[1]&&(i.defaultValue=e[1]),"string"==typeof e[2]&&(i.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){let s=e[3]||e[2];Object.keys(s).forEach(e=>{i[e]=s[e]})}return i},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&0>e.supportedLngs.indexOf("cimode")&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function noop(){}let I18n=class I18n extends EventEmitter{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(e),this.services={},this.logger=l,this.modules={external:[]},!function(e){let i=Object.getOwnPropertyNames(Object.getPrototypeOf(e));i.forEach(i=>{"function"==typeof e[i]&&(e[i]=e[i].bind(e))})}(this),i&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,i),this;setTimeout(()=>{this.init(e,i)},0)}}init(){var e=this;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof i&&(s=i,i={}),!i.defaultNS&&!1!==i.defaultNS&&i.ns&&("string"==typeof i.ns?i.defaultNS=i.ns:0>i.ns.indexOf("translation")&&(i.defaultNS=i.ns[0]));let o=get();function createClassOnDemand(e){return e?"function"==typeof e?new e:e:null}if(this.options={...o,...this.options,...transformOptions(i)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),void 0!==i.keySeparator&&(this.options.userDefinedKeySeparator=i.keySeparator),void 0!==i.nsSeparator&&(this.options.userDefinedNsSeparator=i.nsSeparator),!this.options.isClone){let i;this.modules.logger?l.init(createClassOnDemand(this.modules.logger),this.options):l.init(null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!=typeof Intl&&(i=Formatter);let s=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);let h=this.services;h.logger=l,h.resourceStore=this.store,h.languageUtils=s,h.pluralResolver=new PluralResolver(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(h.formatter=createClassOnDemand(i),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Interpolator(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Connector(createClassOnDemand(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(i){for(var s=arguments.length,o=Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];e.emit(i,...o)}),this.modules.languageDetector&&(h.languageDetector=createClassOnDemand(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=createClassOnDemand(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(i){for(var s=arguments.length,o=Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];e.emit(i,...o)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,s||(s=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(i=>{this[i]=function(){return e.store[i](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(i=>{this[i]=function(){return e.store[i](...arguments),e}});let h=defer(),load=()=>{let finish=(e,i)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(i),s(e,i)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return finish(null,this.t.bind(this));this.changeLanguage(this.options.lng,finish)};return this.options.resources||!this.options.initImmediate?load():setTimeout(load,0),h}loadResources(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,s=i,o="string"==typeof e?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return s();let e=[],append=i=>{if(!i||"cimode"===i)return;let s=this.services.languageUtils.toResolveHierarchy(i);s.forEach(i=>{"cimode"!==i&&0>e.indexOf(i)&&e.push(i)})};if(o)append(o);else{let e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.forEach(e=>append(e))}this.options.preload&&this.options.preload.forEach(e=>append(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,i,s){let o=defer();return e||(e=this.languages),i||(i=this.options.ns),s||(s=noop),this.services.backendConnector.reload(e,i,e=>{o.resolve(),s(e)}),o}use(e){if(!e)throw Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&_.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){let i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,i){var s=this;this.isLanguageChangingTo=e;let o=defer();this.emit("languageChanging",e);let setLngProps=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},done=(e,l)=>{l?(setLngProps(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,o.resolve(function(){return s.t(...arguments)}),i&&i(e,function(){return s.t(...arguments)})},setLng=i=>{e||i||!this.services.languageDetector||(i=[]);let s="string"==typeof i?i:this.services.languageUtils.getBestMatchFromCodes(i);s&&(this.language||setLngProps(s),this.translator.language||this.translator.changeLanguage(s),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(s)),this.loadResources(s,e=>{done(e,s)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(setLng):this.services.languageDetector.detect(setLng):setLng(e):setLng(this.services.languageDetector.detect()),o}getFixedT(e,i,s){var o=this;let fixedT=function(e,i){let l,h;if("object"!=typeof i){for(var d=arguments.length,f=Array(d>2?d-2:0),g=2;g<d;g++)f[g-2]=arguments[g];l=o.options.overloadTranslationOptionHandler([e,i].concat(f))}else l={...i};l.lng=l.lng||fixedT.lng,l.lngs=l.lngs||fixedT.lngs,l.ns=l.ns||fixedT.ns,l.keyPrefix=l.keyPrefix||s||fixedT.keyPrefix;let _=o.options.keySeparator||".";return h=l.keyPrefix&&Array.isArray(e)?e.map(e=>`${l.keyPrefix}${_}${e}`):l.keyPrefix?`${l.keyPrefix}${_}${e}`:e,o.t(h,l)};return"string"==typeof e?fixedT.lng=e:fixedT.lngs=e,fixedT.ns=i,fixedT.keyPrefix=s,fixedT}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let s=i.lng||this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,l=this.languages[this.languages.length-1];if("cimode"===s.toLowerCase())return!0;let loadNotPending=(e,i)=>{let s=this.services.backendConnector.state[`${e}|${i}`];return -1===s||2===s};if(i.precheck){let e=i.precheck(this,loadNotPending);if(void 0!==e)return e}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||loadNotPending(s,e)&&(!o||loadNotPending(l,e)))}loadNamespaces(e,i){let s=defer();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(e=>{0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}),this.loadResources(e=>{s.resolve(),i&&i(e)}),s):(i&&i(),Promise.resolve())}loadLanguages(e,i){let s=defer();"string"==typeof e&&(e=[e]);let o=this.options.preload||[],l=e.filter(e=>0>o.indexOf(e)&&this.services.languageUtils.isSupportedCode(e));return l.length?(this.options.preload=o.concat(l),this.loadResources(e=>{s.resolve(),i&&i(e)}),s):(i&&i(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";let i=this.services&&this.services.languageUtils||new LanguageUtil(get());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new I18n(e,i)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,s=e.forkResourceStore;s&&delete e.forkResourceStore;let o={...this.options,...e,isClone:!0},l=new I18n(o);return(void 0!==e.debug||void 0!==e.prefix)&&(l.logger=l.logger.clone(e)),["store","services","language"].forEach(e=>{l[e]=this[e]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},s&&(l.store=new ResourceStore(this.store.data,o),l.services.resourceStore=l.store),l.translator=new Translator(l.services,o),l.translator.on("*",function(e){for(var i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];l.emit(e,...s)}),l.init(o,i),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}};let q=I18n.createInstance();q.createInstance=I18n.createInstance,q.createInstance,q.dir,q.init,q.loadResources,q.reloadResources,q.use,q.changeLanguage,q.getFixedT,q.t,q.exists,q.setDefaultNamespace,q.hasLoadedNamespace,q.loadNamespaces,q.loadLanguages},7421:function(e,i,s){"use strict";let o;s.d(i,{cC:function(){return Trans_Trans},Db:function(){return ee},$G:function(){return useTranslation_useTranslation}});var l=s(7294),h=s(7462),d=s(1739),f=s.n(d),g=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(e){var i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},s=e.match(/<\/?([^\s]+?)[/\s>]/);if(s&&(i.name=s[1],(f()[s[1]]||"/"===e.charAt(e.length-2))&&(i.voidElement=!0),i.name.startsWith("!--"))){var o=e.indexOf("-->");return{type:"comment",comment:-1!==o?e.slice(4,o):""}}for(var l=new RegExp(g),h=null;null!==(h=l.exec(e));)if(h[0].trim()){if(h[1]){var d=h[1].trim(),_=[d,""];d.indexOf("=")>-1&&(_=d.split("=")),i.attrs[_[0]]=_[1],l.lastIndex--}else h[2]&&(i.attrs[h[2]]=h[3].trim().substring(1,h[3].length-1))}return i}var _=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,b=/^\s*$/,w=Object.create(null),k={parse:function(e,i){i||(i={}),i.components||(i.components=w);var s,o=[],l=[],h=-1,d=!1;if(0!==e.indexOf("<")){var f=e.indexOf("<");o.push({type:"text",content:-1===f?e:e.substring(0,f)})}return e.replace(_,function(f,g){if(d){if(f!=="</"+s.name+">")return;d=!1}var _,w="/"!==f.charAt(1),k=f.startsWith("<!--"),O=g+f.length,j=e.charAt(O);if(k){var $=n(f);return h<0?o.push($):(_=l[h]).children.push($),o}if(w&&(h++,"tag"===(s=n(f)).type&&i.components[s.name]&&(s.type="component",d=!0),s.voidElement||d||!j||"<"===j||s.children.push({type:"text",content:e.slice(O,e.indexOf("<",O))}),0===h&&o.push(s),(_=l[h-1])&&_.children.push(s),l[h]=s),(!w||s.voidElement)&&(h>-1&&(s.voidElement||s.name===f.slice(2,-1))&&(s=-1==--h?o:l[h]),!d&&"<"!==j&&j)){_=-1===h?o:l[h].children;var q=e.indexOf("<",O),ee=e.slice(O,-1===q?void 0:q);b.test(ee)&&(ee=" "),(q>-1&&h+_.length>=0||" "!==ee)&&_.push({type:"text",content:ee})}}),o},stringify:function(e){return e.reduce(function(e,i){return e+function a(e,i){switch(i.type){case"text":return e+i.content;case"tag":return e+="<"+i.name+(i.attrs?function(e){var i=[];for(var s in e)i.push(s+'="'+e[s]+'"');return i.length?" "+i.join(" "):""}(i.attrs):"")+(i.voidElement?"/>":">"),i.voidElement?e:e+i.children.reduce(a,"")+"</"+i.name+">";case"comment":return e+"<!--"+i.comment+"-->"}}("",i)},"")}};function warn(){if(console&&console.warn){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];"string"==typeof i[0]&&(i[0]=`react-i18next:: ${i[0]}`),console.warn(...i)}}let O={};function warnOnce(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];"string"==typeof i[0]&&O[i[0]]||("string"==typeof i[0]&&(O[i[0]]=new Date),warn(...i))}let loadedClb=(e,i)=>()=>{if(e.isInitialized)i();else{let initialized=()=>{setTimeout(()=>{e.off("initialized",initialized)},0),i()};e.on("initialized",initialized)}};function loadNamespaces(e,i,s){e.loadNamespaces(i,loadedClb(e,s))}function loadLanguages(e,i,s,o){"string"==typeof s&&(s=[s]),s.forEach(i=>{0>e.options.ns.indexOf(i)&&e.options.ns.push(i)}),e.loadLanguages(i,loadedClb(e,o))}let j=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=e=>$[e],q={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(j,unescapeHtmlEntity)};function hasChildren(e,i){if(!e)return!1;let s=e.props?e.props.children:e.children;return i?s.length>0:!!s}function getChildren(e){if(!e)return[];let i=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?getAsArray(i):i}function getAsArray(e){return Array.isArray(e)?e:[e]}let ee={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};q={...q,...e}}(e.options.react),o=e}},et=(0,l.createContext)();let ReportNamespaces=class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}};function Trans_Trans(e){let{children:i,count:s,parent:d,i18nKey:f,context:g,tOptions:_={},values:b,defaults:w,components:O,ns:j,i18n:$,t:ee,shouldUnescape:er,...en}=e,{i18n:ei,defaultNS:es}=(0,l.useContext)(et)||{},eo=$||ei||o,ea=ee||eo&&eo.t.bind(eo);return function(e){let{children:i,count:s,parent:d,i18nKey:f,context:g,tOptions:_={},values:b,defaults:w,components:O,ns:j,i18n:$,t:ee,shouldUnescape:et,...er}=e,en=$||o;if(!en)return warnOnce("You will need to pass in an i18next instance by using i18nextReactModule"),i;let ei=ee||en.t.bind(en)||(e=>e);g&&(_.context=g);let es={...q,...en.options&&en.options.react},eo=j||ei.ns||en.options&&en.options.defaultNS;eo="string"==typeof eo?[eo]:eo||["translation"];let ea=function nodesToString(e,i){if(!e)return"";let s="",o=getAsArray(e),h=i.transSupportBasicHtmlNodes&&i.transKeepBasicHtmlNodesFor?i.transKeepBasicHtmlNodesFor:[];return o.forEach((e,o)=>{if("string"==typeof e)s+=`${e}`;else if((0,l.isValidElement)(e)){let l=Object.keys(e.props).length,d=h.indexOf(e.type)>-1,f=e.props.children;if(!f&&d&&0===l)s+=`<${e.type}/>`;else if(f||d&&0===l){if(e.props.i18nIsDynamicList)s+=`<${o}></${o}>`;else if(d&&1===l&&"string"==typeof f)s+=`<${e.type}>${f}</${e.type}>`;else{let e=nodesToString(f,i);s+=`<${o}>${e}</${o}>`}}else s+=`<${o}></${o}>`}else if(null===e)warn("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"==typeof e){let{format:i,...o}=e,l=Object.keys(o);if(1===l.length){let e=i?`${l[0]}, ${i}`:l[0];s+=`{{${e}}}`}else warn("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else warn("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)}),s}(i,es),el=w||ea||es.transEmptyNodeValue||f,{hashTransKey:eu}=es,eh=f||(eu?eu(ea||el):ea||el);en.options&&en.options.interpolation&&en.options.interpolation.defaultVariables&&(b=b&&Object.keys(b).length>0?{...b,...en.options.interpolation.defaultVariables}:{...en.options.interpolation.defaultVariables});let ef=b?_.interpolation:{interpolation:{..._.interpolation,prefix:"#$?",suffix:"?$#"}},ep={..._,count:s,...b,...ef,defaultValue:el,ns:eo},eg=eh?ei(eh,ep):el;O&&Object.keys(O).forEach(e=>{let i=O[e];"function"==typeof i.type||!i.props||!i.props.children||0>eg.indexOf(`${e}/>`)&&0>eg.indexOf(`${e} />`)||(O[e]=l.createElement(function(){return l.createElement(l.Fragment,null,i)},null))});let em=function(e,i,s,o,d,f){if(""===i)return[];let g=o.transKeepBasicHtmlNodesFor||[],_=i&&new RegExp(g.map(e=>`<${e}`).join("|")).test(i);if(!e&&!_&&!f)return[i];let b={};!function getData(e){let i=getAsArray(e);i.forEach(e=>{"string"==typeof e||(hasChildren(e)?getData(getChildren(e)):"object"!=typeof e||(0,l.isValidElement)(e)||Object.assign(b,e))})}(e);let w=k.parse(`<0>${i}</0>`),O={...b,...d};function renderInner(e,i,s){let o=getChildren(e),h=mapAST(o,i.children,s);return"[object Array]"===Object.prototype.toString.call(o)&&o.every(e=>(0,l.isValidElement)(e))&&0===h.length||e.props&&e.props.i18nIsDynamicList?o:h}function pushTranslatedJSX(e,i,s,o,d){e.dummy?(e.children=i,s.push((0,l.cloneElement)(e,{key:o},d?void 0:i))):s.push(...l.Children.map([e],e=>{let s={...e.props};return delete s.i18nIsDynamicList,l.createElement(e.type,(0,h.Z)({},s,{key:o,ref:e.ref},d?{}:{children:i}))}))}function mapAST(i,h,d){let b=getAsArray(i),w=getAsArray(h);return w.reduce((i,h,w)=>{let k=h.children&&h.children[0]&&h.children[0].content&&s.services.interpolator.interpolate(h.children[0].content,O,s.language);if("tag"===h.type){let f=b[parseInt(h.name,10)];1!==d.length||f||(f=d[0][h.name]),f||(f={});let j=0!==Object.keys(h.attrs).length?function(e,i){let s={...i};return s.props=Object.assign(e.props,i.props),s}({props:h.attrs},f):f,$=(0,l.isValidElement)(j),q=$&&hasChildren(h,!0)&&!h.voidElement,ee=_&&"object"==typeof j&&j.dummy&&!$,et="object"==typeof e&&null!==e&&Object.hasOwnProperty.call(e,h.name);if("string"==typeof j){let e=s.services.interpolator.interpolate(j,O,s.language);i.push(e)}else if(hasChildren(j)||q){let e=renderInner(j,h,d);pushTranslatedJSX(j,e,i,w)}else if(ee){let e=mapAST(b,h.children,d);pushTranslatedJSX(j,e,i,w)}else if(Number.isNaN(parseFloat(h.name))){if(et){let e=renderInner(j,h,d);pushTranslatedJSX(j,e,i,w,h.voidElement)}else if(o.transSupportBasicHtmlNodes&&g.indexOf(h.name)>-1){if(h.voidElement)i.push((0,l.createElement)(h.name,{key:`${h.name}-${w}`}));else{let e=mapAST(b,h.children,d);i.push((0,l.createElement)(h.name,{key:`${h.name}-${w}`},e))}}else if(h.voidElement)i.push(`<${h.name} />`);else{let e=mapAST(b,h.children,d);i.push(`<${h.name}>${e}</${h.name}>`)}}else if("object"!=typeof j||$)pushTranslatedJSX(j,k,i,w,1!==h.children.length||!k);else{let e=h.children[0]?k:null;e&&i.push(e)}}else if("text"===h.type){let e=o.transWrapTextNodes,d=f?o.unescape(s.services.interpolator.interpolate(h.content,O,s.language)):s.services.interpolator.interpolate(h.content,O,s.language);e?i.push((0,l.createElement)(e,{key:`${h.name}-${w}`},d)):i.push(d)}return i},[])}let j=mapAST([{dummy:!0,children:e||[]}],w,getAsArray(e||[]));return getChildren(j[0])}(O||i,eg,en,es,ep,et),e_=void 0!==d?d:es.defaultTransParent;return e_?(0,l.createElement)(e_,er,em):em}({children:i,count:s,parent:d,i18nKey:f,context:g,tOptions:_,values:b,defaults:w,components:O,ns:j||ea&&ea.ns||es||eo&&eo.options&&eo.options.defaultNS,i18n:eo,t:ee,shouldUnescape:er,...en})}let usePrevious=(e,i)=>{let s=(0,l.useRef)();return(0,l.useEffect)(()=>{s.current=i?s.current:e},[e,i]),s.current};function useTranslation_useTranslation(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{i18n:s}=i,{i18n:h,defaultNS:d}=(0,l.useContext)(et)||{},f=s||h||o;if(f&&!f.reportNamespaces&&(f.reportNamespaces=new ReportNamespaces),!f){warnOnce("You will need to pass in an i18next instance by using initReactI18next");let notReadyT=(e,i)=>"string"==typeof i?i:i&&"object"==typeof i&&"string"==typeof i.defaultValue?i.defaultValue:Array.isArray(e)?e[e.length-1]:e,e=[notReadyT,{},!1];return e.t=notReadyT,e.i18n={},e.ready=!1,e}f.options.react&&void 0!==f.options.react.wait&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");let g={...q,...f.options.react,...i},{useSuspense:_,keyPrefix:b}=g,w=e||d||f.options&&f.options.defaultNS;w="string"==typeof w?[w]:w||["translation"],f.reportNamespaces.addUsedNamespaces&&f.reportNamespaces.addUsedNamespaces(w);let k=(f.isInitialized||f.initializedStoreOnce)&&w.every(e=>(function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i.languages||!i.languages.length)return warnOnce("i18n.languages were undefined or empty",i.languages),!0;let o=void 0!==i.options.ignoreJSONStructure;return o?i.hasLoadedNamespace(e,{lng:s.lng,precheck:(i,o)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,e))return!1}}):function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.languages[0],l=!!i.options&&i.options.fallbackLng,h=i.languages[i.languages.length-1];if("cimode"===o.toLowerCase())return!0;let loadNotPending=(e,s)=>{let o=i.services.backendConnector.state[`${e}|${s}`];return -1===o||2===o};return(!(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1)||!i.services.backendConnector.backend||!i.isLanguageChangingTo||!!loadNotPending(i.isLanguageChangingTo,e))&&!!(i.hasResourceBundle(o,e)||!i.services.backendConnector.backend||i.options.resources&&!i.options.partialBundledLanguages||loadNotPending(o,e)&&(!l||loadNotPending(h,e)))}(e,i,s)})(e,f,g));function getT(){return f.getFixedT(i.lng||null,"fallback"===g.nsMode?w:w[0],b)}let[O,j]=(0,l.useState)(getT),$=w.join();i.lng&&($=`${i.lng}${$}`);let ee=usePrevious($),er=(0,l.useRef)(!0);(0,l.useEffect)(()=>{let{bindI18n:e,bindI18nStore:s}=g;function boundReset(){er.current&&j(getT)}return er.current=!0,k||_||(i.lng?loadLanguages(f,i.lng,w,()=>{er.current&&j(getT)}):loadNamespaces(f,w,()=>{er.current&&j(getT)})),k&&ee&&ee!==$&&er.current&&j(getT),e&&f&&f.on(e,boundReset),s&&f&&f.store.on(s,boundReset),()=>{er.current=!1,e&&f&&e.split(" ").forEach(e=>f.off(e,boundReset)),s&&f&&s.split(" ").forEach(e=>f.store.off(e,boundReset))}},[f,$]);let en=(0,l.useRef)(!0);(0,l.useEffect)(()=>{er.current&&!en.current&&j(getT),en.current=!1},[f,b]);let ei=[O,f,k];if(ei.t=O,ei.i18n=f,ei.ready=k,k||!k&&!_)return ei;throw new Promise(e=>{i.lng?loadLanguages(f,i.lng,w,()=>e()):loadNamespaces(f,w,()=>e())})}},7551:function(e){"use strict";e.exports=JSON.parse('{"Settings":"Settings","ExternalConnectionMode":"External Connection Mode (WebSocket)","YoutubeMode":"YouTube Mode","YoutubeInfo":"The first character of the comment is \'#\', it is ignored.","YoutubeAPIKey":"YouTube API Key","YoutubeLiveID":"YouTube Live ID","ConversationContinuityMode":"Conversation Continuity Mode (Beta)","ConversationContinuityModeInfo":"When there is no comment, AI tries to continue the conversation. Currently only OpenAI is supported.","ConversationContinuityModeInfo2":"One answer calls multiple times LLM, so API usage may be increased.","ConversationContinuityModeInfo3":"gpt-4o or gpt-4-turbo works well.","StatusOn":"Status: ON","StatusOff":"Status: OFF","SelectAIService":"Select AI Service","LocalLLM":"Local LLM","SelectModel":"Select Model","OpenAIAPIKeyLabel":"OpenAI API Key","AnthropicAPIKeyLabel":"Anthropic API Key","GoogleAPIKeyLabel":"Google Gemini API Key","GroqAPIKeyLabel":"Groq API Key","DifyAPIKeyLabel":"Dify API Key","APIKeyInstruction":"You can obtain the API key below. Enter the obtained API key into the form.","ChatGPTInfo":"ChatGPT API is accessed directly from the browser.","LocalLLMInfo":"Local LLM server must be running. Setup is as follows.","LocalLLMInfo2":"Please enter the URL of the local LLM server (including port number) and the model name.","GroqInfo":"Groq API is accessed directly from the browser.","DifyInfo":"Dify only supports chatbot type.","DifyInfo2":"However, due to the specifications of Dify, the conversation history is not saved, so please be careful.","DifyInfo3":"Example: http://localhost:81/v1/chat-messages","DifyInstruction":"If you are using Dify, the system prompt will not be used. Please set Dify chatbot.","EnterURL":"URL","CharacterModelLabel":"Character Model","OpenVRM":"Open VRM","BackgroundImage":"Background Image","ChangeBackgroundImage":"Change Background Image","CharacterSettingsPrompt":"Character Settings (System Prompt)","CharacterSettingsReset":"Reset Character Settings","SyntheticVoiceEngineChoice":"Choose Synthetic Voice Engine","VoiceAdjustment":"Voice Adjustment","VoiceEngineInstruction":"Select the synthetic voice engine you want to use.","UsingKoeiromap":"Koeiromap (Japanese Only)","UsingVoiceVox":"VOICEVOX (Japanese Only)","UsingGoogleTTS":"Google TTS","UsingStyleBertVITS2":"Style-Bert-VITS2","UserName":"User Name","StyleBertVITS2Info":"Using Style-Bert-VITS2. It uses a local API, you need to download and launch the app that suits your environment from the site below.","SpeakerSelection":"Speaker Selection","GoogleTTSInfo":"Using Google Cloud Text-to-Speech. It supports multiple languages.","AuthFileInstruction":"Obtain the authentication JSON file below and place it in the root folder of the repository as \'credentials.json\'.","LanguageModelURL":"Select the language model from the URL below.","LanguageChoice":"Language Choice","StyleBeatVITS2LocalServerURL":"Style-Bert-VITS2 Local Server URL","StyleBeatVITS2ModelID":"Style-Bert-VITS2 Model ID","StyleBeatVITS2Style":"Style-Bert-VITS2 Style","ConversationHistory":"Conversation History","ConversationHistoryInfo":"The latest 10 conversation texts are stored as memories.","ConversationHistoryReset":"Reset Conversation History","NotConnectedToExternalAssistant":"Not connected to an external assistant.","APIKeyNotEntered":"API key is not entered.","CodeLog":"Code Log","ChatLog":"Conversation Log","EnterYourQuestion":"Enter your question here","AboutThisApplication":"About This Application","AboutThisApplicationDescription":"Enjoy conversations with a 3D character right in your web browser, using microphone or text input and voice synthesis. You can also change the character (VRM), adjust its personality, and modify its voice.<br />Settings can be changed from the menu button in the top left.","TechnologyIntroduction":"Technology Introduction","TechnologyIntroductionDescription1":"This app was created by modifying pixiv\'s <b>ChatVRM</b>. The original source code can be found","TechnologyIntroductionLink1":"here","TechnologyIntroductionDescription2":".","TechnologyIntroductionDescription3":"For displaying and manipulating 3D models,","TechnologyIntroductionDescription4":"is used. For generating conversation text, various LLMs such as","TechnologyIntroductionDescription5":"are used. For speech synthesis, various TTS engines like","TechnologyIntroductionDescription6":"are utilized. For more details, please check out this","TechnologyIntroductionLink2":"explanatory article","TechnologyIntroductionDescription7":".","SourceCodeDescription1":"The source code for this app is publicly available on GitHub. Feel free to modify and adapt it as you like.","RepositoryURL":"Repository URL:","DontShowIntroductionNextTime":"Do not show this dialog next time","Close":"CLOSE","Language":"Language","UsingGSVITTS":"GSVI TTS","GSVITTSInfo":"GSVI TTS Settings","GSVITTSServerUrl":"GSVI TTS Endpoint API","GSVITTSModelID":"GSVI TTS Model ID","GSVITTSBatchSize":"GSVI TTS Batch Size (1 ~ 100 The larger the value, the faster the inference speed, but it might exhaust memory if too large.)","GSVITTSSpeechRate":"Speech Rate (0.5 ~ 2.0 The bigger the value, the faster it is.)","Login":"Login","Email":"Email","Password":"Password","Login with Google":"Login with Google","Don\'t have an account?":"Don\'t have an account?","Sign Up":"Sign Up","Already have an account?":"Already have an account?"}')},2820:function(e){"use strict";e.exports=JSON.parse('{"Settings":"設定","ExternalConnectionMode":"外部連携モード（WebSocket）","YoutubeMode":"YouTubeモード","YoutubeInfo":"先頭が「#」のコメントは無視されます。","YoutubeAPIKey":"YouTube API キー","YoutubeLiveID":"YouTube Live ID","ConversationContinuityMode":"会話継続モード（ベータ版）","ConversationContinuityModeInfo":"コメントが無いときにAIが自ら会話を継続しようとするモードです。現在OpenAIのみ対応しています。","ConversationContinuityModeInfo2":"一度の回答で複数回LLMを呼び出すため、API利用料が増える可能性があります。ご注意ください。","ConversationContinuityModeInfo3":"gpt-4o または gpt-4-turbo で比較的安定動作します。","StatusOn":"状態：ON","StatusOff":"状態：OFF","SelectAIService":"AIサービスを選択","LocalLLM":"ローカルLLM","SelectModel":"モデルを選択","OpenAIAPIKeyLabel":"OpenAI API キー","AnthropicAPIKeyLabel":"Anthropic API キー","GoogleAPIKeyLabel":"Google Gemini API キー","GroqAPIKeyLabel":"Groq API キー","DifyAPIKeyLabel":"Dify API キー","APIKeyInstruction":"APIキーは下記のリンクから取得できます。取得したAPIキーをフォームに入力してください。","ChatGPTInfo":"ChatGPT APIはブラウザから直接アクセスしています。","LocalLLMInfo":"ローカルLLM サーバーを起動している必要があります。","LocalLLMInfo2":"ローカルLLMのURL（ポート番号込み）とモデル名を入力してください。","GroqInfo":"Groq APIはブラウザから直接アクセスしています。","DifyInfo":"Difyでは、チャットボットタイプのみ対応しています。","DifyInfo2":"なお、Difyの仕様の都合上、会話履歴は保持されないのでその点に注意してください。","DifyInfo3":"例：http://localhost:81/v1/chat-messages","DifyInstruction":"Difyを使用している場合、このシステムプロンプトは使用されません。Difyチャットボットに設定してください。","EnterURL":"URLを入力","CharacterModelLabel":"キャラクターモデル","OpenVRM":"VRMを開く","BackgroundImage":"背景画像","ChangeBackgroundImage":"背景画像を変える","CharacterSettingsPrompt":"キャラクター設定（システムプロンプト）","CharacterSettingsReset":"キャラクター設定リセット","SyntheticVoiceEngineChoice":"合成音声エンジンの選択","VoiceAdjustment":"声の調整","VoiceEngineInstruction":"使用する合成音声エンジンを選択してください。","UsingKoeiromap":"Koeiromapを使用する（Japanese Only）","UsingVoiceVox":"VOICEVOXを使用する（Japanese Only）","UsingGoogleTTS":"Google TTSを使用する","UsingStyleBertVITS2":"Style-Bert-VITS2を使用する","UserName":"ユーザー名","StyleBertVITS2Info":"Style-Bert-VITS2を使用しています。ローカルAPIを使用するので下記のサイトから環境にあったアプリをダウンロードし、起動しておく必要があります。","SpeakerSelection":"ボイスタイプ選択","GoogleTTSInfo":"Google Cloud Text-to-Speechを使用しています。多言語に対応可能です。","AuthFileInstruction":"認証用のJSONファイルを下記から取得し、リポジトリのルートフォルダに credentials.json という名称で配置してください。","LanguageModelURL":"言語モデルは下記のURLから選択してください。","LanguageChoice":"言語選択","StyleBeatVITS2LocalServerURL":"Style-Bert-VITS2 ローカルサーバーURL","StyleBeatVITS2ModelID":"Style-Bert-VITS2 モデルID","StyleBeatVITS2Style":"Style-Bert-VITS2 スタイル","ConversationHistory":"会話履歴","ConversationHistoryInfo":"直近の10会話文が記憶として保持されます。","ConversationHistoryReset":"会話履歴リセット","NotConnectedToExternalAssistant":"外部アシスタントと接続されていません。","APIKeyNotEntered":"APIキーが入力されていません。","CodeLog":"コードログ","ChatLog":"会話ログ","EnterYourQuestion":"聞きたいことをいれてね","AboutThisApplication":"このアプリケーションについて","AboutThisApplicationDescription":"Webブラウザだけで3Dキャラクターとの会話を、マイクやテキスト入力、音声合成を用いて楽しめます。キャラクター（VRM）の変更や性格設定、音声調整もできます。<br />設定は左上のメニューボタンから変更できます。","TechnologyIntroduction":"技術紹介","TechnologyIntroductionDescription1":"このアプリはpixiv社の<b>ChatVRM</b>を改造して作成されています。元のソースコードは","TechnologyIntroductionLink1":"こちら","TechnologyIntroductionDescription2":"をご覧ください。","TechnologyIntroductionDescription3":"3Dモデルの表示や操作には","TechnologyIntroductionDescription4":"、 会話文生成には","TechnologyIntroductionDescription5":"などの各種LLM、 音声合成には","TechnologyIntroductionDescription6":"などの各種TTSを使用しています。 詳細はこちらの","TechnologyIntroductionLink2":"解説記事","TechnologyIntroductionDescription7":"をご覧ください。","SourceCodeDescription1":"このアプリのソースコードはGitHubで公開しています。自由に変更や改変可能です。","RepositoryURL":"リポジトリURL:","DontShowIntroductionNextTime":"次回からこのダイアログを表示しない","Close":"閉じる","Language":"言語設定","UsingGSVITTS":"GSVI TTSを使用する","GSVITTSInfo":"GSVI TTS設定","GSVITTSServerUrl":"GSVI TTSサーバーのURL","GSVITTSModelID":"GSVI TTS モデルID","GSVITTSBatchSize":"GSVI TTS バッチサイズ (1 ~ 100 数値が大きいほど推論速度は速くなりますが、大きすぎるとメモリを使い果たす可能性があります)","GSVITTSSpeechRate":"話速 (0.5 ~ 2.0 数値が大きいほど速い)","Email":"メールアドレス","Password":"パスワード","Login with Google":"Googleでログイン","Don\'t have an account?":"アカウントをお持ちでないですか？","Sign Up":"サインアップ","Already have an account?":"アカウントをお持ちですか？"}')},2834:function(e){"use strict";e.exports=JSON.parse('{"Settings":"設定","ExternalConnectionMode":"外部連線模式 (WebSocket)","YoutubeMode":"YouTube 模式","YoutubeInfo":"YouTube 直播 ID 是直播 ID 而不是頻道 ID","YoutubeAPIKey":"YouTube API 金鑰","YoutubeLiveID":"YouTube 直播 ID","ConversationContinuityMode":"會話持續模式（測試版）","ConversationContinuityModeInfo":"這是一個在沒有評論時，AI會自行嘗試繼續會話的模式。目前僅支援 OpenAI。","ConversationContinuityModeInfo2":"由於一次回答可能多次調用 LLM，因此 API 使用費用可能會增加，請注意。","ConversationContinuityModeInfo3":"在 gpt-4o 或 gpt-4-turbo 上能夠比較穩定地運行。","StatusOn":"狀態：開","StatusOff":"狀態：關","SelectAIService":"選擇 AI 服務","LocalLLM":"本地 LLM","SelectModel":"選擇模型","OpenAIAPIKeyLabel":"OpenAI API 金鑰","AnthropicAPIKeyLabel":"Anthropic API 金鑰","GoogleAPIKeyLabel":"Google Gemini API 金鑰","GroqAPIKeyLabel":"Groq API 金鑰","DifyAPIKeyLabel":"Dify API 金鑰","APIKeyInstruction":"您可以在下方獲取 API 金鑰。請將獲得的 API 金鑰輸入到表單中。","ChatGPTInfo":"ChatGPT API 直接從瀏覽器存取。","LocalLLMInfo":"Local LLM 伺服器必須正在運行。","LocalLLMInfo2":"Local LLM 伺服器URL 和 模型名 必須正確填寫。","GroqInfo":"Groq API 直接從瀏覽器存取。","DifyInfo":"Dify 只支援聊天機器人型態。","DifyInfo2":"此外，Dify 的規格限制下，對話歷史不會被保存，因此請注意。","DifyInfo3":"例：http://localhost:81/v1/chat-messages","DifyInstruction":"如果您正在使用 Dify，則此系統提示將不會被使用。請將 Dify 聊天機器人設定為系統提示。","EnterURL":"輸入 URL","CharacterModelLabel":"角色模型","OpenVRM":"開啟 VRM","BackgroundImage":"背景圖片","ChangeBackgroundImage":"更改背景圖片","CharacterSettingsPrompt":"角色設定 (系統提示)","CharacterSettingsReset":"重設角色設定","SyntheticVoiceEngineChoice":"選擇合成語音引擎","VoiceAdjustment":"語音調整","VoiceEngineInstruction":"選擇您要使用的合成音聲引擎。","UsingKoeiromap":"使用 Koeiromap（僅限日文）","UsingVoiceVox":"使用 VOICEVOX（僅限日文）","UsingGoogleTTS":"使用 Google TTS","UsingStyleBertVITS2":"使用 Style-Bert-VITS2","UserName":"使用者名稱","StyleBertVITS2Info":"使用 Style-Bert-VITS2。它使用本機 API，您需要從以下網站下載並啟動適合您環境的應用程式","SpeakerSelection":"選擇語音角色","GoogleTTSInfo":"使用 Google Cloud 文字轉語音。支援多種語言。","AuthFileInstruction":"在下方獲取認證 JSON 檔案，並將其放置於儲存庫的根目錄下，命名為 \'credentials.json\'。","LanguageModelURL":"從下方 URL 選擇語言模型。","LanguageChoice":"語言選擇","StyleBeatVITS2LocalServerURL":"Style-Bert-VITS2 本地伺服器URL","StyleBeatVITS2ModelID":"Style-Bert-VITS2 模型ID","StyleBeatVITS2Style":"Style-Bert-VITS2 風格","ConversationHistory":"聊天記錄","ConversationHistoryInfo":"最新的 10 個對話內容會被儲存為記憶。","ConversationHistoryReset":"重設聊天記錄","NotConnectedToExternalAssistant":"未連接外部助理。","APIKeyNotEntered":"尚未輸入 API 金鑰。","CodeLog":"程式碼日誌","ChatLog":"聊天記錄","EnterYourQuestion":"在此輸入您的問題","AboutThisApplication":"關於這個應用程式","AboutThisApplicationDescription":"只需使用網頁瀏覽器，即可通過麥克風或文字輸入、語音合成與 3D 角色對話。你可以更換角色（VRM）、設定性格和調整語音。<br />設定可以從左上角的選單按鈕進行更改。","TechnologyIntroduction":"技術介紹","TechnologyIntroductionDescription1":"這個應用程式是基於 pixiv 公司的 <b>ChatVRM</b> 改造而成。原始程式碼請參考","TechnologyIntroductionLink1":"這裡","TechnologyIntroductionDescription2":"。","TechnologyIntroductionDescription3":"3D 模型的顯示與操作使用","TechnologyIntroductionDescription4":"，對話生成使用了","TechnologyIntroductionDescription5":"等各種 LLM，語音合成使用了","TechnologyIntroductionDescription6":"等各種 TTS。詳細內容請參閱此","TechnologyIntroductionLink2":"解說文章","TechnologyIntroductionDescription7":"。","SourceCodeDescription1":"這個應用程式的源代碼在 GitHub 上公開，歡迎自由修改和改進。","RepositoryURL":"儲存庫 URL：","DontShowIntroductionNextTime":"下次不再顯示此對話框","Close":"關閉","Language":"語言設定","UsingGSVITTS":"使用 GSVI TTS","GSVITTSInfo":"GSVI TTS 設定","GSVITTSServerUrl":"語音推理端點URL","GSVITTSModelID":"GSVI TTS 模型ID","GSVITTSBatchSize":"GSVI TTS 批次大小 (1 ~ 100 數值越大推理速度越快，太大可能會用完記憶體)","GSVITTSSpeechRate":"語速 (0.5 ~ 2.0 數字越大越快)","Email":"電子郵件","Password":"密碼","Login with Google":"使用 Google 登入","Don\'t have an account?":"還沒有帳號？","Sign Up":"註冊","Already have an account?":"已經有帳號？"}')}},function(e){var __webpack_exec__=function(i){return e(e.s=i)};e.O(0,[9774,179],function(){return __webpack_exec__(6840),__webpack_exec__(9974)}),_N_E=e.O()}]);